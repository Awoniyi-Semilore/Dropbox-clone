!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="6e9c9d34-8962-32f2-846e-d40d29578c7e")}catch(e){}}();
define(["require","exports","./c_init_data_debug_panel","./c_redux_namespaces","./e_core_exception","./e_warp_warp_page_edison","./c_core_notify","./c_core_i18n","./c_auth_common_utils","./c_src_sink_index","./c_chat_chat_constants","react","react-dom","./c_dig-components_form_row_index","./c_dig-components_controls_index","./c_dig-icons_assets_ui-icon_line_warning","./c_dig-components_modal_index","./c_react-transition-group_CSSTransition","./e_data_modules_stormcrow","./c_www_auth_csrf","./c_api_v2_unauthed_client","./c_deprecated_ajax_ajax_as_promised_jquery","./c_ttvc_util_index","./c_deprecated_ajax_ajax_jquery","./c_ungated_idx_db_access_lib"],(function(e,t,i,n,o,s,a,r,_,l,d,g,c,E,u,h,p,m,S,R,I,O,T,f,L){"use strict";function N(e){return e&&e.__esModule?e:{default:e}}var A,G=N(g),C=N(c);t.RegistrationSource=void 0,(A=t.RegistrationSource||(t.RegistrationSource={})).MOBILE_HARDSTOP="mobile_hardstop",A.WEB_REGISTER="web",A.CHOOSER_REGISTER="chooser_generic",A.CLIENT_REGISTER="client",A.SHARE_REGISTER="share",A.FB_SHARE_REGISTER="fb_share",A.REFERRAL_REGISTER="referral",A.API_REGISTER="api",A.IPHONE_REGISTER="iphone",A.TEAM_REGISTER="team",A.TEAM_SSO_REGISTER="team_sso",A.TEAM_CREATION_REGISTER="team_creation",A.TEAM_BILLING_CONTACT_REGISTER="team_billing_contact",A.API_OAUTH_REGISTER="oauth",A.IPAD_REGISTER="ipad",A.ANDROID_REGISTER="android",A.ANDROID_PDFVIEWER_REGISTER="android_pdfviewer",A.BLACKBERRY_REGISTER="blackberry",A.WINDOWS_PHONE_TAB_REGISTER="windows_phone_tablet",A.SHMODEL_MODAL_REGISTER="shmodel_modal_register",A.SHMODEL_DOWNLOAD_REGISTER="shmodel_download_register",A.SHMODEL_SAVE_TO_REGISTER="shmodel_save_to_register",A.SHMODEL_SAVE_AS_REGISTER="shmodel_save_as_register",A.COMMENTS_SHMODEL_MODAL_REGISTER="comments_shmodel_modal_register",A.FILE_TRANSFER_MODAL_REGISTER="file_transfer_modal_register",A.FB_ADS_REGISTER="fb_ads_register",A.IDM_REGISTER="idm",A.PROVISIONING_API_REGISTER="provisioning_api_register",A.INDEX_PAGE_WEB_REGISTER="index_web",A.CAROUSEL_IPHONE_REGISTER="carousel_iphone",A.CAROUSEL_ANDROID_REGISTER="carousel_android",A.CAROUSEL_IPAD_REGISTER="carousel_ipad",A.PHOTOS_WEBAPP_REGISTER="carousel_web",A.MAILBOX_IPHONE_REGISTER="mailbox_iphone",A.MAILBOX_ANDROID_REGISTER="mailbox_android",A.MAILBOX_IPAD_REGISTER="mailbox_ipad",A.PARTNERSHIP_REGISTER="partnership",A.PRO_BUY_REGISTER="pro_buy_register",A.PRO_REDEEM_REGISTER="pro_redeem_register",A.SCRIPT_REGISTER="script_register",A.API_THIRDPARTY_REGISTER="api_thirdparty",A.RESELLER_REGISTER="reseller_register",A.SHARED_CONTENT_LINK_REGISTER="shared_content_link_register",A.OUTLOOK_ADDIN="outlook_addin",A.ZOOM_REGISTER="zoom_register",A.INVITE_LINK="invite_link",A.MOBILEWEB_REGISTER_PAGE="mobileweb_register_page",A.MOBILEWEB_LOGIN_PAGE="mobileweb_login_page",A.LOGIN_PAGE_REGISTER="login_page",A.REGISTER_PAGE_REGISTER="register_page",A.CLI_LINK_REGISTER="cli_link_nonce",A.FAMILY_INVITE="family_invite",A.SPACES_LANDING="spaces_landing",A.BUSINESS_SPACE_HIDDEN_USER="business_space_hidden",A.GOOGLE_ONE_TAP="google_one_tap",A.SIGN_UP_WITH_GOOGLE="sign_up_with_google",A.LOGIN_PAGE_GOOGLE_ONE_TAP="login_page_google_one_tap",A.LOGIN_PAGE_SIGNUP_WITH_GOOGLE="login_page_sign_up_with_google",A.LOGIN_PAGE_EMAIL="login_page_email",A.REGISTER_PAGE_GOOGLE_ONE_TAP="register_page_google_one_tap",A.REGISTER_PAGE_SIGN_UP_WITH_GOOGLE="register_page_sign_up_with_google",A.REGISTER_PAGE_SIGN_UP_WITH_APPLE="register_page_sign_up_with_apple",A.LOGIN_PAGE_EDISON="edison_login_page",A.LOGIN_PAGE_EDISON_EMAIL="edison_login_page_email",A.LOGIN_PAGE_EDISON_GOOGLE_ONE_TAP="edison_login_page_google_one_tap",A.LOGIN_PAGE_EDISON_SIGN_UP_WITH_GOOGLE="edison_login_page_sign_up_with_google",A.REGISTER_PAGE_EDISON="edison_register_page",A.FORGOT_START_PAGE_EDISON="edison_forgot_start_page",A.FORGOT_FINISH_PAGE_EDISON="edison_forgot_finish_page",A.REGISTER_PAGE_EDISON_EMAIL="edison_register_page_email",A.REGISTER_PAGE_EDISON_GOOGLE_ONE_TAP="edison_register_page_google_one_tap",A.REGISTER_PAGE_EDISON_SIGN_UP_WITH_GOOGLE="edison_register_page_sign_up_with_google",A.REGISTER_PAGE_EMAIL="register_page_email",A.HOMEPAGE_GOOGLE_ONE_TAP="homepage_google_one_tap",A.SHARED_FOLDER_MOUNT_REGISTER="shared_folder_mount_register",A.SHARED_FOLDER_COPY_REGISTER="shared_folder_copy_register",A.SHARED_FOLDER_DOWNLOAD_REGISTER="shared_folder_download_register",A.SHARED_FOLDER_BANNER_REGISTER="shared_folder_banner_register",A.SHARED_FILE_BANNER_REGISTER="shared_file_banner_register",A.SHARED_FOLDER_CONTROL_BAR="shared_folder_control_bar",A.TEAM_ACCOUNT_PAIR="team_account_pair",A.TEAM_JOIN_WITH_OTHER_EMAIL_SIGN_UP="team_join_with_other_email_sign_up",A.PROGRESSIVE_CHECKOUT="progressive_checkout",A.INSTALL_PAGE="install_page",A.DEFAULT_USC_MODAL="default_usc_modal",A.DEFAULT_USC_COMPONENT="default_usc_component",A.DEFAULT_ONE_TAP_PLATFORM="default_one_tap_platform",A.PREVIEW_UNGATED_AI="preview_ungated_ai",A.DEFAULT_SUSI_WARP_MODAL="default_susi_warp_modal",A.SUSI_UNI_NAV_MODAL="susi_uni_nav_modal",A.HOMEPAGE_SIGN_UP_WITH_GOOGLE="homepage_sign_up_with_google",A.PDF_EDIT="logged_out_pdf",A.AUDIO_VIDEO_EDIT="logged_out_audio_video",A.IMAGE_EDIT="logged_out_image",A.FILE_PREVIEW_QUICK_REACT_REGISTER="file_preview_quick_react",A.UNGATED_FILE_UPLOAD="ungated_file_upload",A.UNGATED_PDF_CONVERSION="ungated_pdf_conversion",A.UNGATED_PDF_EDITOR="ungated_pdf_editor",A.PREVIEW_DOWNLOAD_PROMPT="preview_download_prompt",A.SHARED_FOLDER_SURFACE_LEVEL_PREVIEW="shared_folder_surface_level_preview",A.SHARED_FILE_SURFACE_LEVEL_PREVIEW="shared_file_surface_level_preview",A.SHARED_LINK_FILE_PREVIEW_IMMEDIATE="shared_link_file_preview_immediate",A.CUSTOMER_SUPPORT="customer_support",A.REPLAY_REGISTER="replay_register";var v,P,D,U;!function(e){e.DISMISS_GOOGLE_ONE_TAP="dismiss_google_onetap",e.GOOGLE_ONE_TAP_CONTINUE="google_onetap_continue",e.GOOGLE_ONE_TAP_NOT_SHOWN="google_onetap_not_shown",e.GOOGLE_ONE_TAP_ACCOUNT_CREATION_SUCCESS="google_onetap_account_creation_success",e.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS="google_onetap_account_login_success",e.GOOGLE_ONE_TAP_ACCOUNT_AUTO_LOGIN_SUCCESS="google_onetap_auto_login_success",e.GOOGLE_ONE_TAP_SIGNUP_CLICK="google_onetap_signup_click",e.GOOGLE_ONE_TAP_SIGNUP_DISMISS_TOS="google_onetap_signup_dismiss_tos",e.GOOGLE_ONE_TAP_SIGNUP_PLEASE_AGREE_TO_TOS="google_onetap_signup_please_agree_to_tos",e.GOOGLE_ONE_TAP_VERIFICATION_FAILED="google_onetap_verification_failed",e.GOOGLE_ONE_TAP_VERIFICATION_SUCCESS="google_onetap_verification_success",e.GOOGLE_ONE_TAP_VERIFICATION_AUTO_SUCCESS="google_onetap_verification_auto_success",e.GOOGLE_ONE_TAP_SIG_BUTTON_CLICKED="google_onetap_sig_button_clicked",e.LOGGED_IN_GOOGLE_USER="loggedin_google_user",e.SHOW_GOOGLE_ONE_TAP="show_google_onetap",e.GOOGLE_ONE_TAP_IMPLICIT_TOS_AGREE="google_one_tap_implicit_tos_agree"}(v||(v={})),function(e){e.OPT_OUT_OR_NO_SESSION="opt_out_or_no_session",e.USER_CANCEL="user_cancel"}(P||(P={})),function(e){e.CONTINUE_WITH="continue_with",e.SIGN_IN_WITH="signin_with",e.SIGN_UP_WITH="signup_with"}(D||(D={})),function(e){e.inFlow="credential_returned"}(U||(U={}));const b=["btn","btn_confirm","btn_add_session","btn_confirm_add_session"],w=new Map([["default",{width:350,logo_alignment:"left"}],["shared-link-signup-page",{width:400,logo_alignment:"left"}]]),y={platformInitialized:!1,googleAccountInitialized:!1,displayMoment:!1,isInline:!1,isPromptClosed:!0,context:"signin",pendingContext:null,buttonContainerMounted:!1,inlineContainerMounted:!1,tosPromptDisplayed:!1,inlinePromptUIReady:!1,promptUIHasDisplayed:!1,promptNotShownReason:"",formDisabled:!1,isButtonFlow:!1,email:"",isMobile:!1,gsiInitComplete:!1};let M=y;const F=e=>`gsi_${e.toString()}`,k=e=>{M.pendingContext=e},x=e=>{const i=e.detail;M={...M,...i||{}},e.type!==F(t.GSIEvent.STATE_CHANGE)&&window.dispatchEvent(q(t.GSIEvent.STATE_CHANGE))},B={sendGSIEvent:(e,{name:t,id:i,email:n,loginSuccess:o,registerSuccess:s,promptNotShownReason:a,root_ns_id:r}={})=>{const _=V.includes(e),l=q(e,{name:t,id:i,email:n,promptNotShownReason:a,root_ns_id:r});l&&(window.dispatchEvent(l),_&&!M.platformInitialized&&k(l.detail.context))},getGSIState:()=>M,getPendingContext:()=>M.pendingContext,clearPendingContext:()=>{M.pendingContext=null},getEventType:F,createGSIEventListener:(e,t)=>{const i=e=>window.addEventListener(F(e),t);Array.isArray(e)?e.forEach((e=>{i(e)})):i(e)},removeGSIEventListener:(e,t)=>{const i=e=>window.removeEventListener(F(e),t);Array.isArray(e)?e.forEach((e=>{i(e)})):i(e)},resetGSIState:()=>{M=y}};var H;t.GSIEvent=void 0,(H=t.GSIEvent||(t.GSIEvent={})).STATE_CHANGE="state_change",H.CONTEXT_CHANGE_SIGNUP="context_change_signup",H.CONTEXT_CHANGE_SIGNIN="context_change_signin",H.INITIALIZE_PLATFORM="initialize_platform",H.INITIALIZE_GOOGLE_ACCOUNT="initialize_google_account",H.DISPLAY_MOMENT="display_moment",H.RESET_DISPLAY_MOMENT="reset_display_moment",H.USE_INLINE_PROMPT="use_inline_prompt",H.PROMPT_CLOSE="prompt_close",H.PROMPT_OPEN="prompt_open",H.SHOW_PROMPT="show_prompt",H.REMOVE_PROMPT="remove_prompt",H.INLINE_CONTAINER_MOUNTED="inline_container_mounted",H.BUTTON_CONTAINER_MOUNTED="button_container_mounted",H.BUTTON_CONTAINER_UNMOUNTED="button_container_unmounted",H.TOS_PROMPT_OPEN="tos_prompt_open",H.TOS_PROMPT_CLOSE="tos_prompt_closed",H.USE_BUTTON_FLOW="use_button_flow",H.USE_ONE_TAP_FLOW="use_one_tap_flow",H.SSO_REQUIRED="sso_required",H.INLINE_PROMPT_UI_READY="inline_prompt_ui_ready",H.INLINE_PROMPT_UI_NOT_READY="inline_prompt_ui_not_ready",H.PROMPT_UI_HAS_DISPLAYED="prompt_ui_has_displayed",H.IS_MOBILE="IS_MOBILE",H.LOGIN_SUCCESS="login_success",H.REGISTER_SUCCESS="register_success",H.GSI_INIT_COMPLETE="gsi_init_complete",H.LOCAL_STORAGE_UPLOAD_ERROR="local_storage_upload_error";const W={context_change_signup:"signup",context_change_signin:"signin"},V=[t.GSIEvent.CONTEXT_CHANGE_SIGNIN,t.GSIEvent.CONTEXT_CHANGE_SIGNUP],q=(e,{name:i,id:n,email:o,promptNotShownReason:s,root_ns_id:a}={})=>{const r=F(e);switch(e){case t.GSIEvent.CONTEXT_CHANGE_SIGNUP:case t.GSIEvent.CONTEXT_CHANGE_SIGNIN:return new CustomEvent(r,{detail:{context:W[e.toString()],formDisabled:!1}});case t.GSIEvent.INITIALIZE_PLATFORM:return new CustomEvent(r,{detail:{platformInitialized:!0}});case t.GSIEvent.INITIALIZE_GOOGLE_ACCOUNT:return new CustomEvent(r,{detail:{googleAccountInitialized:!0}});case t.GSIEvent.DISPLAY_MOMENT:return new CustomEvent(r,{detail:{displayMoment:!0}});case t.GSIEvent.RESET_DISPLAY_MOMENT:return new CustomEvent(r,{detail:{displayMoment:!1}});case t.GSIEvent.USE_INLINE_PROMPT:return new CustomEvent(r,{detail:{isInline:!0}});case t.GSIEvent.PROMPT_CLOSE:return new CustomEvent(r,{detail:{isPromptClosed:!0,promptNotShownReason:s}});case t.GSIEvent.SHOW_PROMPT:case t.GSIEvent.REMOVE_PROMPT:return new CustomEvent(r);case t.GSIEvent.PROMPT_OPEN:return new CustomEvent(r,{detail:{isPromptClosed:!1}});case t.GSIEvent.BUTTON_CONTAINER_MOUNTED:return new CustomEvent(r,{detail:{buttonContainerMounted:!0}});case t.GSIEvent.BUTTON_CONTAINER_UNMOUNTED:return new CustomEvent(r,{detail:{buttonContainerMounted:!1}});case t.GSIEvent.INLINE_CONTAINER_MOUNTED:return new CustomEvent(r,{detail:{inlineContainerMounted:!0}});case t.GSIEvent.TOS_PROMPT_OPEN:return new CustomEvent(r,{detail:{tosPromptDisplayed:!0,formDisabled:!0}});case t.GSIEvent.TOS_PROMPT_CLOSE:return new CustomEvent(r,{detail:{tosPromptDisplayed:!1,formDisabled:!1,promptNotShownReason:""}});case t.GSIEvent.USE_BUTTON_FLOW:return new CustomEvent(r,{detail:{isButtonFlow:!0}});case t.GSIEvent.USE_ONE_TAP_FLOW:return new CustomEvent(r,{detail:{isButtonFlow:!1}});case t.GSIEvent.STATE_CHANGE:return new CustomEvent(r);case t.GSIEvent.SSO_REQUIRED:return new CustomEvent(r,{detail:{email:o}});case t.GSIEvent.INLINE_PROMPT_UI_READY:return new CustomEvent(r,{detail:{inlinePromptUIReady:!0}});case t.GSIEvent.INLINE_PROMPT_UI_NOT_READY:return new CustomEvent(r,{detail:{inlinePromptUIReady:!1}});case t.GSIEvent.PROMPT_UI_HAS_DISPLAYED:return new CustomEvent(r,{detail:{promptUIHasDisplayed:!0}});case t.GSIEvent.IS_MOBILE:return new CustomEvent(r,{detail:{isMobile:!0}});case t.GSIEvent.LOGIN_SUCCESS:return new CustomEvent(r,{detail:{id:n,name:i,email:o,root_ns_id:a}});case t.GSIEvent.REGISTER_SUCCESS:return new CustomEvent(r,{detail:{id:n,name:i,email:o}});case t.GSIEvent.GSI_INIT_COMPLETE:return new CustomEvent(r,{detail:{gsiInitComplete:!0}});case t.GSIEvent.LOCAL_STORAGE_UPLOAD_ERROR:return new CustomEvent(r,{detail:{}});default:return null}};Object.values(t.GSIEvent).forEach((e=>{const t=F(e);window.addEventListener(t,x)}));const z="google-one-tap-inline-container-register",Q="google-one-tap-inline-container-login",Y="sign-in-with-google-button-container--register",j="sign-in-with-google-button-container--login",K="google-one-tap-inline-tos-register",X="google-one-tap-inline-tos-login";var $,J,Z,ee,te,ie,ne;function oe(e){return e.ns("account")}function se(e){return{class:"auth",action:"login",object:"account",properties:e}}function ae(e){return{class:"auth",action:"select",object:"auth_action",properties:e}}function re(e){return{class:"auth",action:"sign_up",object:"account",properties:e}}function _e(e){return{class:"auth",action:"view",object:"auth_dialog",properties:e}}t.GSIButtonSurface=void 0,($=t.GSIButtonSurface||(t.GSIButtonSurface={})).SUSI_LANDING_PAGE="landing_page",$.SUSI_LOGIN_PAGE="login_page",$.SUSI_REGISTER_PAGE="register_page",t.SignupEndpoints=void 0,(J=t.SignupEndpoints||(t.SignupEndpoints={})).TEAM_REGISTER="/team/join/register",J.MIGRATING_TEAM_REGISTER="/team/join/new_personal",J.THIRD_PARTY_SIGNUP="/ajax_thirdparty_register",J.PAIR_ACCOUNT="/team/join/new_pair_ajax",function(e){e.EMAIL="email",e.PASSWORD="password",e.TEXT="text",e.NUMBER="number"}(Z||(Z={})),t.AuthTextInputAutoComplete=void 0,(ee=t.AuthTextInputAutoComplete||(t.AuthTextInputAutoComplete={})).USERNAME="username",ee.NEW_PASSWORD="new-password",ee.CURRENT_PASSWORD="current-password",ee.FULL_NAME="name",ee.FIRST_NAME="given-name",ee.LAST_NAME="family-name",ee.ON="on",ee.OFF="off",function(e){e.BIG="big",e.SMALL="small",e.STANDARD="standard"}(te||(te={})),function(e){e.PAPER_COMPACT="paper-compact",e.SMALL="small",e.STANDARD="standard",e.DIG20="dig20"}(ie||(ie={})),t.UDCLResult=void 0,(ne=t.UDCLResult||(t.UDCLResult={})).SUCCESS="success",ne.ERR_OTHER="err_other",ne.ERR_RATE_LIMIT="err_rate_limit",ne.ERR_UNREACHABLE="err_unreachable",ne.ERR_EXPIRED="err_expired",ne.ERR_BAD_CARRIER="err_bad_carrier",ne.ERR_INVALID_NUMBER="err_invalid_number",ne.ERR_NOT_A_MOBILE="err_not_a_mobile",ne.ERR_INVALID_CREDENTIALS="err_invalid_credentials",ne.ERR_LOGIN_VIA_EMAIL="err_login_via_email",ne.ERR_TWO_FACTOR="err_two_factor",ne.ERR_TWO_FACTOR_REQUIRED="err_two_factor_required",ne.ERR_ENABLE_TWO_FACTOR_REQUIRED="err_enable_two_factor_required",ne.ERR_TOS_SIGNATURE_REQUIRED="err_tos_signature_required",ne.ERR_PASSWORD_REQUIRED="err_password_required",ne.ERR_SSO="err_sso",ne.ERR_SSO_REQUIRED="err_sso_required",ne.ERR_GOOGLE_LOGIN_NOT_ALLOWED="err_google_login_not_allowed",ne.ERR_RESTART_FLOW_REQUIRED="err_restart_flow_required",ne.ERR_CAPTCHA_REQUIRED="err_captcha_required",ne.ERR_NO_EMAIL_IN_RESPONSE="err_no_email_in_response",ne.ERR_EMAILS_DO_NOT_MATCH="err_emails_do_not_match",ne.ERR_APPLE_LOGIN_NOT_ALLOWED="err_apple_login_not_allowed",ne.ERR_KAKAO_LOGIN_NOT_ALLOWED="err_kakao_login_not_allowed",ne.ERR_EMAIL_FORM_FIELD="err_email_form_field",ne.ERR_FIRST_NAME_FORM_FIELD="err_first_name_form_field",ne.ERR_LAST_NAME_FORM_FIELD="err_last_name_form_field",ne.ERR_PASSWORD_FORM_FIELD="err_password_form_field",ne.ERR_TOS_AGREE_FORM_FIELD="err_tos_agree_form_field",ne.ERR_NOT_SUPPORTED="err_not_supported",ne.ERR_TOO_MANY_REQUESTS="err_too_many_requests",ne.ERR_NOT_VERIFIED="err_not_verified",ne.ERR_USER_CANCELLED_AUTHORIZE="err_user_cancelled_authorize",ne.ERR_ACCESS_DENIED="err_access_denied",ne.ERR_DISABLED="err_disabled",ne.ERR_INVALID_TOKEN="err_invalid_token",ne.ERR_USER_ALREADY_INVITED_TO_TEAM="err_user_already_invited_to_team",ne.ERR_UNSUPPORTED="err_unsupported",ne.ERR_USER_NOT_LOGGED_IN="err_user_not_logged_in",ne.ERR_ALREADY_PAIRED="err_already_paired",ne.ERR_ALREADY_LINKED_USERS="err_already_linked_users",ne.ERR_PAIR_SAME_ROLE="err_pair_same_role",ne.ERR_PAIR_CURRENT_ACCOUNT="err_pair_current_account",ne.ERR_BLOCKED_DOMAIN="err_blocked_domain",ne.ERR_AUTOMATION_DETECTED="err_automation_detected",ne.ERR_ACCOUNT_CAPTURE="err_account_capture";const le="web_auth",de="n_a";var ge,ce,Ee,ue;!function(e){e.CREDENTIALS="email",e.GOOGLE="google_auth",e.GOOGLE_ONE_TAP="google_one_tap",e.APPLE="apple_auth",e.MAGIC_LINK="magic_link"}(ge||(ge={})),function(e){e.GOOGLE_LOGIN_START="google_login_start",e.GOOGLE_LOGIN_SUCCEEDED="google_login_succeeded",e.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR="google_login_requires_two_factor",e.GOOGLE_LOGIN_FAILED="google_login_failed",e.GOOGLE_SIGNUP_START="google_signup_start",e.GOOGLE_SIGNUP_SUCCEEDED="google_signup_succeeded",e.GOOGLE_SIGNUP_FAILED="google_signup_failed",e.GOOGLE_ONE_TAP_SIGNUP_CLICK="google_onetap_signup_click"}(ce||(ce={})),function(e){e.EMAIL_LOGIN_START="email_login_start",e.EMAIL_SPLIT_SIGNUP_CONTINUE="email_split_signup_continue",e.EMAIL_LOGIN_SUCCEEDED="email_login_succeeded",e.EMAIL_LOGIN_REQUIRES_TWO_FACTOR="email_login_requires_two_factor",e.EMAIL_LOGIN_REDIRECT="email_login_redirect",e.EMAIL_LOGIN_FAILED="email_login_failed",e.EMAIL_SIGNUP_START="email_signup_start",e.EMAIL_SIGNUP_SUCCEEDED="email_signup_succeeded",e.EMAIL_SIGNUP_FAILED="email_signup_failed",e.EMAIL_2FA_VWC_START="email_2fa_vwc_start",e.EMAIL_2FA_VWC_SUCCESS="email_2fa_vwc_success",e.EMAIL_2FA_VWC_SUBMISSION="email_2fa_vwc_submit",e.EMAIL_2FA_VWC_ERROR="email_2fa_vwc_error",e.EMAIL_2FA_VWC_SUCCESS_CREDENTIALS_ERROR="email_2fa_vwc_success_credentials_error"}(Ee||(Ee={})),function(e){e.ENTER_EMAIL_CONTINUE="enter_email_continue",e.ENTER_EMAIL_CONTINUE_SSO="enter_email_continue_sso",e.LOGIN_SSO_USER="login_sso_user",e.ENTER_EMAIL="enter_email",e.REGISTER_ENTER_ACCOUNT_DETAILS="register_enter_account_details",e.LOGIN_ENTER_PASSWORD="login_enter_password",e.EMAIL_SUBMITTED_WITH_PASSWORD_AUTOFILL="email_submitted_with_password_autofill"}(ue||(ue={}));const he=new Set(["form_error","user_exists","access_denied","tfa_required","sso_required","emails_do_not_match_redirect"]),pe=new Set(["enable_twofactor_required","emails_do_not_match","emails_do_not_match_redirect","target_user_not_found","invalid_pair_target","already_paired","not_verified","email_not_verified","google_login_not_allowed","access_denied","disabled_account","tos_required","sso_required","tfa_required","requires_password","requires_twofactor","invalid_token","missing_email","unsupported_platform","unverified_email","server_error","disabled_user","user_already_invited_to_team","account_capture","no_email_in_response","requires_password_on_first_link","apple_login_not_allowed","apple_login_not_allowed_for_teams","apple_login_turned_off_for_teams","user_cancelled_authorize"]),me={success:t.UDCLResult.SUCCESS,emails_do_not_match:t.UDCLResult.ERR_EMAILS_DO_NOT_MATCH,emails_do_not_match_redirect:t.UDCLResult.ERR_EMAILS_DO_NOT_MATCH,not_verified:t.UDCLResult.ERR_NOT_VERIFIED,email_not_verified:t.UDCLResult.ERR_NOT_VERIFIED,enable_twofactor_required:t.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED,requires_twofactor:t.UDCLResult.ERR_TWO_FACTOR_REQUIRED,requires_password:t.UDCLResult.ERR_PASSWORD_REQUIRED,sso_required:t.UDCLResult.ERR_SSO_REQUIRED,tos_required:t.UDCLResult.ERR_TOS_SIGNATURE_REQUIRED,google_login_not_allowed:t.UDCLResult.ERR_GOOGLE_LOGIN_NOT_ALLOWED,too_many_requests:t.UDCLResult.ERR_TOO_MANY_REQUESTS,access_denied:t.UDCLResult.ERR_ACCESS_DENIED,disabled_account:t.UDCLResult.ERR_DISABLED,disabled_user:t.UDCLResult.ERR_DISABLED,tfa_required:t.UDCLResult.ERR_TWO_FACTOR_REQUIRED,invalid_token:t.UDCLResult.ERR_INVALID_TOKEN,invalid_csrf_token:t.UDCLResult.ERR_INVALID_TOKEN,invalid_logged_out_cookie:t.UDCLResult.ERR_INVALID_TOKEN,missing_email:t.UDCLResult.ERR_NO_EMAIL_IN_RESPONSE,unverified_email:t.UDCLResult.ERR_NOT_VERIFIED,user_already_invited_to_team:t.UDCLResult.ERR_USER_ALREADY_INVITED_TO_TEAM,unsupported_platform:t.UDCLResult.ERR_NOT_SUPPORTED,user_not_logged_in:t.UDCLResult.ERR_USER_NOT_LOGGED_IN,target_user_not_found:t.UDCLResult.ERR_PAIR_CURRENT_ACCOUNT,invalid_pair_target:t.UDCLResult.ERR_PAIR_SAME_ROLE,already_paired:t.UDCLResult.ERR_ALREADY_PAIRED,other:t.UDCLResult.ERR_OTHER,account_capture:t.UDCLResult.ERR_ACCOUNT_CAPTURE},Se={funcaptcha_response:t.UDCLResult.ERR_CAPTCHA_REQUIRED,email:t.UDCLResult.ERR_EMAIL_FORM_FIELD,fname:t.UDCLResult.ERR_FIRST_NAME_FORM_FIELD,lname:t.UDCLResult.ERR_LAST_NAME_FORM_FIELD,password:t.UDCLResult.ERR_PASSWORD_FORM_FIELD,tos_agree:t.UDCLResult.ERR_TOS_AGREE_FORM_FIELD,apple_login_not_allowed:t.UDCLResult.ERR_APPLE_LOGIN_NOT_ALLOWED,apple_login_turned_off_for_teams:t.UDCLResult.ERR_APPLE_LOGIN_NOT_ALLOWED,no_email_in_response:t.UDCLResult.ERR_NO_EMAIL_IN_RESPONSE,user_cancelled_authorize:t.UDCLResult.ERR_USER_CANCELLED_AUTHORIZE,already_paired:t.UDCLResult.ERR_ALREADY_PAIRED,pair_same_role:t.UDCLResult.ERR_PAIR_SAME_ROLE,too_many_attempts:t.UDCLResult.ERR_TOO_MANY_REQUESTS,blocked_domain:t.UDCLResult.ERR_BLOCKED_DOMAIN,automation_detected:t.UDCLResult.ERR_AUTOMATION_DETECTED},Re={logSignupIntent(e){Ce("signup/intent",{},1),e&&Ce("signup/intent/experiments",{...e},1)},logSignupAttempt(e){Ce("signup/attempt",{authType:e},1)},logSignupResponse(e,t,i,n){"funcaptcha_response"!==i?t?(Ce("signup/success",{authType:e},1),n&&Ce("signup/success/experiments",{authType:e,...n},1)):(Ce("signup/success",{authType:e},0),Ce("signup/failure",{authType:e,error:Ne(i,he)},1),n&&(Ce("signup/success/experiments",{authType:e,...n},0),Ce("signup/failure/experiments",{authType:e,error:Ne(i,he),...n},1))):Ce("signup/failure",{authType:e,error:i},1)},logLoginIntent(e){Ce("login/intent",{loginType:e||"normal"},1)},logLoginAttempt(e,t){Ce("login/attempt",{authType:e,loginType:t||"normal"},1)},logCredentialsLoginResponse(e,t){const i=ge.CREDENTIALS,n=e||"normal";if("funcaptcha_response"===t)return void Ce("login/failure",{authType:i,loginType:n,error:t},1);if(t===_.LoginResponseStatus.OK||t===_.LoginResponseStatus.TWOFACTOR)Ce("login/success",{authType:i,loginType:n},1);else{let e;switch(t){case _.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:e="tos_required";break;case _.LoginResponseStatus.SSO:e="sso_required";break;case _.LoginResponseStatus.TWOFACTOR_REQUIRED:e="enable_twofactor_required";break;case _.LoginResponseStatus.RATELIMIT:e="rate_limited";break;case _.LoginResponseStatus.EXPIRED:e="login_expired";break;case _.LoginResponseStatus.PASSWORD_EXPIRED:e="password_expired";break;case _.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:e="password_descryption_error";break;case _.LoginResponseStatus.ERROR:e="generic_error";break;case"form_error":e=t;break;default:e="unknown"}Ce("login/success",{authType:i,loginType:n},0),Ce("login/failure",{authType:i,loginType:n,error:e},1)}},logMagicLinkLoginResponse(e,t){e||"tfa_required"===t?Ce("login/success",{authType:ge.MAGIC_LINK,loginType:"normal"},1):(Ce("login/success",{authType:ge.MAGIC_LINK,loginType:"normal"},0),Ce("login/failure",{authType:ge.MAGIC_LINK,loginType:"normal",error:null!=t?t:"unknown"},1))},logThirdPartyLoginResponse(e,t,i,n){const o=t||"normal";i||"tfa_required"===n?Ce("login/success",{authType:e,loginType:o},1):(Ce("login/success",{authType:e,loginType:o},0),Ce("login/failure",{authType:e,loginType:o,error:Ne(n,pe)},1))},log2faResponse(e,t){const i=e||"normal";if(t===_.LoginResponseStatus.OK)Ce("2fa/success",{loginType:i},1);else{let e;switch(t){case _.LoginResponseStatus.REQUIRES_ROLE:e="requires_role";break;case _.LoginResponseStatus.EXPIRED:e="twofactor_expired";break;case _.LoginResponseStatus.INVALID_CREDENTIALS:e="invalid_credentials";break;case _.LoginResponseStatus.ERROR:e="generic_error";break;case"u2f_error":case"code_error":e=t;break;default:e="unknown"}Ce("2fa/success",{loginType:i},0),Ce("2fa/failure",{loginType:i,error:e},1)}}},Ie={logSignupModalShown(e,t={}){ve("signup_modal_shown",{url:s.get_href(),kind:e,...t})},logLoginModalShown(e,t={}){ve("login_modal_shown",{url:s.get_href(),kind:e,...t})},logSignupModalDismissed(e){ve("signup_modal_dismissed",{url:s.get_href(),kind:e})},logLoginModalDismissed(e){ve("login_modal_dismissed",{url:s.get_href(),kind:e})},logRecoverableErrorShown(){ve("login_recoverable_error_shown",{url:s.get_href()})},logDisabledErrorShown(){ve("login_disabled_error_shown",{url:s.get_href()})},logRecoverableErrorDismissed(){ve("login_recoverable_error_dismissed",{url:s.get_href()})},logDisabledErrorDismissed(){ve("login_disabled_error_dismissed",{url:s.get_href()})}};class Oe{constructor(e,t){this.defaultEventProperties=()=>{const e="oauth_desktop"===this.surface?_.getQueryParam("session_id"):null;return{actionSurface:this.surface,signupTag:this.signupTag||de,...e?{onboardingSessionId:e}:{}}},this.tags=(e,t)=>{const i={tags:{action_surface:this.surface||de,browser:_.getBrowserTag()||"unknown",...e}};return t&&(i.key=t),i},this.surface=(e||de).replace(/(?:_google_login|_one_tap_login_auto|_one_tap_login|_apple_login)$/g,""),this.signupTag=t}}class Te extends Oe{constructor(e,t,i){super(e,t),this.logSignupInlineTermsOfServiceView=e=>{const t="third_party_signup_inline_tos";s.UDCL.logEvent(_e({actionElement:t,...this.defaultEventProperties()}),this.tags({action_element:t,auth_method:e}))},this.logSignupTermsClick=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";s.UDCL.logEvent(ae({actionElement:e,authAction:"dropbox_terms_link",...this.defaultEventProperties()}),this.tags({action_element:e,auth_action:"dropbox_terms_link"}))},this.logSignupServicesAgreementClick=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";s.UDCL.logEvent(ae({actionElement:e,authAction:"dropbox_services_agreement_link",...this.defaultEventProperties()}),this.tags({action_element:e,auth_action:"dropbox_services_agreement_link"}))},this.logSignupPrivacyClick=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";s.UDCL.logEvent(ae({actionElement:e,authAction:"privacy_policy_link",...this.defaultEventProperties()}),this.tags({action_element:e,auth_action:"privacy_policy_link"}))},this.logSignupEmailFilled=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";s.UDCL.logEvent(ae({authAction:"email_form_fill",actionElement:e,...this.defaultEventProperties()}),this.tags({auth_action:"email_form_fill",action_element:e}))},this.logSignupFirstNameFilled=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";s.UDCL.logEvent(ae({authAction:"first_name_form_fill",actionElement:e,...this.defaultEventProperties()}),this.tags({auth_action:"first_name_form_fill",action_element:e}))},this.logSignupLastNameFilled=()=>{const e=this.isThirdParty?"third_party_signup_dialog":"sign_up_account_details_dialog";s.UDCL.logEvent(ae({authAction:"last_name_form_fill",actionElement:e,...this.defaultEventProperties()}),this.tags({auth_action:"last_name_form_fill",action_element:e}))},this.isThirdParty=!!i}}class fe extends Te{constructor(){super(...arguments),this.logLoginStart=(e=!0,t=!0)=>{Pe(ce.GOOGLE_LOGIN_START);const i=e?"google_onetap_continue":"google_continue";s.UDCL.logEvent(ae({actionElement:"enter_email_dialog",authAction:i,...this.defaultEventProperties()}),this.tags({auth_action:i,action_element:"enter_email_dialog"})),t&&s.UDCL.logStart(se({authMethod:e?"google_one_tap":"google",actionElement:"enter_email_dialog",...this.defaultEventProperties()}),this.tags({action_element:"enter_email_dialog",auth_method:e?"google_one_tap":"google"},i))},this.logLoginCancel=(e=!0)=>{const i=e?"google_onetap_continue":"google_continue",n=e?{actionElement:"enter_email_dialog",authMethod:"google_one_tap"}:{actionElement:"enter_email_dialog",authMethod:"google"};s.UDCL.logEnd(se({eventState:"canceled",...n,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_RESTART_FLOW_REQUIRED}),this.tags({action_element:n.actionElement,auth_method:n.authMethod,result:t.UDCLResult.ERR_RESTART_FLOW_REQUIRED},i))},this.logLoginResponse=(e,i,n,a)=>{const r=e?"google_onetap_continue":"google_continue",_=e?{actionElement:"enter_email_dialog",authMethod:"google_one_tap"}:{actionElement:"enter_email_dialog",authMethod:"google"};i&&"success"!==i?"tfa_required"===i||"requires_twofactor"===i?(s.UDCL.logEnd(se({eventState:"rejected",..._,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_TWO_FACTOR_REQUIRED}),this.tags({action_element:_.actionElement,auth_method:_.authMethod,result:t.UDCLResult.ERR_TWO_FACTOR_REQUIRED},r)),De(ce.GOOGLE_LOGIN_REQUIRES_TWO_FACTOR,!0)):"tos_required"===i?(s.UDCL.logEnd(se({eventState:"rejected",..._,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_TOS_SIGNATURE_REQUIRED}),this.tags({action_element:_.actionElement,auth_method:_.authMethod,result:t.UDCLResult.ERR_TOS_SIGNATURE_REQUIRED},r)),De(ce.GOOGLE_LOGIN_FAILED,!0)):"enable_twofactor_required"===i?(s.UDCL.logEnd(se({eventState:"rejected",..._,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED}),this.tags({action_element:_.actionElement,auth_method:_.authMethod,result:t.UDCLResult.ERR_ENABLE_TWO_FACTOR_REQUIRED},r)),De(ce.GOOGLE_LOGIN_FAILED,!0)):"google_login_not_allowed"===i?(s.UDCL.logEnd(se({eventState:n?"success":"rejected",..._,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_GOOGLE_LOGIN_NOT_ALLOWED}),this.tags({action_element:_.actionElement,auth_method:_.authMethod,result:t.UDCLResult.ERR_GOOGLE_LOGIN_NOT_ALLOWED},r)),De(ce.GOOGLE_LOGIN_FAILED,!0)):"sso_required"===i?(s.UDCL.logEnd(se({eventState:"rejected",..._,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_SSO_REQUIRED}),this.tags({action_element:_.actionElement,auth_method:_.authMethod,result:t.UDCLResult.ERR_SSO_REQUIRED},r)),De(ce.GOOGLE_LOGIN_FAILED,!0)):"requires_password"===i?(s.UDCL.logEnd(se({eventState:"rejected",..._,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_PASSWORD_REQUIRED}),this.tags({action_element:_.actionElement,auth_method:_.authMethod,result:t.UDCLResult.ERR_PASSWORD_REQUIRED},r)),De(ce.GOOGLE_LOGIN_FAILED,!0)):["too_many_requests","emails_do_not_match","emails_do_not_match_redirect","not_verified","email_not_verified","access_denied","disabled_account","disabled_user","invalid_token","invalid_csrf_token","invalid_logged_out_cookie","missing_email","unverified_email","user_already_invited_to_team","unsupported_platform","target_user_not_found","invalid_pair_target","already_paired"].includes(i)?(s.UDCL.logEnd(se({eventState:"rejected",..._,...this.defaultEventProperties(),authErrorReason:me[i]}),this.tags({action_element:_.actionElement,auth_method:_.authMethod,result:me[i]},r)),De(ce.GOOGLE_LOGIN_FAILED,!0)):(["server_error","other"].includes(i)||o.reportException({err:new Error(`Unexpected error during Google login: ${i}`),severity:o.SEVERITY.NONCRITICAL,tags:["usc"]}),s.UDCL.logEnd(se({eventState:"failed",..._,...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_OTHER}),this.tags({action_element:_.actionElement,auth_method:_.authMethod,result:t.UDCLResult.ERR_OTHER},r)),De(ce.GOOGLE_LOGIN_FAILED,!0)):(s.UDCL.logEnd(se({eventState:"success",..._,...this.defaultEventProperties()}),{papOptions:{userId:a},...this.tags({action_element:_.actionElement,auth_method:_.authMethod,result:t.UDCLResult.SUCCESS},r)}),De(ce.GOOGLE_LOGIN_SUCCEEDED,!0))},this.logOneTapDismissed=()=>{s.UDCL.logEvent(ae({actionElement:"enter_email_dialog",authAction:"google_onetap_dismiss",...this.defaultEventProperties()}),this.tags({action_element:"enter_email_dialog",auth_action:"google_onetap_dismiss"}))},this.logSignupStart=e=>{Pe(e?ce.GOOGLE_ONE_TAP_SIGNUP_CLICK:ce.GOOGLE_SIGNUP_START);const t=this.isThirdParty?"third_party_signup_dialog":"enter_email_dialog",i=e?"google_one_tap":"google";s.UDCL.logStart(re({authMethod:i,actionElement:t,...this.defaultEventProperties()}),this.tags({auth_method:i,action_element:t}))},this.logSignupResponse=(e,i,n={},a)=>{De("success"===e?ce.GOOGLE_SIGNUP_SUCCEEDED:ce.GOOGLE_SIGNUP_FAILED,!0);const r=this.isThirdParty?"third_party_signup_dialog":"enter_email_dialog",_=i?"google_one_tap":"google";switch(e){case"success":s.UDCL.logEnd(re({authMethod:_,actionElement:r,eventState:"success",...this.defaultEventProperties()}),{papOptions:{userId:a},...this.tags({auth_method:_,action_element:r,result:me[e]})});break;case"enable_twofactor_required":case"requires_twofactor":case"requires_password":case"tfa_required":case"sso_required":s.UDCL.logEnd(re({authMethod:_,actionElement:r,eventState:"rejected",authErrorReason:me[e],...this.defaultEventProperties()}),this.tags({auth_method:_,action_element:r,result:me[e]}));break;case"tos_required":case"google_login_not_allowed":case"emails_do_not_match":case"emails_do_not_match_redirect":case"not_verified":case"email_not_verified":case"access_denied":case"disabled_account":case"disabled_user":case"invalid_token":case"invalid_csrf_token":case"invalid_logged_out_cookie":case"missing_email":case"unverified_email":case"user_already_invited_to_team":case"unsupported_platform":case"too_many_requests":case"target_user_not_found":case"invalid_pair_target":case"already_paired":case"account_capture":s.UDCL.logEnd(re({authMethod:_,actionElement:r,eventState:"rejected",...this.defaultEventProperties(),authErrorReason:me[e]}),this.tags({auth_method:_,action_element:r,result:me[e]}));break;case"server_error":case"other":const i=Object.keys(n),l=i.length&&Se[i[0]]||t.UDCLResult.ERR_OTHER;s.UDCL.logEnd(re({authMethod:_,actionElement:r,eventState:l===t.UDCLResult.ERR_OTHER?"failed":"rejected",...this.defaultEventProperties(),authErrorReason:l}),this.tags({auth_method:_,action_element:r,result:l}));break;default:o.reportException({err:new Error(`Unexpected error during Google signup: ${e}`),severity:o.SEVERITY.NONCRITICAL,tags:["usc"]}),s.UDCL.logEnd(re({authMethod:_,actionElement:r,eventState:"failed",...this.defaultEventProperties(),authErrorReason:t.UDCLResult.ERR_OTHER}),this.tags({auth_method:_,action_element:r,result:t.UDCLResult.ERR_OTHER}))}},this.logSignupTermsToggle=e=>{const t=e?"dropbox_terms_accept":"dropbox_terms_decline";s.UDCL.logEvent(ae({actionElement:"enter_email_dialog",authAction:t,...this.defaultEventProperties()}),this.tags({auth_action:t,action_element:"enter_email_dialog"}))},this.logSignupTermsDismiss=e=>{s.UDCL.logEvent(ae({actionElement:"enter_email_dialog",authAction:"dropbox_terms_dismiss",...this.defaultEventProperties()}),this.tags({action_element:"enter_email_dialog",auth_action:"dropbox_terms_dismiss"}))}}}const Le={logOneTapNotShown(e){Ce("google_onetap_not_shown",{error:e},1)},logOneTapShown(){Ce("show_google_onetap",{},1)},logAuthType(e){Ce("authType",{selectBy:e},1)},logScriptLoadError(){Ce("google_onetap_script_load_error",{},1)},logScriptLoadSuccess(){Ce("google_onetap_script_load_success",{},1)},logCredentialsDecodeError(){Ce("google_onetap_credentials_decode_error",{},1)}};function Ne(e,t){return e&&t.has(e)?e:"unknown"}const Ae=new Set(["/scl/fi/","/scl/fo/","/s/","/sh/","/transfer/","/family/join/","/referrals/","/sc/","/request/","/oauth2/authorize"]);function Ge(){let e=s.get_pathname();Ae.forEach((t=>{e.includes(t)&&(e=t)}));const t=e.split("/");return s.LocaleCodes.forEach((i=>{t[1]===i&&(e=2===t.length?"/":e.replace(i+"/",""))})),e.endsWith("/")||(e+="/"),e}function Ce(e,t,i=1){try{l.getMetricsReporter().createStats({ns:le,name:e},{...t,browser:_.getBrowserTag(),pagePath:Ge()}).record(i)}catch(i){o.reportException({err:i,severity:o.SEVERITY.NONCRITICAL,tags:["web_auth_amp_logging","acquisition_eng"],exc_extra:{metricName:e,...t}})}}function ve(e,t){s.UXAnalyticsLogger.log(e,{...t,is_edison:d.isServedByEdisonWebServer().toString()})}function Pe(e){let t=document.createElement("button");t.setAttribute("data-uxa-log",e),document.body.appendChild(t),t.style.visibility="hidden";let i=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(i),document.body.removeChild(t)}function De(e,t){t?s.dispatchDialogOpened({element_id:e}):s.dispatchDialogClosed({element_id:e})}function Ue(e){const t=e=>decodeURIComponent(escape(e)),[i,n,o]=e.split(".").map((e=>atob(e.split("_").join("/").split("-").join("+"))));if(!o)return Le.logCredentialsDecodeError(),null;try{if("JWT"!==JSON.parse(t(i)).typ)return null;const e=JSON.parse(t(n));return{userId:e.sub.toString(),email:e.email.toString(),givenName:e.given_name.toString(),familyName:e.family_name.toString(),emailVerified:Boolean(e.email_verified).valueOf()}}catch{return Le.logCredentialsDecodeError(),null}}const be={log_web_login_intent(){ye({".tag":"web_login_intent"})},log_web_signup_intent(){ye({".tag":"web_signup_intent"})},log_web_login_captcha(){ye({".tag":"web_login_captcha"})},log_web_signup_captcha(){ye({".tag":"web_signup_captcha"})}},we=(e,t)=>{const i=I.filterApiError(t);if(!i)return!1;let n;const o=(null==i?void 0:i.response)||(null==i?void 0:i.message)||(null==i?void 0:i.summary);return!!o&&(o.indexOf("Fetch network failure - message aborted or user offline")>-1?n="Fetch network failure - message aborted or user offline":o.indexOf("invalid_logged_out_cookie/")>-1?n="invalid_logged_out_cookie":o.indexOf("invalid_csrf_token/")>-1&&(n="invalid_csrf_token"),!!n&&(s.UDCL.logEvent({class:"api_error",action:"auth_event_logger",object:"client"},{tags:{event_name:e,rpc_path:"log_auth_event",error:n}}),!0))},ye=e=>{const t=new s.NoAuthApiV2Client;try{(function(e){return e.ns("auth_logger")})(t).rpc("log_auth_event",{event_name:e,event_url:s.get_href()},{})}catch(t){const i=e[".tag"];we(i,t)||o.reportException({err:t,severity:o.SEVERITY.NONCRITICAL,tags:["login_or_register"]})}};function Me({googleCredentials:e,select_by:t,tos_signed:i,marketingOptedIn:n,cont_url:o,visitorId:a,fpRequestId:r,webSigninTag:_,webSignupTag:l,referralCode:d,referralSource:g,emailHash:c,additionalAuthParams:E,signupReferrer:u,fpSealedResult:h}){const p={id_token:e,one_tap_platform:{".tag":"web"},select_by:t,remember_me:!0,pair_user:!1,tos_signed:i,source_url:s.get_href(),marketing_opt_in:n,cont_url:o,visitor_id:a,web_signin_tag:_,fp_request_id:r,referral_code:d,referral_source:g,web_signup_tag:l,email_hash:c,additional_auth_params:E,signup_referrer:u,fp_sealed_result:h};return oe(new s.NoAuthApiV2Client).rpc("register_or_sign_in_with_1tap",p,{})}function Fe(e){switch(e.error[".tag"]){case"unsupported_platform":a.Notify.error(r.intl.formatMessage({id:"zxg8L5",defaultMessage:"This platform is not supported by Google One Tap."}));break;case"unverified_email":a.Notify.error(r.intl.formatMessage({id:"8vxEe0",defaultMessage:"Verify your email with Google to sign in with this email address."}));break;case"disabled_user":a.Notify.error(r.intl.formatMessage({id:"FtHoiO",defaultMessage:"This account has been marked as inactive. Contact the team admin."}));break;case"user_already_invited_to_team":a.Notify.error(r.intl.formatMessage({id:"WPQLwi",defaultMessage:"You've already been invited. Check your email for an invite link or ask the admin to resend it."}));break;case"invalid_token":a.Notify.error(r.intl.formatMessage({id:"hcIBNz",defaultMessage:"That email address wasn't found, try checking it for typos."}));break;case"require_role":a.Notify.error(r.intl.formatMessage({id:"2y3bQh",defaultMessage:"Please sign in with a work account."}));break;case"account_capture":a.Notify.error(r.intl.formatMessage({id:"qG5fHp",defaultMessage:"This is a company domain, try signing up with another email or contact an admin."}));break;default:a.Notify.error(r.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}));we("google_one_tap",e)||o.reportException({err:e,severity:o.SEVERITY.NONCRITICAL,tags:["google_one_tap","unknown_error"]})}}function ke(e,i){const n=i.match(/^[^_]+/),o=e||t.RegistrationSource.DEFAULT_ONE_TAP_PLATFORM;if(!n)return;switch(n[0]){case"btn":return[o,"google_login"].join("_");case"user":return[o,"one_tap_login"].join("_");case"auto":return[o,"one_tap_login_auto"].join("_");default:return}}async function xe(e,t){let i=0;for(s.UDCL.logStart("ungated_store_susi_save_file",{tags:{state:"start",store:(null==e?void 0:e.store)||"undefined"}}),e.onUploadStart&&e.onUploadStart();i<3;)try{let i=e.sessionId;if(e.store&&(i=await L.ungatedDBStore.getLatestUngatedSessionKeyForStore(e.store)),!i)return;const o=s.createUser((n=t,new s.User({id:d.protoInt64.parse(n.id||0),email:n.email||"",role:n.role||"",adminRole:n.admin_role||0,paid:n.paid||0,fname:n.fname||"",lname:n.lname||"",displayName:n.display_name||"",familiarName:n.familiar_name||"",initialsUrl:n.initials_url||"",photoUrl:n.photo_url||"",photoCircleUrl:n.photo_circle_url||"",isTeam:n.is_team||0,isTeamAdmin:!!n.is_team_admin,isDropboxAdmin:!!n.is_dropbox_admin,isEmailVerified:!!n.is_email_verified,ssoRequired:!!n.sso_required,teamDbtid:n.team_dbtid||"",isPaperDisabled:!!n.is_paper_disabled,accountId:n.account_id||"",teamMemberId:n.team_member_id||"",hasNeverSetPassword:!!n.has_never_set_password,isSignedIn:!!n._authed,rootNsId:d.protoInt64.parse(n.root_ns_id||0),homeNsId:d.protoInt64.parse(n.home_ns_id||0),nid:n.nid||"",isCdmMember:!!n.is_cdm_member,isTmrMember:!!n.is_tmr_member,cdmTmfPath:n.cdm_tmf_path||"",userRootPermissions:n.user_root_permissions||"",isGuestAdmin:!!n.is_guest_admin,teamName:n.team_name||"",linkedUserId:n.linked_user_id||"",userAccountAgeInDays:n.user_account_age_in_days||0,userTimeOnTeamInDays:n.user_time_on_team_in_days||0})));if(o){const t=await L.ungatedDBStore.getFileData(i);t&&await Be(t,o,e)}return s.UDCL.logEnd("ungated_store_susi_save_file",{eventState:"success",tags:{store:(null==e?void 0:e.store)||"undefined"}}),L.ungatedDBStore.deleteUngatedSession(i)}catch(t){if(i++,3===i&&e.onErrorCallback)return s.UDCL.logEnd("ungated_store_susi_save_file",{eventState:"failed",tags:{store:(null==e?void 0:e.store)||"undefined"}}),void e.onErrorCallback()}var n}async function Be(e,t,i){const n=e.byteLength;let o=0;const a=new s.DefaultUserApiV2Client(t).ns("files");let r="";for(;o<n;){const t=Math.min(o+4194304,n),i=e.slice(o,t);if(0===o){r=(await a.upload("upload_session/start",{close:!1},i,{})).session_id}else await a.upload("upload_session/append_v2",{close:!1,cursor:{offset:o,session_id:r}},i,{});o=t}const _={commit:{autorename:i.autoRename||!1,mute:!1,path:"/"+i.filename||"/"+Date.now(),strict_conflict:!1},cursor:{offset:o,session_id:r}};await a.upload("upload_session/finish_v2",_,null,{})}function He(e){var t,i,n;const o=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"/sso_state",a=null!==(i=null==e?void 0:e.routeParams)&&void 0!==i?i:{},r=null!==(n=null==e?void 0:e.base)&&void 0!==n?n:window.location.origin;return new s.AjaxURL(s.replacePattern(o,a),r)}const We=/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/;class Ve{constructor(){this.shouldCheckSsoState=e=>e.match(We),this.checkSsoState=(e="",t,i=!1)=>{this.shouldCheckSsoState(e)?this.CACHE[e]?t(e,this.CACHE[e]):!i&&this.INFLIGHT[e]||(this.INFLIGHT[e]=!0,function(e){return new Promise((t=>O.WebRequest({url:He(),data:{email:e},success:e=>t(JSON.parse(e))})))}(e).then((i=>{this.CACHE[e]=i,t(e,this.CACHE[e])})).finally((()=>{delete this.INFLIGHT[e]}))):t(e,{user_sso_state:_.SsoState.OFF})},this.CACHE={},this.INFLIGHT={}}}class qe extends G.default.Component{shouldComponentUpdate(e){return this.hasNewError(e.error)}hasNewError(e){var t;return!this.hasMatchingErrorMessage(e)||(null==e?void 0:e.clientTimestamp)!==(null===(t=this.props.error)||void 0===t?void 0:t.clientTimestamp)}hasMatchingErrorMessage(e){var t,i;return(null==e?void 0:e.message_html)===(null===(t=this.props.error)||void 0===t?void 0:t.message_html)&&(null==e?void 0:e.message_text)===(null===(i=this.props.error)||void 0===i?void 0:i.message_text)}render(){const{error:e,errorId:t}=this.props;return e&&e.message_html?G.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper",dangerouslySetInnerHTML:{__html:a.purify.sanitize(e.message_html)}}):e&&e.message_text?G.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper"},G.default.createElement("span",{className:"error-message"},e.message_text,G.default.createElement("span",{className:"text-input-error-hidden ax-visually-hidden","aria-hidden":"true",style:{visibility:"hidden"}},e.clientTimestamp))):G.default.createElement("div",{id:t,"aria-live":"polite","aria-atomic":"true",className:"text-input-error-wrapper"})}}qe.displayName="AuthError";const ze=e=>{const{label:t,htmlFor:i,unsafeLabelHTML:n}=e;return t?G.default.createElement("label",{htmlFor:i,className:"checkbox_label"},G.default.createElement("span",null,t)):n?G.default.createElement("label",{htmlFor:i,className:"checkbox_label"},G.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.purify.sanitize(n)}})):null},Qe=e=>{const{name:t,error:i,label:n,onChange:o,className:r,checked:_,id:l,errorId:d,uxaEventName:g,disabled:c,autoFocus:p}=e,m=i&&(i.message_text||i.message_html);return G.default.createElement("div",{className:"auth__checkbox-row"},G.default.createElement(E.FormRow,{variant:"control"},G.default.createElement(u.Checkbox,{className:r,name:t,id:l,onChange:o,checked:_,"aria-checked":_,"aria-invalid":m?"true":"false","aria-describedby":d,"data-uxa-log":g,disabled:c,autoFocus:p}),G.default.createElement(ze,{htmlFor:l,label:n})),G.default.createElement("div",{id:d,"aria-live":"polite","aria-atomic":"true"},m&&G.default.createElement(E.FormHelperText,{variant:"alert"},G.default.createElement(s.UIIcon,{src:h.FailLine,size:"small"}),(null==i?void 0:i.message_html)?G.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.purify.sanitize(i.message_html)}}):G.default.createElement("span",null,null==i?void 0:i.message_text))))},Ye=e=>{const{checked:t,className:i,disabled:n,error:o,inline:a,label:r,maestroStyle:l,name:d,onChange:c,unsafeLabelHTML:E,variant:u,uxaEventName:h}=e,p=g.useMemo((()=>_.generateId(d)),[d]),m=g.useMemo((()=>_.genErrorId(p)),[p]),S=o&&(o.message_text||o.message_html);if(u===ie.DIG20)return G.default.createElement(Qe,{...e,id:p,errorId:m});const R=s.cx("checkbox",u,i,{"checkbox-inline":a});let I=G.default.createElement("input",{type:"checkbox",id:p,name:d,checked:t,onChange:c,disabled:n,"aria-invalid":S?"true":"false","aria-describedby":m,"data-uxa-log":h});l&&(I=G.default.createElement("label",{className:"maestro_checkbox",htmlFor:p},I,G.default.createElement("span",null)));const O=G.default.createElement(qe,{error:o,errorId:m});return G.default.createElement("div",{className:R},!l&&O,I,G.default.createElement(ze,{htmlFor:p,label:r,unsafeLabelHTML:E}),l&&O)};var je;Ye.displayName="AuthCheckbox",t.TOSModalVariant=void 0,(je=t.TOSModalVariant||(t.TOSModalVariant={})).V1="v1",je.V2="v2";const Ke="one-tap-tos-modal-container",Xe=e=>{let t=document.getElementById(Ke);t||(t=document.createElement("div"),B.getGSIState().isMobile&&t.classList.add("one-tap-tos-mobile-model-container"),t.id=Ke,t.classList.add(Ke));const i=(!!e.containerParentSelector&&document.getElementById(e.containerParentSelector)||document.body).appendChild(t);C.default.render(G.default.createElement(Ze,{...e}),i,(()=>{const e=document.querySelector('.one-tap-tos__terms-checkbox-container input[type="checkbox"]');e&&e.focus()}))},$e=()=>{const e=document.getElementById(Ke);e&&(C.default.unmountComponentAtNode(e),e.remove())},Je=({modalVariant:e,animationVariant:t,onSubmit:i,onToggle:n,onDismiss:o,onPrivacyClick:s,onServicesAgreementClick:a,onTermsClick:r,onTosShown:_,showMarketingOptIn:l,implicitTOSVariant:d,googleCredentials:g,thirdPartyType:c})=>(t=t||e,G.default.createElement(m.CSSTransition,{in:!0,timeout:125,appear:!0,classNames:`one-tap-tos__modal-animation-${t}`,mountOnEnter:!0,unmountOnExit:!0},G.default.createElement(p.Modal.Content,{className:"one-tap-tos__modal"},G.default.createElement(et,{modalVariant:e,animationVariant:t,onSubmit:i,onToggle:n,onDismiss:o,onPrivacyClick:s,onServicesAgreementClick:a,onTermsClick:r,onTosShown:_,showMarketingOptIn:l,implicitTOSVariant:d,googleCredentials:g,thirdPartyType:c}))));Je.displayName="SusiThirdPartyTosModal";const Ze=s.requireCssWithComponent(Je,["/static/typescript/component_libraries/dwg-components/src/index.web-vflFu78ol.css","/static/metaserver/static/css/dig-components/index.web-vflcXSdaG.css"]),et=({onSubmit:e,onDismiss:t,onPrivacyClick:i,onServicesAgreementClick:n,onTermsClick:o,onTosShown:a,showMarketingOptIn:l,modalVariant:d,animationVariant:c,implicitTOSVariant:E,thirdPartyType:u})=>{const[h,p]=g.useState(!0),[m,R]=g.useState(!1),I=`${u}_${h?"signup_marketing_opt_out":"signup_marketing_opt_in"}`,{tosMessage:O,ctaMessage:T}=s.getTOSDataByVariant(E,o,n,i),f=G.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row one-tap-tos__tos","data-testid":"row"},G.default.createElement(s.DWGText,{fontFamily:"atlas-grotesk",fontSize:12,lineHeight:18},O));G.default.useEffect((()=>{a&&a()}),[a]);const L=_.getSUSIDigTheme(),N=_.getSUSIDigMode(),A=`third_party_tos_${u}`;return G.default.createElement("form",{className:s.cx(`one-tap-tos one-tap-tos-animation-${c}`,`one-tap-tos-modal-${d}`,`one-tap-tos-modal-animation-${c}`,L,N),"data-uxa-log":A,"data-uxa-interactions":"shown",onSubmit:async t=>{t.preventDefault(),R(!0);await e(l?h:void 0)||R(!1)}},G.default.createElement("div",{className:"one-tap-tos__title-container","data-testid":"row"},G.default.createElement("div",{className:"one-tap-tos__title-content"},G.default.createElement(s.DWGText,{fontFamily:"atlas-grotesk",lineHeight:20,fontSize:16,fontWeight:"medium"},tt),G.default.createElement(s.IconButton,{variant:"transparent",size:"small",onClick:()=>{t()},type:"button","aria-label":it,disabled:m},G.default.createElement(s.UIIcon,{src:S.CloseLine})))),l&&G.default.createElement("div",{className:"one-tap-tos__terms-container one-tap-tos__row one-tap-tos__marketing-opt-in","data-testid":"row","data-uxa-log":`${A}_marketing_opt_in_checkbox`,"data-uxa-interactions":"shown click"},G.default.createElement(Ye,{checked:h,className:"one-tap-tos__terms-checkbox-container",disabled:m,inline:!1,label:r.intl.formatMessage({id:"puZoGX",defaultMessage:"I’d like to receive direct marketing email updates from Dropbox"}),maestroStyle:!1,name:"marketing_opt_in",onChange:()=>{p(!h)},variant:ie.DIG20,uxaEventName:I})),f,G.default.createElement("div",{className:"one-tap-tos__signup-container one-tap-tos__row one-tap-tos__submit","data-testid":"row"},m?G.default.createElement("div",{className:"one-tap-tos__loading-indicator"},G.default.createElement(s.Spinner,{"aria-valuetext":"Signing up",size:"small"})):G.default.createElement(s.DWGBox,{theme:"coconut-200"},G.default.createElement(s.DWGPrimaryButton,{label:T,size:"small",width:"full",style:{justifyContent:"center"},disableArrow:!0,"data-uxa-log":`${A}_submit`,"data-uxa-interactions":"click"}))))};et.displayName="SusiThirdPartyTOS";const tt=r.intl.formatMessage({id:"9csKpE",defaultMessage:"Continue to Dropbox"}),it=r.intl.formatMessage({id:"56IzdQ",defaultMessage:"Close sign up prompt"}),nt=["scl-folder-page","shared-link-folder-page"],ot=["edison_login_page","edison_register_page"];class st{constructor(){if(this.tosPromptShown=!1,this.googleIframeObserver=null,this.bodyClass="google-one-tap-displayed",this.tosBodyClass="google-one-tap-tos-displayed",this.currentContext="signin",this.isPromptClosed=!1,this.hasPendingAuthFlow=!1,this.defaultAdditionalAuthParams={},this.autoSignInEnabled=!1,this.userFinishedSignup=!1,this.isFedCMOn=!1,this.init=(e,i,n)=>{(!this.config&&e||i)&&(this.config=e,this.defaultAdditionalAuthParams=this.config.additionalAuthParams,this.isFedCMOn=this.config.isFedCMEnabled,this.currentContext=e.context,this.autoSignInEnabled=this.autoSignInExperimentEnabled()&&!this.isFromLogout(),B.sendGSIEvent(t.GSIEvent.INITIALIZE_PLATFORM),e.context!==B.getGSIState().context&&this.updateStateContext(e.context),e.isInline&&(B.sendGSIEvent(t.GSIEvent.USE_INLINE_PROMPT),B.sendGSIEvent(t.GSIEvent.PROMPT_OPEN),document.body.addEventListener("focusin",this.handleFocusIn)),this.fingerprintJSRef=s.initFingerprintJS(),this.loadGSILibrary().then(this.initGSIClient),this.listenForContextChanges(),e.isMobile&&B.sendGSIEvent(t.GSIEvent.IS_MOBILE),this.autoSignInEnabled&&(window.onbeforeunload=e=>{B.getGSIState().tosPromptDisplayed&&!this.userFinishedSignup&&google.accounts.id.revoke(this.userId,(e=>{}))})),this.config.additionalAuthParams=this.defaultAdditionalAuthParams,e&&e.additionalAuthParams&&(this.config.additionalAuthParams={...this.config.additionalAuthParams,...e.additionalAuthParams}),n&&(this.onBeforeRedirect=n)},this.updateLoginContUrl=e=>{this.config&&(this.config.loginContUrl=e)},this.getCurrentSignInTag=()=>this.config.signinTag,this.getCurrentSignUpTag=()=>this.config.signupTag,this.updateSignInSignUpTags=(e,t)=>{this.config&&(this.config.signinTag=e,this.config.signupTag=t)},this.getLogger=()=>new fe(this.config.signinTag,this.config.signupTag),this.handleScriptLoadError=()=>{Le.logScriptLoadError()},this.handleScriptLoad=()=>{Le.logScriptLoadSuccess()},this.loadGSILibrary=()=>{if(this.config.isTest)return async function(){const e=new URLSearchParams(window.location.search),t=e.get("test_token")||"",i=e.get("hide_test_onetap_prompt")||"";let n;window.google={accounts:{id:{initialize:({callback:e})=>{n=()=>{e({credential:t,select_by:"test-select-by"})}},prompt:e=>{const t={isDisplayMoment:()=>!i,isNotDisplayed:()=>!!i,isDisplayed:()=>!1,isSkippedMoment:()=>!1,isDismissedMoment:()=>!1,getNotDisplayedReason:()=>"test-not-display-reason",getMomentType:()=>i?"skipped":"displayed"},o="onetap-test-modal";if(!document.getElementById(o)){const e=document.createElement("div");e.id=o,e.style.position="absolute",e.style.top="100px",e.style.right="150px",e.style.width="100px",e.style.height="70px",e.style.zIndex="1000";const t=document.createElement("button");t.textContent="Google OneTap test button",t.onclick=n,i||(e.append(t),document.body.append(e))}e(t)},renderButton:()=>{const e="onetap-test-sig-button";if(!document.getElementById(e)){const t=document.createElement("button");t.id=e,t.textContent="Sign in with Google test button",t.onclick=n;const i=document.getElementById(j)||document.getElementById(Y);i&&i.append(t)}}}}}}();const e=document.getElementsByTagName("head")[0],t=document.createElement("script");return t.type="text/javascript",t.async=!0,t.defer=!0,t.src="https://accounts.google.com/gsi/client",t.onerror=this.handleScriptLoadError,new Promise((i=>{t.onload=()=>{this.handleScriptLoad(),i()},e.insertBefore(t,e.firstChild)}))},this.initGSIClient=()=>{this.config.clientId&&"undefined"!=typeof google&&(this.applyPendingContext(),B.clearPendingContext(),this.initContainerListeners(),B.sendGSIEvent(t.GSIEvent.GSI_INIT_COMPLETE))},this.displaySigButton=()=>{B.getGSIState().googleAccountInitialized||this.initGoogleAccount();let e=null;const t=D.CONTINUE_WITH;"signin"===this.currentContext?e=document.getElementById(j):"signup"===this.currentContext&&(e=document.getElementById(Y));const i=w.get(this.config.pageName),n=this.buttonWidth?this.buttonWidth:(null==i?void 0:i.width)||350;if(e){if(this.refreshFormContainer&&!this.refreshSigWrapper){const t=document.createElement("div");t.classList.add("sig-wrapper--dwg-refresh"),e.appendChild(t),this.refreshSigWrapper=t}const s=console.warn;console.warn=function(e){!function(e){const t=e.match(/^\[GSI_LOGGER\]: (Failed to render button.*)$/);t&&t.length&&o.reportException({err:new Error(t[1]||t[0]),severity:o.SEVERITY.NONCRITICAL,tags:["google_one_tap"]})}(e),s(e)},google.accounts.id.renderButton(this.refreshSigWrapper?this.refreshSigWrapper:e,{text:t,width:n,logo_alignment:i?i.logo_alignment:"left",locale:this.config.locale,click_listener:this.handleSiGClick}),console.warn=s}},this.handleSiGClick=()=>{this.hasPendingAuthFlow&&this.getLogger().logLoginCancel(!1),this.hasPendingAuthFlow=!0,this.getLogger().logLoginStart(!1)},this.initContainerListeners=()=>{this.config.isInline&&!B.getGSIState().inlineContainerMounted||this.config.hidePromptOnInit||this.isPromptClosed||this.displayOneTapPrompt(),B.createGSIEventListener(t.GSIEvent.INLINE_CONTAINER_MOUNTED,this.displayOneTapPrompt),B.createGSIEventListener(t.GSIEvent.SHOW_PROMPT,this.displayOneTapPrompt),B.createGSIEventListener(t.GSIEvent.REMOVE_PROMPT,(()=>{google.accounts.id.cancel(),this.setPromptClosedState(!0,"Removed by code")})),B.getGSIState().buttonContainerMounted&&(this.initGoogleAccount(),this.initRefreshResizeObserver(),this.displaySigButton()),this.resizeThrottle&&this.resizeObserver||B.createGSIEventListener(t.GSIEvent.BUTTON_CONTAINER_MOUNTED,this.initRefreshResizeObserver),B.createGSIEventListener(t.GSIEvent.BUTTON_CONTAINER_MOUNTED,this.displaySigButton)},this.getRefreshFormContainerWidth=e=>Math.floor(e.getBoundingClientRect().width),this.handleRefreshResize=()=>{this.buttonWidth=this.getRefreshFormContainerWidth(this.refreshFormContainer),this.displaySigButton()},this.initRefreshResizeObserver=()=>{let e=document.querySelector(".login-register-container--dwg-refresh");e||(e=document.querySelector(".unified-susi-na")),e&&(this.refreshFormContainer=e,this.buttonWidth=this.getRefreshFormContainerWidth(this.refreshFormContainer),this.resizeThrottle&&this.resizeObserver&&(this.resizeThrottle.cancelPending(),this.resizeObserver.disconnect()),this.resizeThrottle=new n.RafThrottle((()=>{this.handleRefreshResize()})),this.resizeObserver=new ResizeObserver(this.resizeThrottle.request),this.resizeObserver.observe(this.refreshFormContainer),B.createGSIEventListener(t.GSIEvent.BUTTON_CONTAINER_UNMOUNTED,this.removeRefreshResizeObserver),B.createGSIEventListener(t.GSIEvent.BUTTON_CONTAINER_UNMOUNTED,this.removeRefreshSigWrapper))},this.removeRefreshResizeObserver=()=>{this.resizeObserver&&this.resizeObserver.disconnect()},this.removeRefreshSigWrapper=()=>{this.refreshSigWrapper&&(this.refreshSigWrapper.remove(),this.refreshSigWrapper=void 0)},this.displayOneTapPrompt=()=>{const e=this.getPromptParentId(),t=!!document.getElementById(e||"");this.config.isInline&&!t||(this.initGoogleAccount(),google.accounts.id.prompt((e=>{e.isDisplayMoment()&&this.handleDisplayMoment(e);const t=!this.isFedCMOn&&e.isNotDisplayed()||e.isSkippedMoment()||e.isDismissedMoment();let i="";e.isSkippedMoment()?(this.isFedCMOn?Le.logOneTapNotShown("It's a skipped moment"):(i=e.getSkippedReason(),Le.logOneTapNotShown(e.getSkippedReason())),De(v.LOGGED_IN_GOOGLE_USER,!0),this.isFedCMOn||e.getSkippedReason()!==P.USER_CANCEL||(this.getLogger().logOneTapDismissed(),Pe(v.DISMISS_GOOGLE_ONE_TAP))):!this.isFedCMOn&&e.isNotDisplayed()?(i=e.getNotDisplayedReason(),e.getNotDisplayedReason()!==P.OPT_OUT_OR_NO_SESSION&&De(v.LOGGED_IN_GOOGLE_USER,!0),Le.logOneTapNotShown(e.getNotDisplayedReason())):e.isDismissedMoment()&&(Le.logOneTapNotShown(e.getDismissedReason()),De(v.LOGGED_IN_GOOGLE_USER,!0),i=e.getDismissedReason());const n=e.getMomentType();if(i=i||["skipped","dismissed"].includes(n)?n:"",this.setPromptClosedState(t,i),B.getGSIState().isMobile&&!this.googleOneTapDisabledOverlay){this.googleOneTapDisabledOverlay=document.createElement("div"),this.googleOneTapDisabledOverlay.classList.add("google-one-tap-disabled-mobile-overlay");const e=this.getGoogleIframe();null==e||e.insertAdjacentElement("afterend",this.googleOneTapDisabledOverlay)}t?(De(v.GOOGLE_ONE_TAP_NOT_SHOWN,!1),this.setOneTapHeightCssVar("0px"),this.stopObservingGoogleContainer(),document.body.classList.remove(this.bodyClass),this.googleOneTapDisabledOverlay&&this.googleOneTapDisabledOverlay.remove()):(De(v.SHOW_GOOGLE_ONE_TAP,!0),De(v.LOGGED_IN_GOOGLE_USER,!0))})))},this.handleDisplayMoment=e=>{B.sendGSIEvent(t.GSIEvent.DISPLAY_MOMENT),e.isDisplayed()&&(this.setOneTapHeightCssVar(this.getOneTapIframeHeight()),this.observeGoogleIframe(),document.body.classList.add(this.bodyClass),this.config.pageName&&document.body.classList.add(this.config.pageName),this.config.isInline?i.safari?B.sendGSIEvent(t.GSIEvent.INLINE_PROMPT_UI_READY):this.pollAndClearIframeFocus():B.sendGSIEvent(t.GSIEvent.PROMPT_UI_HAS_DISPLAYED))},this.setPromptClosedState=(e,i)=>{this.isPromptClosed=e,e?B.sendGSIEvent(t.GSIEvent.PROMPT_CLOSE,{promptNotShownReason:i}):B.sendGSIEvent(t.GSIEvent.PROMPT_OPEN)},this.listenForContextChanges=()=>{this.clearContextChangesListener(),B.createGSIEventListener(t.GSIEvent.CONTEXT_CHANGE_SIGNUP,this.handleContextChange),B.createGSIEventListener(t.GSIEvent.CONTEXT_CHANGE_SIGNIN,this.handleContextChange)},this.clearContextChangesListener=()=>{B.removeGSIEventListener(t.GSIEvent.CONTEXT_CHANGE_SIGNUP,this.handleContextChange),B.removeGSIEventListener(t.GSIEvent.CONTEXT_CHANGE_SIGNIN,this.handleContextChange)},this.applyPendingContext=()=>{B.getPendingContext()&&this.setCurrentContext(B.getPendingContext())},this.handleContextChange=()=>{const e=B.getGSIState().context;e!==this.currentContext&&(this.cancelTOS(),this.setCurrentContext(e),this.refreshGSIClient())},this.isFromLogout=()=>"logout"===new URLSearchParams(window.location.search).get("src"),this.autoSignInExperimentEnabled=()=>{var e;return"V1"===(null===(e=this.config)||void 0===e?void 0:e.autoSignInVariant)},this.refreshGSIClient=()=>{var e;B.getGSIState().googleAccountInitialized&&(B.sendGSIEvent(t.GSIEvent.RESET_DISPLAY_MOMENT),B.sendGSIEvent(t.GSIEvent.INLINE_PROMPT_UI_NOT_READY),(null===(e=this.config)||void 0===e?void 0:e.isInline)&&"undefined"!=typeof google&&google.accounts.id.cancel(),this.initGSIClient())},this.googleSignInCallback=async({select_by:e,credential:i})=>{Le.logAuthType(e);const n=b.includes(e);n||(this.getLogger().logLoginStart(!0),Pe(v.GOOGLE_ONE_TAP_CONTINUE),De("auto"===e?v.GOOGLE_ONE_TAP_VERIFICATION_AUTO_SUCCESS:v.GOOGLE_ONE_TAP_VERIFICATION_SUCCESS,!0)),B.sendGSIEvent(n?t.GSIEvent.USE_BUTTON_FLOW:t.GSIEvent.USE_ONE_TAP_FLOW),!s.isTest()&&this.fingerprintJSRef.current&&await this.fingerprintJSRef.current.getWrappedComponent().invokeFPJSIframeAndLog("",void 0,2e3),this.isButtonFlow=n,this.googleCredentials=i,this.selectBy=e,this.config.signupEndpoint===t.SignupEndpoints.TEAM_REGISTER?(({signupKey:e,fromSource:i,continuationUrl:n,thirdPartyAuthJWT:o})=>{if(o&&null==Ue(o))return void a.Notify.error(r.intl.formatMessage({id:"yriEWs",defaultMessage:"An error occurred when processing your Google Account. Please try again or try another signup method."}));const _={signup_key:e,from_source:i,cont:n,tos_agree:!0,third_party_auth_token:o};f.WebRequest({url:t.SignupEndpoints.TEAM_REGISTER,type:"POST",data:_,success:(e,t,i)=>{const o=JSON.parse(e);if("OK"===o.status){const e=o.url||n||"/";s.unsafeRedirect(e)}else"Two Factor Auth Enabled"===o.message?a.Notify.error(r.intl.formatMessage({id:"iBIZIv",defaultMessage:"Your team requires Two Factor Authentication. Please Fill out the form to proceed."})):"Invalid Email"===o.message?a.Notify.error(r.intl.formatMessage({id:"+7HsA2",defaultMessage:"Please use the email provided in the Sign Up link."})):a.Notify.error(r.intl.formatMessage({id:"XPZ3+m",defaultMessage:"Error completing the request, please try again."}))},error:(e,t,i)=>{var n;const o=JSON.parse(i);(null===(n=o.password)||void 0===n?void 0:n.message_text)?a.Notify.error(o.password.message_text):a.Notify.error(r.intl.formatMessage({id:"XPZ3+m",defaultMessage:"Error completing the request, please try again."}))}})})({signupKey:this.config.additionalAuthParams.signupKey,fromSource:this.config.additionalAuthParams.fromSource,continuationUrl:this.config.registerContUrl,thirdPartyAuthJWT:i}):this.signIn(n)},this.getVisitorData=e=>{if(!this.fingerprintJSRef.current)return;return s.get_visitor_id(this.fingerprintJSRef.current)[e]},this.signIn=e=>{var i;const n=document.referrer;Me({googleCredentials:this.googleCredentials,select_by:this.selectBy,tos_signed:!1,visitorId:this.getVisitorData("visitor-id"),fpRequestId:this.getVisitorData("fp-request-id"),pageName:this.config.pageName,additionalAuthParams:this.config.additionalAuthParams,webSigninTag:this.config.signinTag,webSignupTag:this.config.signupTag,cont_url:(null===(i=this.config)||void 0===i?void 0:i.loginContUrl)||"/",signupReferrer:n,fpSealedResult:this.getVisitorData("fp_sealed_result")}).then((async i=>{var n,o,_;const l=(null===(n=this.config)||void 0===n?void 0:n.loginContUrl)||"/",d=i[".tag"];switch("tos_required"!==d&&(this.isButtonFlow?Re.logLoginAttempt(ge.GOOGLE,"normal"):Re.logLoginAttempt(ge.GOOGLE_ONE_TAP,"auto"===this.selectBy?"auto":"normal")),this.hasPendingAuthFlow=!1,this.getLogger().logLoginResponse(!this.isButtonFlow,d,"google_login_not_allowed"===d&&!!i.redirect_url,"success"===d?i.user_id:void 0),this.onBeforeRedirect&&await this.onBeforeRedirect(e),d){case"success":if(this.logOneTapLoginResponse(!0,null,this.selectBy),e||De("auto"===this.selectBy?v.GOOGLE_ONE_TAP_ACCOUNT_AUTO_LOGIN_SUCCESS:v.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS,!0),this.config.disableRedirect){this.onGoogleLoginSuccess(i);break}if(this.shouldCallOnLoginSuccess()&&this.onGoogleLoginSuccess(i),this.supportsPostLoginScreen()){this.onGoogleLoginSuccess(i);break}a.Notify.success(r.intl.formatMessage({id:"/qL3on",defaultMessage:"Log in successful! Your browser will be redirected in a few seconds."})),s.redirect(l);break;case"requires_twofactor":{this.logOneTapLoginResponse(!1,"tfa_required",this.selectBy),e||De("auto"===this.selectBy?v.GOOGLE_ONE_TAP_ACCOUNT_AUTO_LOGIN_SUCCESS:v.GOOGLE_ONE_TAP_ACCOUNT_LOGIN_SUCCESS,!0);const t=new R.URI({path:"/verify_code"}).updateQuery({remember_me:i.remember_me.toString(),pair_user:i.pair_user.toString(),cont:l,web_signin_tag:ke(this.config.signinTag,this.selectBy)});s.redirect(t.toString());break}case"tos_required":B.sendGSIEvent(t.GSIEvent.TOS_PROMPT_OPEN),this.showTOSPrompt(e);break;case"enable_twofactor_required":{this.logOneTapLoginResponse(!1,d,this.selectBy);const e=new R.URI({path:"/twofactor"}).updateQuery({remember_me:i.remember_me.toString(),pair_user:i.pair_user.toString(),cont:l,web_signin_tag:ke(this.config.signinTag,this.selectBy)});s.redirect(e.toString());break}case"google_login_not_allowed":this.logOneTapLoginResponse(!1,d,this.selectBy),i.redirect_url?s.unsafeRedirect(i.redirect_url):(a.Notify.error(r.intl.formatMessage({id:"oW2LTj",defaultMessage:"Google Sign In is not allowed with this email."})),this.ssoChecker.checkSsoState((null===(o=i.profile)||void 0===o?void 0:o.email)||"",this.onSsoStateUpdate));break;case"sso_required":this.logOneTapLoginResponse(!1,d,this.selectBy),i.redirect_url?s.unsafeRedirect(i.redirect_url):window.location.href.includes("/login")&&B.sendGSIEvent(t.GSIEvent.SSO_REQUIRED,{email:null===(_=i.profile)||void 0===_?void 0:_.email});break;case"requires_password":{this.logOneTapLoginResponse(!1,d,this.selectBy);const e=new R.URI({path:"/show_password_form"}).updateQuery({remember_me:i.remember_me.toString(),pair_user:i.pair_user.toString(),cont:l});s.redirect(e.toString());break}default:this.logOneTapLoginResponse(!1,d,this.selectBy),a.Notify.error(r.intl.formatMessage({id:"9n1q0s",defaultMessage:"There was a problem completing this request. Please Try Again."}))}})).catch((e=>{var t,i;this.getLogger().logLoginResponse(!this.isButtonFlow,e.error[".tag"]||(null===(t=e.error.reason)||void 0===t?void 0:t[".tag"])),this.logOneTapLoginResponse(!1,e.error[".tag"]||(null===(i=e.error.reason)||void 0===i?void 0:i[".tag"]),this.selectBy),this.hasPendingAuthFlow=!1,Fe(e)}))},this.logOneTapLoginResponse=(e,t,i)=>{this.isButtonFlow?Re.logThirdPartyLoginResponse(ge.GOOGLE,"normal",e,t):Re.logThirdPartyLoginResponse(ge.GOOGLE_ONE_TAP,"auto"===i?"auto":"normal",e,t)},this.onSsoStateUpdate=(e,i)=>{i.user_sso_state!==_.SsoState.REQUIRED&&i.user_sso_state!==_.SsoState.OPTIONAL||B.sendGSIEvent(t.GSIEvent.SSO_REQUIRED,{email:e})},this.shouldCallOnLoginSuccess=()=>nt.includes(this.config.pageName),this.supportsPostLoginScreen=()=>ot.includes(this.config.signinTag),this.shouldCallOnRegisterSuccess=()=>nt.includes(this.config.pageName),this.onGoogleLoginSuccess=e=>{var i,n;const o=(null===(i=e.profile)||void 0===i?void 0:i.name)||"",s=e.user_id,a=(null===(n=e.profile)||void 0===n?void 0:n.email)||"",r=e.root_ns_id;B.sendGSIEvent(t.GSIEvent.LOGIN_SUCCESS,{name:o,id:s,email:a,root_ns_id:r})},this.onGoogleRegisterSuccess=e=>{var i,n;const o=(null===(i=e.profile)||void 0===i?void 0:i.name)||"",s=e.user_id,a=(null===(n=e.profile)||void 0===n?void 0:n.email)||"";B.sendGSIEvent(t.GSIEvent.REGISTER_SUCCESS,{name:o,id:s,email:a})},this.signUp=e=>{const i=document.referrer;return Me({googleCredentials:this.googleCredentials,select_by:this.selectBy,tos_signed:!0,marketingOptedIn:e,referralCode:this.config.referralCode,referralSource:this.config.referralSource,emailHash:this.config.emailHash,webSignupTag:this.config.signupTag,additionalAuthParams:{...this.config.additionalAuthParams||{},tos_variant:s.getTOSVariant(s.TOSType.GOOGLE_ONE_TAP,this.config.implicitTOSVariant),is_edison:d.isServedByEdisonWebServer().toString()},cont_url:this.config.additionalAuthParams.postUpsellRedirectUrl,visitorId:this.getVisitorData("visitor-id"),fpRequestId:this.getVisitorData("fp-request-id"),signupReferrer:i,fpSealedResult:this.getVisitorData("fp_sealed_result")}).then((e=>{if("success"===e[".tag"]){if(this.userFinishedSignup=!0,this.isButtonFlow?Re.logSignupResponse(ge.GOOGLE,!0,null,{dwgRefreshVariant:this.config.dwgRefreshVariant}):(Re.logSignupResponse(ge.GOOGLE_ONE_TAP,!0,null,{dwgRefreshVariant:this.config.dwgRefreshVariant}),De(v.GOOGLE_ONE_TAP_ACCOUNT_CREATION_SUCCESS,!0)),this.getLogger().logSignupResponse(e[".tag"],!this.isButtonFlow,{},e.user_id),!("localStorageSessionId"in this.config.additionalAuthParams)&&!("localStorageStoreId"in this.config.additionalAuthParams))return this.signUpSuccessHelper(e);{const i=this.config.additionalAuthParams.localStorageSessionId,n=this.config.additionalAuthParams.localStorageStoreId,o="localStorageFilename"in this.config.additionalAuthParams?this.config.additionalAuthParams.localStorageFilename:void 0,s="localStorageAutoRename"in this.config.additionalAuthParams?Boolean(this.config.additionalAuthParams.localStorageAutoRename):void 0,a=()=>{B.sendGSIEvent(t.GSIEvent.LOGIN_SUCCESS,{})};(async()=>{var t;await xe({sessionId:i,store:n,filename:o,autoRename:s,onErrorCallback:a},{id:e.user_id,email:null===(t=e.profile)||void 0===t?void 0:t.email,root_ns_id:e.root_ns_id,home_ns_id:e.home_ns_id}),this.signUpSuccessHelper(e)})()}return!0}return this.getLogger().logSignupResponse(e[".tag"],!this.isButtonFlow),a.Notify.error(r.intl.formatMessage({id:"kQwNuJ",defaultMessage:"There was a problem completing this request. Please try again."})),!1})).catch((e=>{var t;return this.getLogger().logSignupResponse(e.error[".tag"]||(null===(t=e.error.reason)||void 0===t?void 0:t[".tag"]),!this.isButtonFlow),this.isButtonFlow?Re.logSignupResponse(ge.GOOGLE,!1,e.error[".tag"],{dwgRefreshVariant:this.config.dwgRefreshVariant}):Re.logSignupResponse(ge.GOOGLE_ONE_TAP,!1,e.error[".tag"],{dwgRefreshVariant:this.config.dwgRefreshVariant}),Fe(e),!1}))},this.signUpSuccessHelper=e=>{var t;if(this.config.disableRedirect)return this.cancelTOS(),this.onGoogleRegisterSuccess(e),!0;this.shouldCallOnRegisterSuccess()&&this.onGoogleRegisterSuccess(e);const i=e.force_redirect_url?e.redirect_url:(null===(t=this.config)||void 0===t?void 0:t.registerContUrl)||e.redirect_url||"/trial_first";return s.redirect(i),!0},this.showTOSPrompt=e=>{if(!this.tosPromptShown){const i=e&&!this.config.isMobile,n=this.config.isInline||i?t.TOSModalVariant.V2:t.TOSModalVariant.V1;let o;n===t.TOSModalVariant.V2&&"signin"===this.currentContext&&(o=t.TOSModalVariant.V1),this.userId=function(e){const t=Ue(e);return null!=t?t.userId:""}(this.googleCredentials),Xe({modalVariant:n,animationVariant:o,onToggle:this.handleToggleTOS,onDismiss:this.handleDismissTOS,onSubmit:this.handleTOSSubmit,onTermsClick:this.getLogger().logSignupTermsClick||(()=>{}),onServicesAgreementClick:this.getLogger().logSignupServicesAgreementClick||(()=>{}),onPrivacyClick:this.getLogger().logSignupPrivacyClick||(()=>{}),onTosShown:()=>this.getLogger().logSignupInlineTermsOfServiceView("google_one_tap"),containerParentSelector:n===t.TOSModalVariant.V2?`${"signup"===this.currentContext?K:X}`:void 0,showMarketingOptIn:this.config.showMarketingOptIn,implicitTOSVariant:s.getTOSVariant(s.TOSType.GOOGLE_ONE_TAP,this.config.implicitTOSVariant),googleCredentials:this.googleCredentials,thirdPartyType:"google_one_tap"}),this.tosPromptShown=!0,document.body.classList.add(this.tosBodyClass)}},this.cancelTOS=()=>{B.sendGSIEvent(t.GSIEvent.TOS_PROMPT_CLOSE),this.tosPromptShown&&($e(),this.tosPromptShown=!1)},this.handleDismissTOS=()=>{Pe(v.GOOGLE_ONE_TAP_SIGNUP_DISMISS_TOS),this.cancelTOS(),document.body.classList.remove(this.tosBodyClass),this.autoSignInExperimentEnabled()?google.accounts.id.revoke(this.userId,(e=>{this.autoSignInEnabled=!1,this.refreshGSIClient()})):this.refreshGSIClient()},this.handleToggleTOS=e=>{},this.handleTOSSubmit=e=>(this.getLogger().logSignupStart(!this.isButtonFlow),this.isButtonFlow?Re.logSignupAttempt(ge.GOOGLE):Re.logSignupAttempt(ge.GOOGLE_ONE_TAP),this.signUp(e)),this.observeGoogleIframe=()=>{const e=this.getGoogleIframe();!this.googleIframeObserver&&e&&(this.googleIframeObserver=new MutationObserver(this.googleIframeObserverCallback),this.googleIframeObserver.observe(e,{attributes:!0}))},this.stopObservingGoogleContainer=()=>{var e;null===(e=this.googleIframeObserver)||void 0===e||e.disconnect(),this.googleIframeObserver=null},this.googleIframeObserverCallback=e=>{e.length&&"style"===e[0].attributeName&&this.setOneTapHeightCssVar(this.getOneTapIframeHeight())},this.setOneTapHeightCssVar=e=>{this.styleTag||(this.styleTag=document.createElement("style"),document.head.appendChild(this.styleTag)),this.styleTag.innerText=`:root {\n      --google-one-tap-container-height: ${e};\n      --google-one-tap-mobile-container-height: ${this.config.isMobile?e:"0px"};\n    }`},this.getGoogleIframe=()=>document.getElementById("credential_picker_iframe")||document.querySelector("#credential_picker_container iframe"),this.getOneTapIframeHeight=()=>{const e=this.getGoogleIframe();return(null==e?void 0:e.style.height)||"0px"},this.pollAndClearIframeFocus=()=>{const e=setInterval((()=>{var i,n;document.activeElement&&document.activeElement===this.getGoogleIframe()&&(null===(i=document.activeElement)||void 0===i||i.blur(),null===(n=this.activeElement)||void 0===n||n.focus(),B.sendGSIEvent(t.GSIEvent.INLINE_PROMPT_UI_READY),clearInterval(e))}),5);setTimeout((()=>{B.sendGSIEvent(t.GSIEvent.INLINE_PROMPT_UI_READY),clearInterval(e)}),3e3)},this.handleFocusIn=()=>{document.activeElement!==this.getGoogleIframe()&&(this.activeElement=document.activeElement)},this.getPromptParentId=()=>{var e;return(null===(e=this.config)||void 0===e?void 0:e.isInline)?this.getInlineContainerId():void 0},this.getInlineContainerId=()=>this.config&&"signup"===this.currentContext?z:Q,this.setCurrentContext=e=>{this.currentContext=e},this.updateStateContext=e=>{const i="signup"===e?t.GSIEvent.CONTEXT_CHANGE_SIGNUP:t.GSIEvent.CONTEXT_CHANGE_SIGNIN;B.sendGSIEvent(i)},st.instance)return st.instance;st.instance=this,this.ssoChecker=new Ve}initGoogleAccount(){const e={client_id:this.config.clientId,callback:this.googleSignInCallback,cancel_on_tap_outside:!1,context:this.currentContext,prompt_parent_id:this.isFedCMOn?"":this.getPromptParentId(),itp_support:!0,auto_select:this.autoSignInEnabled,use_fedcm_for_prompt:this.isFedCMOn};google.accounts.id.initialize(e),this.isFromLogout()&&google.accounts.id.disableAutoSelect(),B.getGSIState().googleAccountInitialized||B.sendGSIEvent(t.GSIEvent.INITIALIZE_GOOGLE_ACCOUNT)}}const at=new st;function rt(e){e&&!B.getGSIState().isInline&&B.sendGSIEvent(t.GSIEvent.USE_INLINE_PROMPT);const[i,n]=g.useState(B.getGSIState()),o=[t.GSIEvent.INITIALIZE_PLATFORM,t.GSIEvent.PROMPT_OPEN,t.GSIEvent.PROMPT_CLOSE,t.GSIEvent.DISPLAY_MOMENT,t.GSIEvent.RESET_DISPLAY_MOMENT,t.GSIEvent.INLINE_PROMPT_UI_READY,t.GSIEvent.INLINE_PROMPT_UI_NOT_READY],s=[t.GSIEvent.TOS_PROMPT_OPEN,t.GSIEvent.TOS_PROMPT_CLOSE,t.GSIEvent.IS_MOBILE,...e?o:[]],a=()=>{n(B.getGSIState())};return g.useEffect((()=>(B.removeGSIEventListener(s,a),B.createGSIEventListener(s,a),()=>{B.removeGSIEventListener(s,a)})),[]),i}var _t=Object.freeze({__proto__:null,GoogleOneTapPlatform:at,GoogleOneTapPlatformSingleton:st,UseGsiState:rt});t.AuthEventLogger=be,t.AuthMethodDoubleLoggerBase=Te,t.AuthUXAnalyticsLogger=Ie,t.DEFAULT_ONE_TAP_CONTAINER_CLASS="google-one-tap-inline-container",t.DEFAULT_ONE_TAP_INLINE_SPINNER_CLASS="google-one-tap-inline-spinner",t.DEFAULT_ONE_TAP_INLINE_TOS_ID_LOGIN=X,t.DEFAULT_ONE_TAP_INLINE_TOS_ID_REGISTER=K,t.DEFAULT_SIGNIN_BUTTON_CONTAINER_ID=j,t.DEFAULT_SIGNIN_CONTAINER_ID=Q,t.DEFAULT_SIGNUP_BUTTON_CONTAINER_ID=Y,t.DEFAULT_SIGNUP_CONTAINER_ID=z,t.DoubleLoggerBase=Oe,t.GOOGLE_ONE_TAP_COLLAPSE_FORM="google-one-tap-form--collapse",t.GOOGLE_ONE_TAP_DISABLED_FORM="google-one-tap-form--disabled",t.GSIEventManager=B,t.GetAccountRoutes=oe,t.GoogleDoubleLogger=fe,t.GoogleOneTapClientIdDev="165392285814-9b1gvvi0368l5p5v3j86qfsfcks0pdnn.apps.googleusercontent.com",t.GoogleOneTapClientIdProd="801668726815.apps.googleusercontent.com",t.GoogleOneTapPlatform=at,t.PAP_Login_Account=se,t.PAP_Select_AuthAction=ae,t.PAP_SignUp_Account=re,t.PAP_View_AuthDialog=_e,t.SERVER_ERROR_TO_UDCL_RESULT=Se,t.SsoStateChecker=Ve,t.UseGsiState=rt,t.clickEvent=Pe,t.displayTOS=Xe,t.google_one_tap_platform_esnext=_t,t.logExplicitExposure=async function(t,i){try{const{logExplicitExposure:n}=await new Promise((function(t,i){e(["./e_warp_warp_page_edison"],t,i)})).then((function(e){return e.explicit_exposure_logging_esnext}));n({stormcrowVariantInfo:{feature:t,variant:i}})}catch(e){const i=e instanceof Error?e.toString():String(e);Ce(`${t}_explicit_log_error`,{error:i},1),o.reportException({err:i,severity:o.SEVERITY.NONCRITICAL,tags:["susi","sc_gating_client"]})}},t.retrieveAndSaveFile=xe,t.setGoogleOneTapDisabledBodyClass=e=>{document.body.classList.toggle("google-one-tap-button-prompt--disabled",e)},t.showOneTapInlineGoogleButton=function(e){const t=(null==e?void 0:e.isButtonFlow)&&!(null==e?void 0:e.isMobile),i=((null==e?void 0:e.tosPromptDisplayed)||(null==e?void 0:e.promptNotShownReason)===U.inFlow)&&((null==e?void 0:e.isInline)||t);return!((null==e?void 0:e.isInline)&&(!(null==e?void 0:e.isPromptClosed)||(null==e?void 0:e.tosPromptDisplayed))||i)},t.unmountTOS=$e}));
//# sourceMappingURL=c_google_one_tap_google_one_tap_platform.js-vflkbYB8V.map

//# debugId=6e9c9d34-8962-32f2-846e-d40d29578c7e