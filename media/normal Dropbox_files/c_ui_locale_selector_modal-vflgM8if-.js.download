!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="190287f0-9d57-359a-ad25-f875f3c793a8")}catch(e){}}();
define(["exports","react","./e_warp_warp_page_edison","./c_ui_modal_dig","./c_components_ui_modal_controller","./c_core_i18n","./c_chat_chat_constants","./c_core_notify","./c_deprecated_ajax_ajax_jquery","./c_src_sink_index","./c_init_data_debug_panel","./c_lodash-es_lodash","./e_core_exception","./c_bem","./e_data_modules_stormcrow","./c_init_data_edison","./c_www_auth_csrf","./e_edison","./c_ttvc_util_index","./c_api_v2_unauthed_client","react-dom","./c_redux_namespaces","./c_dig-components_modal_index","./c_react-modal_index","./c_prop-types_index","metaserver/static/js/langpack"],(function(e,t,a,l,o,s,n,c,r,i,d,u,_,m,h,p,f,v,g,C,L,x,w,y,M,S){"use strict";function E(e){return e&&e.__esModule?e:{default:e}}var N=E(t);function j(e,t){const l=a.get_pathname();if("/"!==l[0])return l;const o=l.split("/"),s=o[1];return t.some((t=>t.localeCode===e))&&t.some((e=>e.localeCode===s))?(o[1]=e,o.join("/")):l}const A=(e,t,l=!1)=>{const o=l?function(e){var t,l,o;const s=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"/team/admin/set_locale",n=null!==(l=null==e?void 0:e.routeParams)&&void 0!==l?l:{},c=null!==(o=null==e?void 0:e.base)&&void 0!==o?o:window.location.origin;return new a.AjaxURL(a.replacePattern(s,n),c)}():function(e){var t,l,o;const s=null!==(t=null==e?void 0:e.path)&&void 0!==t?t:"/set_locale",n=null!==(l=null==e?void 0:e.routeParams)&&void 0!==l?l:{},c=null!==(o=null==e?void 0:e.base)&&void 0!==o?o:window.location.origin;return new a.AjaxURL(a.replacePattern(s,n),c)}();return c.Notify.success(s.intl.formatMessage({id:"wQFLxr",defaultMessage:"Changing language..."})),r.SilentBackgroundRequest({url:o,data:{locale:e,locale_cont:t},success:()=>a.redirect(t),...l&&{subject_user:n.mustGetActiveUserId()}})},I=({locale:e})=>{const{decorator:t,localeCode:a}=e;let{localeName:l}=e;return""!==t&&(l+=` [${t}]`),N.default.createElement("span",{"data-locale":a},l)};I.displayName="LocaleTag",I.displayName="LocaleTag";class W extends N.default.Component{constructor(){super(...arguments),this.handleCloseModal=()=>history.pushState("",document.title,a.get_href_no_hash()),this.handleLocaleSelected=e=>t=>(t.preventDefault(),history.pushState("",document.title,a.get_href_no_hash()),o.unmountModal(),A(e,a.get_href_no_hash(),this.props.isTeamAdminSettingsConsole)),this.renderLocale=(e,t)=>{var l;return N.default.createElement("li",{key:e.localeCode},N.default.createElement(a.Button,{className:"locale-option",onClick:t?void 0:this.handleLocaleSelected(e.localeCode),variant:"transparent",hasNoUnderline:!0,"data-uxa-log":`locale_tag_${e.localeCode}_${this.props.source}`,href:t?j(e.localeCode,(null===(l=this.props.localesConsts)||void 0===l?void 0:l.localesWithoutInternal)||[]):void 0},N.default.createElement(I,{locale:e})))},this.renderLocaleList=()=>{var e,t,l;const{shouldAllowInternalLocales:o}=this.props,s=function(e){const t=a.get_pathname();if("/"!==t[0])return!1;const l=t.split("/",2)[1];for(const t of e)if(t.localeCode===l)return!0;return!1}((null===(e=this.props.localesConsts)||void 0===e?void 0:e.localesWithoutInternal)||[]),n=o?(null===(t=this.props.localesConsts)||void 0===t?void 0:t.localesWithInternal)||[]:(null===(l=this.props.localesConsts)||void 0===l?void 0:l.localesWithoutInternal)||[];return N.default.createElement("div",{className:"react-locale-selector-modal"},N.default.createElement("ul",{className:"react-locale-selector-modal__list u-unlist u-trim-padding"},n.map((e=>this.renderLocale(e,s)))))}}render(){return N.default.createElement(l.ModalWithCSS,{id:"locale-selector-modal",ref:"modal",className:"uxa-modal",onDismissCompleted:this.handleCloseModal,title:s.intl.formatMessage({id:"tVLdyJ",defaultMessage:"Choose a language:"}),acceptButtonText:null,style:"default",width:650},this.renderLocaleList())}}W.displayName="LocaleSelectorModal";const T=e=>{const{data:t,isLoading:l,error:o}=a.useLocaleJS();return l||o?null:N.default.createElement(W,{...e,localesConsts:t})},b=a.requireCssWithComponent((e=>N.default.createElement(a.QueryClientProviderWrapper,{isSilent:!0},N.default.createElement(T,{...e}))),["/static/metaserver/static/css/components/react_locale_selector-vfl7XiDZq.css","/static/metaserver/static/css/dig-fonts/index.metaserver-vflTQCDDt.css","/static/metaserver/static/css/modal-vfl2ug2Ll.css"]);e.LocaleSelectorModal=b,e.LocaleTag=I,e.showModal=(e,t=!1,a=!0)=>o.mountModal(N.default.createElement(b,{source:e,isTeamAdminSettingsConsole:t,shouldAllowInternalLocales:a}))}));
//# sourceMappingURL=c_ui_locale_selector_modal.js-vflJqw6SI.map

//# debugId=190287f0-9d57-359a-ad25-f875f3c793a8