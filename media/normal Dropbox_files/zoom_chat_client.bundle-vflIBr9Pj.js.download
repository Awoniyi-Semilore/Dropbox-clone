!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="595d80c0-3a60-3a74-b925-2e811d328a35")}catch(e){}}();
(() => {const define = dbxPithosConfig._define, require = dbxPithosConfig._require; define((()=>(()=>{"use strict";var e={412:(e,t,i)=>{i.d(t,{q:()=>r});let n=!0,o=null;const a="undefined"==typeof jest?"initial data wasn't initialized yet, you need to call js/init_data/init_raw:initRaw function first":"initial data wasn't initialized yet, you need to call js/init_data/init_test.test_util:initTest function first";function r(e,t=!0){t?globalThis.__init_data_raw__=e:(o=e,n=!1)}function s(){if(n){if("string"!=typeof globalThis.__init_data_raw__)throw new Error(a);return globalThis.__init_data_raw__}if("string"!=typeof o)throw new Error(a);return o}}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{var e=i(412);function t(t,i=!0){(0,e.q)(t,i)}t(window.dbxPithosConfig.base64InitData,!1)})(),(()=>{var e,t,o,a,r,s,d,l,c,u,h,f;i.r(n),function(e){e.Critical="critical",e.NonCritical="non-critical",e.Operational="operational",e.UserError="user-error",e.Uncaught="uncaught"}(e||(e={})),function(e){e.ChatIsNotRequested="CHAT_IS_NOT_REQUESTED",e.ChatIsRequested="CHAT_IS_REQUESTED"}(t||(t={})),function(e){e.DoNotTerminateChatSession="DO_NOT_TERMINATE_CHAT_SESSION"}(o||(o={})),function(e){e[e.defaultHours=1]="defaultHours",e[e.customHours=2]="customHours"}(a||(a={})),function(e){e.Hiddden="HIDDEN",e.Visible="VISIBLE"}(r||(r={})),function(e){e.ChatBubble="CHAT_BUBBLE",e.ChatWindow="CHAT_WINDOW"}(s||(s={})),function(e){e.UserSwtichCompany="USER_SWTICHED_COMPANY",e.UserNotSwtichCompany="USER_NOT_SWTICHED_COMPANY"}(d||(d={})),function(e){e.WWW_DBX_HOST="TRUSTED_DBX_HOST",e.DOCSEND_HOST="TRUSTED_DOCSEND_HOST",e.HELP_CENTER_HOST="TRUSTED_HELP_CENTER",e.EXPERIENCE_HOST="TRUSTED_EXPERIENCE_HOST",e.SIGN_CENTER_HOST="TRUSTED_SIGN_CENTER",e.DASH_DBX_HOST="TRUSTED_DASH_HOST",e.FORMSWIFT_HOST="TRUSTED_FORMSWIFT_HOST",e.HELLOSIGN_HOST="TRUSTED_HELLOSIGN_HOST",e.UNSUPPORTED_HOST="UNSUPPORTED_HOST"}(l||(l={})),function(e){e.DOCSEND_CHAT="DOCSEND_CHAT",e.DASH_SALES_CHAT="DASH_SALES_CHAT",e.DASH_CX_CHAT="DASH_CX_CHAT",e.DBX_SALES_CHAT="DBX_SALES_CHAT",e.DBX_CX_CHAT="DBX_CX_CHAT",e.FORMSWIFT_CHAT="FORMSWIFT_CHAT",e.HELLOSIGN_CX_CHAT="HELLOSIGN_CX_CHAT",e.HELLOSIGN_CX_CHATBOT="HELLOSIGN_CX_CHATBOT",e.UNSUPPORTED_CHAT="UNSUPPORTED_CHAT"}(c||(c={})),function(e){e.DOCSEND_ENTITLEMENTS="docsendEntitlements",e.WWW_DBX_ENTITLEMENTS="wwwDbxEntitlements",e.HELP_CENTER_ENTITLEMENTS="helpCenterEntitlements",e.EXPERIENCE_ENTITLEMENTS="experienceEntitlements",e.SIGN_CENTER_ENTITLEMENTS="signCenterEntitlements",e.DASH_DBX_ENTITLEMENTS="dashDbxEntitlements",e.FORMSWIFT_DBX_ENTITLEMENTS="formswiftEntitlements",e.UNSUPPORTED_ENTITLEMENTS="unsupportedEntitlements",e.HELLOSIGN_ENTITLEMENTS="hellosignEntitlements"}(u||(u={})),function(e){e.PROACTIVE_CHAT="proactive_chat",e.REACTIVE_CHAT="reactive_chat",e.UNSUPPORTED_CHAT="unsupported_chat"}(h||(h={})),function(e){e.INITIALIZED="zoomChatInitiated",e.SUCCESS="zoomChatInitiationSuccess",e.FAILED="zoomChatInitiationFailed",e.NETWORK_FAILED="zoomChatNetworkFailed",e.TIMEOUT_FAILED="zoomChatTimeOutFailed",e.EXPAND="zoomChatMaximized",e.MINIMIZE="zoomChatMinimized",e.END="zoomChatEnded",e.CHATREQUESTED="zoomChatRequested",e.DISPLAYED="zoomChatInitialDisplay",e.LOGOUT="zoomChatLogoutByUser",e.CONSENTDECLINED="zoomChatConsentDeclined",e.SALESCHAT_DISALLOWED_COUNTRY="zoomSalesChatDisallowedCountry"}(f||(f={}));const C=60,E=10,S=1e3,_=3e3,g="unified_chat_init",m="unified_dash_chat_init",T="dbx_sales_chat_login_init",I="db-snapengage-visible",p="__Secure-dbx_consent",O="performance and functionality",N="dbx_unified_chat_iframe",A="dbx-unified-chat-container",R=1,D="dbx_unified_chat_state",b="zoom_chat_requested_start_time",w="zoom_chat_initial_display_time",L="zoom_chat_session_end_time",y="dbx_unified_chat_session_logout",H="dbx_unified_chat_on_checkout",v="dbx_unified_chat_end_to_chat_state",U="dbxSalesChatCookieInit",P="dbxSalesChatLoginCookieInit",F="dbxCxChatCookieInit",k="dbxDashChatCookieInit",B="dbxFormswiftChatCookieInit",W="helloSignCXChatCookieInit",M=".dropbox.com",x={[c.DBX_SALES_CHAT]:U,[c.DBX_CX_CHAT]:F,[c.DASH_SALES_CHAT]:k,[c.FORMSWIFT_CHAT]:B,[c.HELLOSIGN_CX_CHAT]:W},X=[c.DOCSEND_CHAT,c.DASH_SALES_CHAT,c.FORMSWIFT_CHAT,c.DBX_CX_CHAT,c.DBX_SALES_CHAT],G=[c.DOCSEND_CHAT,c.DBX_CX_CHAT,c.FORMSWIFT_CHAT,c.DASH_SALES_CHAT],V=new Set([c.DOCSEND_CHAT,c.DBX_SALES_CHAT,c.DBX_CX_CHAT,c.FORMSWIFT_CHAT,c.HELLOSIGN_CX_CHAT]),Z={"/plans":10,"/business":10,"/upgrade":10,"/sign":10,"/backup":10,"/contact":10,"/individual":10,"/business/try":10,"/buy":10,"/low-space":10,"/official-site":10,"/official-teams-page":10,"/plus":10,"/replay":10,"/space-upgrade":10,"/buy/plus":10,"/try/teams":10,"/try/business":10,"/overview/teams":10,"/features/share/send-large-files":10,"/features/cloud-storage":10,"/buy/business/advanced":10,"/buy/professional":10,"/buy/business/standard":10,"/login":3},z="/login",$="/checkout",K={"/products/dropbox-fax":25,"/dropbox-esignature-solution":10,"/features":10,"/integrations/dropbox":10,"/dropbox-sign-api":10,"/products/dropbox-sign/pricing":10,"/integrations":10,"/products/dropbox-sign-api":10,"/products/dropbox-sign":10,"/":10},J={"/get_help":0,"/get_help/*/contact-us":0,"/get_help/chat":0,"/premium-support":0},Y=["/get_help","/get_help/*/contact-us","/get_help/chat","/premium-support"],j="French",q="Italian",Q="German",ee="Spanish",te="Portuguese",ie="Korean",ne="Mandarin or Cantonese",oe="Mandarin (Simplified Chinese)",ae="Mandarin (Traditional Chinese)",re="Cantonese (Hong Kong Chinese)",se="Cantonese (Macau Chinese)",de="Hindi",le=["ID"];var ce,ue,he,fe;!function(e){e.GET_BROWSER_STATUS="To check browser is Safari",e.SCRIPT_TAG_SUCCESS="Success in adding script tag to iframe",e.SCRIPT_TAG_ERROR="Failed to add script tag to iframe",e.EXPAND_BUTTON_CLICKED="User clicked expand button",e.MINIMIZE_BUTTON_CLICKED="User clicked minimize button",e.CHAT_WIDGET_LOADED="Chat widget loaded successfully inside iframe",e.CHAT_WIDGET_NOT_LOADED="Failed to load chat inside iframe widget maximum retries reached",e.FETCH_ZOOM_CHAT_CREDENTIALS="Fetching Zoom chat credentials",e.FETCH_DOCSEND_CURRENT_USER_INFO="Fetching DocSend current user info",e.FETCH_DROPBOX_CURRENT_USER_INFO="Fetching Dropbox current user info",e.FETCH_FORMSWIFT_CURRENT_USER_INFO="Fetching FormSwift current user info",e.FETCH_HELLOSIGN_CURRENT_USER_INFO="Fetching Hellosign current user info",e.FETCH_BROWSER_LANGUAGE_INFO="Fetching browser language info",e.FETCH_CX_CHAT_REQUESTED_LANGUAGE_INFO="Fetching CX chat requested language info",e.FETCH_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO="Fetching User selected product support package info",e.FETCH_BROWSER_PATH_INFO="Fetching DBX browser path info",e.FETCH_CHAT_TYPE_INFO="Fetch chat type info",e.END_CHAT_BUTTON_CLICKED="User clicked end chat button",e.DELETE_ATTACHED_IFRAME_ON_END_CHAT_BUTTON_CLICK="Delete attached iframe as user clicked end chat button",e.RELOAD_PAGE_AFTER_CHAT_ENDS="Requesting reload page after chat ends",e.UNHANDLED_ACTION_MESSAGES="Unhandled action from top window",e.SET_COOKIE_FOR_DBX_SALES_CHAT="Setting cookie for DBX sales chat"}(ce||(ce={})),function(e){e.SEND_BROWSER_STATUS="Sending browser status",e.SEND_ZOOM_CHAT_CREDENTIALS="Sending Zoom chat credentials",e.CHECK_CHAT_WIDGET_STATUS="Checking chat widget status",e.SEND_DOCSEND_CURRENT_USER_INFO="Sending DocSend current user info",e.SEND_BROWSER_PATH_INFO="Sending DBX browser path info",e.SEND_DROPBOX_CURRENT_USER_INFO="Sending Dropbox current user info",e.SEND_HELLOSIGN_CURRENT_USER_INFO="Sending Hellosign current user info",e.SEND_FORMSWIFT_CURRENT_USER_INFO="Sending FormSwift current user info",e.SEND_BROWSER_CURRENT_LANGUAGE_INFO="Sending browser current language info",e.SEND_CURRENT_CHAT_TYPE_INFO="Sending current chat type info",e.LOGOUT_CALLBACK="Performing logout callback as user DocSend ends the chat",e.SET_ZOOM_CHAT_WIDGET_TO_OPEN_WINDOW="Requesting chat window to open mode when the user requests a chat",e.SWITCH_COMPANY_CALLBACK_MESSAGE="Sending as user performs switch company",e.UNHANDLED_ACTION_MESSAGES="Unhandled action from iframe",e.SEND_CX_CHAT_REQUESTED_LANGUAGE_INFO="Send CX chat requested language info",e.SEND_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO="Send user selected product support package info"}(ue||(ue={})),function(e){e.CHAT_WIDGET_NOT_LOADED_MAX_RETRY_REACHED="Failed to load chat inside iframe - maximum retries reached",e.TOGGLE_REGISTRATION_FAILED_ERROR="Failed to register Open/Close Zoom Campaign events",e.END_BUTTON_NOT_FOUND_ERROR="Failed to find Zoom Chat widget end button",e.MINIMIZE_BUTTON_NOT_FOUND_ERROR="Unable to find minimize button for the Zoom chat widget campaign",e.MESSAGE_BOX_HEIGHT_SET_ERROR="Unable to set height for chat message box for Safari check of Zoom chat widget campaign",e.CHAT_END_BUTTON_NOT_FOUND_ERROR="Unable to find chat end button for the Zoom chat widget campaign",e.START_CHAT_BUTTON_NOT_FOUND_ERROR="Unable to find start new chat button for the Zoom chat widget campaign",e.ZOOM_CAMPAIGN_SDK_DOES_NOT_HAVE_AN_OPEN_METHOD="zoomCampaignSdk does not have an open method",e.ZOOM_CAMPAIGN_SDK_IS_NOT_AVAILABLE="Zoom Campaign SDK is not available",e.FAILED_WHEN_TRYING_TO_REGISTER_THE_ZOOM_CAMPAIGN_SDK_EVENT="Failed when trying to register the zoom Campaign SDK event",e.WEB_CHAT_DIV_NOT_FOUND="webChatDiv of zoom chat widget not found",e.SHADOW_DOM_NOT_AVAILABLE="Shadow DOM of zoom chat widget not available",e.START_NEW_CHAT_BUTTON_NOT_FOUND="Start New Chat button footer inside Shadow DOM not found",e.WINDOW_MASK_END_BUTTON_NOT_FOUND="Window mask of end button inside Shadow DOM not found"}(he||(he={})),function(e){e.IDENTIFIED_HOST_OR_SUPPORTED_ENTITLEMENTS_NULL="Identified host or supported entitlements is null or undefined",e.TIMER_VALUE_FETCH_ERROR="Error occurred while fetching timer value of Invalid URL",e.IFRAME_EXECUTION_ERROR="Error executing function in iframe",e.IFRAME_CONTENT_WINDOW_NULL_ERROR="Iframe contentWindow is null",e.IFRAME_NOT_FOUND_ERROR="Iframe not found",e.SCRIPT_TAG_ATTACHMENT_ERROR="Error during script tag attachment to iframe",e.CHAT_CLIENT_SETUP_INITIALIZATION_ERROR="Error initializing chat client setup",e.CHAT_IFRAME_LOAD_TIMEOUT_ERROR="Timed-out while waiting for chat iframe load event",e.ERROR_IN_FORMSWIFT_CHAT_DISPLAY_PROCESS="Error in FormSwift chat display process",e.ERROR_IN_FORMSWIFT_CHAT_LOAD_PROCESS="Error: Failed to reinitialize FormSwift chat load process",e.ERROR_ATTACHING_MESSAGE_EVENT_LISTENER="Error attaching message event listener",e.ERROR_CLEARING_TIMEOUT="Error while clearing timeout",e.ERROR_IFRAME_NOT_FOUND_OR_COOKIE_SET="Iframe not found or cookie already set",e.ERROR_ZOOM_CHAT_RELOAD_FAILED="Zoom chat reload failed. Steps were not executed",e.ERROR_OPEN_CHAT_WINDOW_METHOD_UNAVAILABLE="Zoom chat client or handleOpenChatWindowCallback method is not available",e.ERROR_CONSENT_METHOD_UNAVAILABLE="Zoom chat client or consentGrantedProceedDBXSalesChatToLoad method is not available as we DE-REG this callback explicitly.",e.INVALID_ENTRY_PAGE_KEY="Detected an invalid entry page key.",e.NO_ENTRY_PATH="Entry path is missing or invalid.",e.ENTRY_PAGE_KEY_NULL_OR_UNDEFINED="Entry page key is null or undefined.",e.NO_VALID_ENTRY_PAGE="No valid entry page found.",e.DETECTED_LOGIN_PAGE_WITHOUT_COOKIE="Chat should not be loaded in /login page without loginPageCookie.",e.INVALID_CHAT_COOKIE="Detected an invalid chat cookie.",e.NO_VALID_CHAT_COOKIE="No valid chat cookie present.",e.INVALID_CHAT_TYPE="Unrecognized or invalid chat type.",e.UNIFIED_CHAT_COOKIE_NOT_SET="Unified chat cookie is missing.",e.INITIALIZATION_FAILED="Failed to initialize supported entitlements.",e.NO_MATCHING_DOMAIN="No matching domain for initialization.",e.INVALID_ENTRY_POINT="Failed to validate the entry point.",e.PAGE_PATH_VERIFICATION="Current page path verification failed.",e.FETCH_HOSTNAME="Unable to fetch hostname from the URL.",e.FETCH_PATHNAME="Unable to fetch pathname from the URL.",e.UNSUPPORTED_ENTITLEMENTS="Unsupported entitlements detected during chat configuration.",e.OUTSIDE_OPERATIONAL_HOURS="Unable to load chat during non-operational hours.",e.MISSING_CHAT_OPERATIONAL_HOURS="Missing chat operational hours, unable to proceed with chat initialization.",e.ZOOM_CHAT_CONSENT_LOADER="Failed to load the Zoom chat client or the consentGrantedProceedDBXSalesChatToLoad method is missing.",e.MISSING_BUSINESS_HOURS_CONFIG="Missing configuration data for business hours.",e.MISSING_BUSINESS_TIMEZONE="Missing business timezone configuration.",e.MISSING_BUSINESS_HOURS="Missing business hours.",e.MISSING_CUSTOM_HOUR_RANGES="Business hours configuration does not contain customHourRanges.",e.ZOOM_CHAT_CONSENT_DECLINED="User declined consent, did not load the Zoom chat client.",e.MISSING_RELOAD_ZOOM_CHAT_CLIENT="Zoom Chat client is not available or reloadZoomChatClient is missing."}(fe||(fe={}));const Ce={type:e.Critical,message:fe.INVALID_ENTRY_PAGE_KEY},Ee={type:e.Operational,message:fe.NO_ENTRY_PATH},Se={type:e.NonCritical,message:fe.ENTRY_PAGE_KEY_NULL_OR_UNDEFINED},_e={type:e.Operational,message:fe.NO_VALID_ENTRY_PAGE},ge={type:e.Operational,message:fe.DETECTED_LOGIN_PAGE_WITHOUT_COOKIE},me={type:e.Critical,message:fe.INVALID_CHAT_COOKIE},Te={type:e.Critical,message:fe.NO_VALID_CHAT_COOKIE},Ie={type:e.Critical,message:fe.INVALID_CHAT_TYPE},pe={type:e.Operational,message:fe.UNIFIED_CHAT_COOKIE_NOT_SET},Oe={type:e.Critical,message:fe.INITIALIZATION_FAILED},Ne={type:e.Operational,message:fe.NO_MATCHING_DOMAIN},Ae={type:e.Critical,message:fe.INVALID_ENTRY_POINT},Re={type:e.Critical,message:fe.PAGE_PATH_VERIFICATION},De={type:e.UserError,message:fe.FETCH_HOSTNAME},be={type:e.UserError,message:fe.FETCH_PATHNAME},we={type:e.Critical,message:fe.UNSUPPORTED_ENTITLEMENTS},Le={type:e.Operational,message:fe.OUTSIDE_OPERATIONAL_HOURS},ye={type:e.Critical,message:fe.MISSING_CHAT_OPERATIONAL_HOURS},He={type:e.Critical,message:fe.ZOOM_CHAT_CONSENT_LOADER},ve={type:e.Critical,message:fe.MISSING_BUSINESS_HOURS_CONFIG},Ue={type:e.Critical,message:fe.MISSING_BUSINESS_TIMEZONE},Pe={type:e.Critical,message:fe.MISSING_BUSINESS_HOURS},Fe={type:e.Critical,message:fe.MISSING_CUSTOM_HOUR_RANGES},ke=e.Critical,Be=fe.ZOOM_CHAT_CONSENT_DECLINED,We={type:e.NonCritical,message:fe.ERROR_CONSENT_METHOD_UNAVAILABLE},Me={type:e.Critical,message:fe.ERROR_OPEN_CHAT_WINDOW_METHOD_UNAVAILABLE},xe={type:e.Critical,message:fe.MISSING_RELOAD_ZOOM_CHAT_CLIENT};function Xe(e,t){if(!e)throw new Error(t)}const Ge=34028234663852886e22,Ve=-34028234663852886e22,Ze=4294967295,ze=2147483647,$e=-2147483648;function Ke(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>ze||e<$e)throw new Error("invalid int 32: "+e)}function Je(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>Ze||e<0)throw new Error("invalid uint 32: "+e)}function Ye(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>Ge||e<Ve))throw new Error("invalid float 32: "+e)}const je=Symbol("@bufbuild/protobuf/enum-type");function qe(e){const t=e[je];return Xe(t,"missing enum type on enum object"),t}function Qe(e,t,i,n){e[je]=et(t,i.map((t=>({no:t.no,name:t.name,localName:e[t.no]}))),n)}function et(e,t,i){const n=Object.create(null),o=Object.create(null),a=[];for(const e of t){const t=it(e);a.push(t),n[e.name]=t,o[e.no]=t}return{typeName:e,values:a,findName:e=>n[e],findNumber:e=>o[e]}}function tt(e,t,i){const n={};for(const e of t){const t=it(e);n[t.localName]=t.no,n[t.no]=t.localName}return Qe(n,e,t,i),n}function it(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class nt{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const i=undefined,n=this.getType().runtime.bin,o=n.makeReadOptions(t);return n.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,t){const i=this.getType(),n=i.runtime.json,o=n.makeReadOptions(t);return n.readMessage(i,e,o,this),this}fromJsonString(e,t){return this.fromJson(JSON.parse(e),t)}toBinary(e){const t=undefined,i=this.getType().runtime.bin,n=i.makeWriteOptions(e),o=n.writerFactory();return i.writeMessage(this,o,n),o.finish()}toJson(e){const t=undefined,i=this.getType().runtime.json,n=i.makeWriteOptions(e);return i.writeMessage(this,n)}toJsonString(e){var t;const i=this.toJson(e);return JSON.stringify(i,null,null!==(t=null==e?void 0:e.prettySpaces)&&void 0!==t?t:0)}getType(){return Object.getPrototypeOf(this).constructor}}function ot(e,t,i,n){var o;const a=null!==(o=null==n?void 0:n.localName)&&void 0!==o?o:t.substring(t.lastIndexOf(".")+1),r={[a]:function(t){e.util.initFields(this),e.util.initPartial(t,this)}}[a];return Object.setPrototypeOf(r.prototype,new nt),Object.assign(r,{runtime:e,typeName:t,fields:e.util.newFieldList(i),fromBinary:(e,t)=>(new r).fromBinary(e,t),fromJson:(e,t)=>(new r).fromJson(e,t),fromJsonString:(e,t)=>(new r).fromJsonString(e,t),equals:(t,i)=>e.util.equals(r,t,i)}),r}function at(e,t,i,n){return{syntax:e,json:t,bin:i,util:n,makeMessageType(e,t,i){return ot(this,e,t,i)},makeEnum:tt,makeEnumType:et,getEnumType:qe}}var rt;function st(){let e=0,t=0;for(let i=0;i<28;i+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}let i=this.buf[this.pos++];if(e|=(15&i)<<28,t=(112&i)>>4,0==(128&i))return this.assertBounds(),[e,t];for(let i=3;i<=31;i+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function dt(e,t,i){for(let n=0;n<28;n+=7){const o=e>>>n,a=!(o>>>7==0&&0==t),r=255&(a?128|o:o);if(i.push(r),!a)return}const n=e>>>28&15|(7&t)<<4,o=!(t>>3==0);if(i.push(255&(o?128|n:n)),o){for(let e=3;e<31;e+=7){const n=t>>>e,o=!(n>>>7==0),a=255&(o?128|n:n);if(i.push(a),!o)return}i.push(t>>>31&1)}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(rt||(rt={}));const lt=4294967296;function ct(e){const t="-"===e[0];t&&(e=e.slice(1));const i=1e6;let n=0,o=0;function a(t,a){const r=Number(e.slice(t,a));o*=i,n=n*i+r,n>=lt&&(o+=n/lt|0,n%=lt)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?Et(n,o):Ct(n,o)}function ut(e,t){let i=Ct(e,t);const n=2147483648&i.hi;n&&(i=Et(i.lo,i.hi));const o=ht(i.lo,i.hi);return n?"-"+o:o}function ht(e,t){if(({lo:e,hi:t}=ft(e,t)),t<=2097151)return String(lt*t+e);const i=undefined,n=16777215&(e>>>24|t<<8),o=t>>16&65535;let a=(16777215&e)+6777216*n+6710656*o,r=n+8147497*o,s=2*o;const d=1e7;return a>=d&&(r+=Math.floor(a/d),a%=d),r>=d&&(s+=Math.floor(r/d),r%=d),s.toString()+St(r)+St(a)}function ft(e,t){return{lo:e>>>0,hi:t>>>0}}function Ct(e,t){return{lo:0|e,hi:0|t}}function Et(e,t){return t=~t,e?e=1+~e:t+=1,Ct(e,t)}const St=e=>{const t=String(e);return"0000000".slice(t.length)+t};function _t(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let i=0;i<9;i++)t.push(127&e|128),e>>=7;t.push(1)}}function gt(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let t=5;0!=(128&e)&&t<10;t++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}function mt(){const e=new DataView(new ArrayBuffer(8)),t=undefined;if(void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"object"!=typeof{NODE_ENV:"production",ROLE_ANONY:"anonymous",ROLE_BOTH:"both",ROLE_PERSONAL:"personal",ROLE_PHOTOS:"photos",ROLE_WORK:"work",APISERVER:"api.dropboxapi.com",APISERVER_V1:"api.dropbox.com",API_BLOCK_CLUSTER_V1:"api-content.dropbox.com",BEACON_SERVER:"beacon.dropbox.com",BLOCK_CLUSTER:"dl-web.dropbox.com",BOLT_SERVER:"bolt.dropbox.com",PUBSERVER:"dl.dropboxusercontent.com",DROPBOX_USER_CONTENT_DOMAIN:"dropboxusercontent.com",PDF_EDITOR_FRAME:"processing.dropboxusercontent.com",THUNDER_SERVER:"thunder.dropbox.com",WEBSERVER:"www.dropbox.com",DROPBOX_DASH_STAGE:"staging.dash.ai",DROPBOX_DASH_PROD:"www.dash.ai",DROPBOX_REPLAY_DEV:"replay-local.dropbox.com",DROPBOX_REPLAY_PROD:"replay.dropbox.com",MARKETING_WEBSERVER:"marketing.dropbox.com",FILE_IMPORTS_WEBSERVER:"file-imports.dropbox.com",CLIENT_WEB_WEBSERVER:"client-web.dropbox.com",WEB_STATIC_CLOUDFLARE_CDN_HOST:"cfl.dropboxstatic.com",WEB_STATIC_DROPBOX_HOST:"www.dropboxstatic.com",DOWNLOAD_ID_PARAM_NAME:"_download_id",DOWNLOADS_NOTIFY_DOMAIN_PARAM_NAME:"_notify_domain",DOWNLOADS_LOG_SUCCESS_PARAM_NAME:"_log_download_success",UID_PARAM_NAME:"_subject_uid",USER_NAME_MAX_LEN:"100",INVALID_FOLDER_PRINTABLE_CHARS_DESC:'" * / : < > ? \\ |',FUNCAPTCHA_SERVER:"dropboxcaptcha.com",PAYPAL_SDK_DROPBOX_SERVER:"paypal-sdk-dropbox.com",CHOOSER_APP_KEY:"a1gk45gxjylc840",MAX_WEBHOOKS_PER_APP:"25",ROLLUP:"ROLLUP_ENV.ROLLUP",ROLLUP_FORMAT:"ROLLUP_ENV.ROLLUP_FORMAT"}||"1"!=={NODE_ENV:"production",ROLE_ANONY:"anonymous",ROLE_BOTH:"both",ROLE_PERSONAL:"personal",ROLE_PHOTOS:"photos",ROLE_WORK:"work",APISERVER:"api.dropboxapi.com",APISERVER_V1:"api.dropbox.com",API_BLOCK_CLUSTER_V1:"api-content.dropbox.com",BEACON_SERVER:"beacon.dropbox.com",BLOCK_CLUSTER:"dl-web.dropbox.com",BOLT_SERVER:"bolt.dropbox.com",PUBSERVER:"dl.dropboxusercontent.com",DROPBOX_USER_CONTENT_DOMAIN:"dropboxusercontent.com",PDF_EDITOR_FRAME:"processing.dropboxusercontent.com",THUNDER_SERVER:"thunder.dropbox.com",WEBSERVER:"www.dropbox.com",DROPBOX_DASH_STAGE:"staging.dash.ai",DROPBOX_DASH_PROD:"www.dash.ai",DROPBOX_REPLAY_DEV:"replay-local.dropbox.com",DROPBOX_REPLAY_PROD:"replay.dropbox.com",MARKETING_WEBSERVER:"marketing.dropbox.com",FILE_IMPORTS_WEBSERVER:"file-imports.dropbox.com",CLIENT_WEB_WEBSERVER:"client-web.dropbox.com",WEB_STATIC_CLOUDFLARE_CDN_HOST:"cfl.dropboxstatic.com",WEB_STATIC_DROPBOX_HOST:"www.dropboxstatic.com",DOWNLOAD_ID_PARAM_NAME:"_download_id",DOWNLOADS_NOTIFY_DOMAIN_PARAM_NAME:"_notify_domain",DOWNLOADS_LOG_SUCCESS_PARAM_NAME:"_log_download_success",UID_PARAM_NAME:"_subject_uid",USER_NAME_MAX_LEN:"100",INVALID_FOLDER_PRINTABLE_CHARS_DESC:'" * / : < > ? \\ |',FUNCAPTCHA_SERVER:"dropboxcaptcha.com",PAYPAL_SDK_DROPBOX_SERVER:"paypal-sdk-dropbox.com",CHOOSER_APP_KEY:"a1gk45gxjylc840",MAX_WEBHOOKS_PER_APP:"25",ROLLUP:"ROLLUP_ENV.ROLLUP",ROLLUP_FORMAT:"ROLLUP_ENV.ROLLUP_FORMAT"}.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),i=BigInt("9223372036854775807"),n=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const n="bigint"==typeof e?e:BigInt(e);if(n>i||n<t)throw new Error(`int64 invalid: ${e}`);return n},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>o||t<n)throw new Error(`uint64 invalid: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,i)=>(e.setInt32(0,t,!0),e.setInt32(4,i,!0),e.getBigInt64(0,!0)),uDec:(t,i)=>(e.setInt32(0,t,!0),e.setInt32(4,i,!0),e.getBigUint64(0,!0))}}const i=e=>Xe(/^-?[0-9]+$/.test(e),`int64 invalid: ${e}`),n=e=>Xe(/^[0-9]+$/.test(e),`uint64 invalid: ${e}`);return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),i(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),i(e),ct(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),n(e),ct(e)),dec:(e,t)=>ut(e,t),uDec:(e,t)=>ht(e,t)}}const Tt=mt();var It;!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(It||(It={}));class pt{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),i=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],i),i+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Je(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Ke(e),_t(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Ye(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Je(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Ke(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Ke(e),_t(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),i=new DataView(t.buffer),n=Tt.enc(e);return i.setInt32(0,n.lo,!0),i.setInt32(4,n.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),i=new DataView(t.buffer),n=Tt.uEnc(e);return i.setInt32(0,n.lo,!0),i.setInt32(4,n.hi,!0),this.raw(t)}int64(e){let t=Tt.enc(e);return dt(t.lo,t.hi,this.buf),this}sint64(e){let t=Tt.enc(e),i=t.hi>>31,n,o;return dt(t.lo<<1^i,(t.hi<<1|t.lo>>>31)^i,this.buf),this}uint64(e){let t=Tt.uEnc(e);return dt(t.lo,t.hi,this.buf),this}}class Ot{constructor(e,t){this.varint64=st,this.uint32=gt,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,i=7&e;if(t<=0||i<0||i>5)throw new Error("illegal tag: field no "+t+" wire type "+i);return[t,i]}skip(e){let t=this.pos;switch(e){case It.Varint:for(;128&this.buf[this.pos++];);break;case It.Bit64:this.pos+=4;case It.Bit32:this.pos+=4;break;case It.LengthDelimited:let t=this.uint32();this.pos+=t;break;case It.StartGroup:let i;for(;(i=this.tag()[1])!==It.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return Tt.dec(...this.varint64())}uint64(){return Tt.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),i=-(1&e);return e=(e>>>1|(1&t)<<31)^i,t=t>>>1^i,Tt.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Tt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Tt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Nt(e,t){if(t instanceof e)return t;if(e.fieldWrapper)return e.fieldWrapper.wrapField(t);throw new Error(`cannot unwrap field value, ${e.typeName} does not define a field wrapper`)}function At(e,t){return e.fieldWrapper?e.fieldWrapper.unwrapField(t):t}function Rt(e){if("message"===e.fieldKind&&!e.repeated&&null==e.oneof)return Dt[e.message.typeName]}const Dt={"google.protobuf.DoubleValue":rt.DOUBLE,"google.protobuf.FloatValue":rt.FLOAT,"google.protobuf.Int64Value":rt.INT64,"google.protobuf.UInt64Value":rt.UINT64,"google.protobuf.Int32Value":rt.INT32,"google.protobuf.UInt32Value":rt.UINT32,"google.protobuf.BoolValue":rt.BOOL,"google.protobuf.StringValue":rt.STRING,"google.protobuf.BytesValue":rt.BYTES};function bt(e,t,i){if(t===i)return!0;if(e==rt.BYTES){if(!(t instanceof Uint8Array&&i instanceof Uint8Array))return!1;if(t.length!==i.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==i[e])return!1;return!0}switch(e){case rt.UINT64:case rt.FIXED64:case rt.INT64:case rt.SFIXED64:case rt.SINT64:return t==i}return!1}function wt(e){switch(e){case rt.BOOL:return!1;case rt.UINT64:case rt.FIXED64:case rt.INT64:case rt.SFIXED64:case rt.SINT64:return Tt.zero;case rt.DOUBLE:case rt.FLOAT:return 0;case rt.BYTES:return new Uint8Array(0);case rt.STRING:return"";default:return 0}}function Lt(e,t){const i=void 0===t;let n=It.Varint,o=0===t;switch(e){case rt.STRING:o=i||!t.length,n=It.LengthDelimited;break;case rt.BOOL:o=!1===t;break;case rt.DOUBLE:n=It.Bit64;break;case rt.FLOAT:n=It.Bit32;break;case rt.INT64:case rt.UINT64:o=i||0==t;break;case rt.FIXED64:o=i||0==t,n=It.Bit64;break;case rt.BYTES:o=i||!t.byteLength,n=It.LengthDelimited;break;case rt.FIXED32:case rt.SFIXED32:n=It.Bit32;break;case rt.SFIXED64:o=i||0==t,n=It.Bit64;break;case rt.SINT64:o=i||0==t}const a=undefined;return[n,rt[e].toLowerCase(),i||o]}const yt=Symbol("@bufbuild/protobuf/unknown-fields"),Ht={readUnknownFields:!0,readerFactory:e=>new Ot(e)},vt={writeUnknownFields:!0,writerFactory:()=>new pt};function Ut(e){return e?Object.assign(Object.assign({},Ht),e):Ht}function Pt(e){return e?Object.assign(Object.assign({},vt),e):vt}function Ft(){return{makeReadOptions:Ut,makeWriteOptions:Pt,listUnknownFields(e){var t;return null!==(t=e[yt])&&void 0!==t?t:[]},discardUnknownFields(e){delete e[yt]},writeUnknownFields(e,t){const i=undefined,n=e[yt];if(n)for(const e of n)t.tag(e.no,e.wireType).raw(e.data)},onUnknownField(e,t,i,n){const o=e;Array.isArray(o[yt])||(o[yt]=[]),o[yt].push({no:t,wireType:i,data:n})},readMessage(e,t,i,n){const o=e.getType(),a=void 0===i?t.len:t.pos+i;for(;t.pos<a;){const[i,a]=t.tag(),r=o.fields.find(i);if(!r){const o=t.skip(a);n.readUnknownFields&&this.onUnknownField(e,i,a,o);continue}let s=e,d=r.repeated,l=r.localName;switch(r.oneof&&(s=s[r.oneof.localName],s.case!=l&&delete s.value,s.case=l,l="value"),r.kind){case"scalar":case"enum":const e="enum"==r.kind?rt.INT32:r.T;if(d){let i=s[l];if(a==It.LengthDelimited&&e!=rt.STRING&&e!=rt.BYTES){let n=t.uint32()+t.pos;for(;t.pos<n;)i.push(Bt(t,e))}else i.push(Bt(t,e))}else s[l]=Bt(t,e);break;case"message":const i=r.T;d?s[l].push(i.fromBinary(t.bytes(),n)):s[l]instanceof i?s[l].fromBinary(t.bytes(),n):s[l]=At(i,i.fromBinary(t.bytes(),n));break;case"map":let[o,c]=kt(r,t,n);s[l][o]=c}}}}}function kt(e,t,i){const n=t.uint32(),o=t.pos+n;let a,r;for(;t.pos<o;){let[n]=t.tag();switch(n){case 1:a=Bt(t,e.K);break;case 2:switch(e.V.kind){case"scalar":r=Bt(t,e.V.T);break;case"enum":r=t.int32();break;case"message":r=e.V.T.fromBinary(t.bytes(),i)}}}if(void 0===a){let t=wt(e.K);a=e.K==rt.BOOL?t.toString():t}if("string"!=typeof a&&"number"!=typeof a&&(a=a.toString()),void 0===r)switch(e.V.kind){case"scalar":r=wt(e.V.T);break;case"enum":r=0;break;case"message":r=new e.V.T}return[a,r]}function Bt(e,t){let[,i]=Lt(t);return e[i]()}function Wt(e,t,i,n,o){e.tag(i.no,It.LengthDelimited),e.fork();let a=n;switch(i.K){case rt.INT32:case rt.FIXED32:case rt.UINT32:case rt.SFIXED32:case rt.SINT32:a=Number.parseInt(n);break;case rt.BOOL:Xe("true"==n||"false"==n),a="true"==n}switch(xt(e,i.K,1,a,!0),i.V.kind){case"scalar":xt(e,i.V.T,2,o,!0);break;case"enum":xt(e,rt.INT32,2,o,!0);break;case"message":Mt(e,t,i.V.T,2,o)}e.join()}function Mt(e,t,i,n,o){if(void 0!==o){const a=Nt(i,o);e.tag(n,It.LengthDelimited).bytes(a.toBinary(t))}}function xt(e,t,i,n,o){let[a,r,s]=Lt(t,n);s&&!o||e.tag(i,a)[r](n)}function Xt(e,t,i,n){if(!n.length)return;e.tag(i,It.LengthDelimited).fork();let[,o]=Lt(t);for(let t=0;t<n.length;t++)e[o](n[t]);e.join()}function Gt(){return Object.assign(Object.assign({},Ft()),{writeMessage(e,t,i){const n=e.getType();for(const o of n.fields.byNumber()){let n,a=o.repeated,r=o.localName;if(o.oneof){const t=e[o.oneof.localName];if(t.case!==r)continue;n=t.value}else n=e[r];switch(o.kind){case"scalar":case"enum":let e="enum"==o.kind?rt.INT32:o.T;if(a)if(o.packed)Xt(t,e,o.no,n);else for(const i of n)xt(t,e,o.no,i,!0);else void 0!==n&&xt(t,e,o.no,n,!!o.oneof||o.opt);break;case"message":if(a)for(const e of n)Mt(t,i,o.T,o.no,e);else Mt(t,i,o.T,o.no,n);break;case"map":for(const[e,a]of Object.entries(n))Wt(t,i,o,e,a)}}return i.writeUnknownFields&&this.writeUnknownFields(e,t),t}})}let Vt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Zt=[];for(let e=0;e<Vt.length;e++)Zt[Vt[e].charCodeAt(0)]=e;Zt["-".charCodeAt(0)]=Vt.indexOf("+"),Zt["_".charCodeAt(0)]=Vt.indexOf("/");const zt={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let i=new Uint8Array(t),n=0,o=0,a,r=0;for(let t=0;t<e.length;t++){if(a=Zt[e.charCodeAt(t)],void 0===a)switch(e[t]){case"=":o=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(o){case 0:r=a,o=1;break;case 1:i[n++]=r<<2|(48&a)>>4,r=a,o=2;break;case 2:i[n++]=(15&r)<<4|(60&a)>>2,r=a,o=3;break;case 3:i[n++]=(3&r)<<6|a,o=0}}if(1==o)throw Error("invalid base64 string.");return i.subarray(0,n)},enc(e){let t="",i=0,n,o=0;for(let a=0;a<e.length;a++)switch(n=e[a],i){case 0:t+=Vt[n>>2],o=(3&n)<<4,i=1;break;case 1:t+=Vt[o|n>>4],o=(15&n)<<2,i=2;break;case 2:t+=Vt[o|n>>6],t+=Vt[63&n],i=0}return i&&(t+=Vt[o],t+="=",1==i&&(t+="=")),t}},$t={ignoreUnknownFields:!1},Kt={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Jt(e){return e?Object.assign(Object.assign({},$t),e):$t}function Yt(e){return e?Object.assign(Object.assign({},Kt),e):Kt}function jt(e){const t=e(ti,ii);return{makeReadOptions:Jt,makeWriteOptions:Yt,readMessage(e,t,i,n){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error(`cannot decode message ${e.typeName} from JSON: ${this.debug(t)}`);n=null!=n?n:new e;const o={};for(const[a,r]of Object.entries(t)){const t=e.fields.findJsonName(a);if(!t){if(!i.ignoreUnknownFields)throw new Error(`cannot decode message ${e.typeName} from JSON: key "${a}" is unknown`);continue}let s=t.localName,d=n;if(t.oneof){if(null===r&&"scalar"==t.kind)continue;const i=o[t.oneof.localName];if(i)throw new Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${t.oneof.name}" present: "${i}", "${a}"`);o[t.oneof.localName]=a,d=d[t.oneof.localName]={case:s},s="value"}if(t.repeated){if(null===r)continue;if(!Array.isArray(r))throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`);const n=d[s];for(const o of r){if(null===o)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(o)}`);let a;switch(t.kind){case"message":a=t.T.fromJson(o,i);break;case"enum":if(a=ei(t.T,o,i.ignoreUnknownFields),void 0===a)continue;break;case"scalar":try{a=Qt(t.T,o)}catch(i){let n=`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(o)}`;throw i instanceof Error&&i.message.length>0&&(n+=`: ${i.message}`),new Error(n)}}n.push(a)}}else if("map"==t.kind){if(null===r)continue;if(Array.isArray(r)||"object"!=typeof r)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`);const n=d[s];for(const[o,a]of Object.entries(r)){if(null===a)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: map value null`);let s;switch(t.V.kind){case"message":s=t.V.T.fromJson(a,i);break;case"enum":if(s=ei(t.V.T,a,i.ignoreUnknownFields),void 0===s)continue;break;case"scalar":try{s=Qt(t.V.T,a)}catch(i){let n=`cannot decode map value for field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`;throw i instanceof Error&&i.message.length>0&&(n+=`: ${i.message}`),new Error(n)}}try{n[Qt(t.K,t.K==rt.BOOL?"true"==o||"false"!=o&&o:o).toString()]=s}catch(i){let n=`cannot decode map key for field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`;throw i instanceof Error&&i.message.length>0&&(n+=`: ${i.message}`),new Error(n)}}}else switch(t.kind){case"message":const n=t.T;if(null===r&&"google.protobuf.Value"!=n.typeName){if(t.oneof)throw new Error(`cannot decode field ${e.typeName}.${t.name} from JSON: null is invalid for oneof field "${a}"`);continue}const o=void 0===d[s]?new n:Nt(n,d[s]);d[s]=At(n,o.fromJson(r,i));break;case"enum":const l=ei(t.T,r,i.ignoreUnknownFields);void 0!==l&&(d[s]=l);break;case"scalar":try{d[s]=Qt(t.T,r)}catch(i){let n=`cannot decode field ${e.typeName}.${t.name} from JSON: ${this.debug(r)}`;throw i instanceof Error&&i.message.length>0&&(n+=`: ${i.message}`),new Error(n)}}}return n},writeMessage(e,i){const n=e.getType(),o={};let a;try{for(const r of n.fields.byMember()){let n;if("oneof"==r.kind){const o=e[r.localName];if(void 0===o.value)continue;if(a=r.findField(o.case),!a)throw"oneof case not found: "+o.case;n=t(a,o.value,i)}else a=r,n=t(a,e[a.localName],i);void 0!==n&&(o[i.useProtoFieldName?a.name:a.jsonName]=n)}}catch(e){const t=a?`cannot encode field ${n.typeName}.${a.name} to JSON`:`cannot encode message ${n.typeName} to JSON`,i=e instanceof Error?e.message:String(e);throw new Error(t+(i.length>0?`: ${i}`:""))}return o},readScalar:Qt,writeScalar:ii,debug:qt}}function qt(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return e.toString()}}function Qt(e,t){switch(e){case rt.DOUBLE:case rt.FLOAT:if(null===t)return 0;if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;const i=Number(t);if(Number.isNaN(i))break;if(!Number.isFinite(i))break;return e==rt.FLOAT&&Ye(i),i;case rt.INT32:case rt.FIXED32:case rt.SFIXED32:case rt.SINT32:case rt.UINT32:if(null===t)return 0;let n;if("number"==typeof t?n=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(n=Number(t)),void 0===n)break;return e==rt.UINT32?Je(n):Ke(n),n;case rt.INT64:case rt.SFIXED64:case rt.SINT64:if(null===t)return Tt.zero;if("number"!=typeof t&&"string"!=typeof t)break;return Tt.parse(t);case rt.FIXED64:case rt.UINT64:if(null===t)return Tt.zero;if("number"!=typeof t&&"string"!=typeof t)break;return Tt.uParse(t);case rt.BOOL:if(null===t)return!1;if("boolean"!=typeof t)break;return t;case rt.STRING:if(null===t)return"";if("string"!=typeof t)break;try{encodeURIComponent(t)}catch(e){throw new Error("invalid UTF8")}return t;case rt.BYTES:if(null===t||""===t)return new Uint8Array(0);if("string"!=typeof t)break;return zt.dec(t)}throw new Error}function ei(e,t,i){if(null===t)return 0;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const n=e.findName(t);if(n||i)return null==n?void 0:n.no}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${qt(t)}`)}function ti(e,t,i,n){var o;if(void 0===t)return t;if(0===t&&!i)return;if(n)return t;if("google.protobuf.NullValue"==e.typeName)return null;const a=e.findNumber(t);return null!==(o=null==a?void 0:a.name)&&void 0!==o?o:t}function ii(e,t,i){if(void 0!==t)switch(e){case rt.INT32:case rt.SFIXED32:case rt.SINT32:case rt.FIXED32:case rt.UINT32:return Xe("number"==typeof t),0!=t||i?t:void 0;case rt.FLOAT:case rt.DOUBLE:return Xe("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":0!==t||i?t:void 0;case rt.STRING:return Xe("string"==typeof t),t.length>0||i?t:void 0;case rt.BOOL:return Xe("boolean"==typeof t),t||i?t:void 0;case rt.UINT64:case rt.FIXED64:case rt.INT64:case rt.SFIXED64:case rt.SINT64:return Xe("bigint"==typeof t||"string"==typeof t||"number"==typeof t),i||0!=t?t.toString(10):void 0;case rt.BYTES:return Xe(t instanceof Uint8Array),i||t.byteLength>0?zt.enc(t):void 0}}function ni(){return jt(((e,t)=>function i(n,o,a){if("map"==n.kind){const i={};switch(n.V.kind){case"scalar":for(const[e,a]of Object.entries(o)){const o=t(n.V.T,a,!0);Xe(void 0!==o),i[e.toString()]=o}break;case"message":for(const[e,t]of Object.entries(o))i[e.toString()]=t.toJson(a);break;case"enum":const r=n.V.T;for(const[t,n]of Object.entries(o)){Xe(void 0===n||"number"==typeof n);const o=e(r,n,!0,a.enumAsInteger);Xe(void 0!==o),i[t.toString()]=o}}return a.emitDefaultValues||Object.keys(i).length>0?i:void 0}if(n.repeated){const i=[];switch(n.kind){case"scalar":for(let e=0;e<o.length;e++)i.push(t(n.T,o[e],!0));break;case"enum":for(let t=0;t<o.length;t++)i.push(e(n.T,o[t],!0,a.enumAsInteger));break;case"message":for(let e=0;e<o.length;e++)i.push(Nt(n.T,o[e]).toJson(a))}return a.emitDefaultValues||i.length>0?i:void 0}switch(n.kind){case"scalar":return t(n.T,o,!!n.oneof||n.opt||a.emitDefaultValues);case"enum":return e(n.T,o,!!n.oneof||n.opt||a.emitDefaultValues,a.enumAsInteger);case"message":return void 0!==o?Nt(n.T,o).toJson(a):void 0}}))}function oi(){return{setEnumType:Qe,initPartial(e,t){if(void 0===e)return;const i=t.getType();for(const n of i.fields.byMember()){const i=n.localName,o=t,a=e;if(void 0!==a[i])switch(n.kind){case"oneof":const e=a[i].case;if(void 0===e)continue;const t=n.findField(e);let r=a[i].value;!t||"message"!=t.kind||r instanceof t.T||(r=new t.T(r)),o[i]={case:e,value:r};break;case"scalar":case"enum":o[i]=a[i];break;case"map":switch(n.V.kind){case"scalar":case"enum":Object.assign(o[i],a[i]);break;case"message":const e=n.V.T;for(const t of Object.keys(a[i])){let n=a[i][t];e.fieldWrapper||(n=new e(n)),o[i][t]=n}}break;case"message":const s=n.T;if(n.repeated)o[i]=a[i].map((e=>e instanceof s?e:new s(e)));else if(void 0!==a[i]){const e=a[i];s.fieldWrapper?o[i]=e:o[i]=e instanceof s?e:new s(e)}}}},equals:(e,t,i)=>t===i||!(!t||!i)&&e.fields.byMember().every((e=>{const n=t[e.localName],o=i[e.localName];if(e.repeated){if(n.length!==o.length)return!1;switch(e.kind){case"message":return n.every(((t,i)=>e.T.equals(t,o[i])));case"scalar":return n.every(((t,i)=>bt(e.T,t,o[i])));case"enum":return n.every(((e,t)=>bt(rt.INT32,e,o[t])))}throw new Error(`repeated cannot contain ${e.kind}`)}switch(e.kind){case"message":return e.T.equals(n,o);case"enum":return bt(rt.INT32,n,o);case"scalar":return bt(e.T,n,o);case"oneof":if(n.case!==o.case)return!1;const t=n.case,i=e.findField(t);if(void 0===i)return!0;switch(i.kind){case"message":return i.T.equals(n[t],o[t]);case"enum":return bt(rt.INT32,n,o);case"scalar":return bt(i.T,n,o)}throw new Error(`oneof cannot contain ${i.kind}`);case"map":const a=Object.keys(n);if(a.some((e=>void 0===o[e])))return!1;switch(e.V.kind){case"message":const t=e.V.T;return a.every((e=>t.equals(n[e],o[e])));case"enum":return a.every((e=>bt(rt.INT32,n[e],o[e])));case"scalar":const i=e.V.T;return a.every((e=>bt(i,n[e],o[e])))}}})),clone(e){const t=e.getType(),i=new t,n=i;for(const i of t.fields.byMember()){const t=e[i.localName];let o;if(i.repeated)o=t.map((e=>ai(i,e)));else if("map"==i.kind){o=n[i.localName];for(const[e,n]of Object.entries(t))o[e]=ai(i.V,n)}else if("oneof"==i.kind){const e=i.findField(t.case);o=e?{case:t.case,value:ai(e,t.value)}:{case:void 0}}else o=ai(i,t);n[i.localName]=o}return i}}}function ai(e,t){if(void 0===t)return t;switch(e.kind){case"enum":return t;case"scalar":if(e.T===rt.BYTES){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t;case"message":return e.T.fieldWrapper?e.T.fieldWrapper.unwrapField(e.T.fieldWrapper.wrapField(t).clone()):t.clone()}}class ri{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const e={};for(const t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){const e={};for(const t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((e,t)=>e.no-t.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const i of this.list())i.oneof?i.oneof!==t&&(t=i.oneof,e.push(t)):e.push(i)}return this.members}}function si(e){switch(e.kind){case"field":return di(e.name,void 0!==e.oneof);case"oneof":return li(e.name);case"enum":case"message":case"service":{const t=e.file.proto.package,i=void 0===t?0:t.length+1,n=e.typeName.substring(i).replace(/\./g,"_");return Ci[n]?n+"$":n}case"enum_value":{const t=e.parent.sharedPrefix;if(void 0===t)return e.name;const i=e.name.substring(t.length);return Ei[i]?i+"$":i}case"rpc":{let t=e.name;return 0==t.length?t:(t=t[0].toLowerCase()+t.substring(1),Ei[t]?t+"$":t)}}}function di(e,t){let i=fi(e);return t||(Ei[i]||Si[i])&&(i+="$"),i}function li(e){return di(e,!1)}const ci=fi;function ui(e,t){const i=hi(e)+"_";for(const e of t){if(!e.toLowerCase().startsWith(i))return;const t=e.substring(i.length);if(0==t.length)return;if(/^\d/.test(t))return}return i}function hi(e){return(e.substring(0,1)+e.substring(1).replace(/[A-Z]/g,(e=>"_"+e))).toLowerCase()}function fi(e){let t=!1;const i=[];for(let n=0;n<e.length;n++){let o=e.charAt(n);switch(o){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":i.push(o),t=!1;break;default:t&&(t=!1,o=o.toUpperCase()),i.push(o)}}return i.join("")}const Ci={break:!0,case:!0,catch:!0,class:!0,const:!0,continue:!0,debugger:!0,default:!0,delete:!0,do:!0,else:!0,export:!0,extends:!0,false:!0,finally:!0,for:!0,function:!0,if:!0,import:!0,in:!0,instanceof:!0,new:!0,null:!0,return:!0,super:!0,switch:!0,this:!0,throw:!0,true:!0,try:!0,typeof:!0,var:!0,void:!0,while:!0,with:!0,yield:!0,enum:!0,implements:!0,interface:!0,let:!0,package:!0,private:!0,protected:!0,public:!0,static:!0,Object:!0,bigint:!0,number:!0,boolean:!0,string:!0,object:!0,globalThis:!0,Uint8Array:!0,Partial:!0},Ei={constructor:!0,toString:!0,toJSON:!0,valueOf:!0},Si={getType:!0,clone:!0,equals:!0,fromBinary:!0,fromJson:!0,fromJsonString:!0,toBinary:!0,toJson:!0,toJsonString:!0,toObject:!0};class _i{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=li(e)}addField(e){Xe(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}const gi=at("proto3",ni(),Gt(),Object.assign(Object.assign({},oi()),{newFieldList:e=>new ri(e,mi),initFields(e){for(const t of e.getType().fields.byMember()){if(t.opt)continue;const i=t.localName,n=e;if(t.repeated)n[i]=[];else switch(t.kind){case"oneof":n[i]={case:void 0};break;case"enum":n[i]=0;break;case"map":n[i]={};break;case"scalar":n[i]=wt(t.T)}}}}));function mi(e){var t,i,n;const o=[];let a;for(const r of"function"==typeof e?e():e){const e=r;if(e.localName=di(r.name,void 0!==r.oneof),e.jsonName=null!==(t=r.jsonName)&&void 0!==t?t:ci(r.name),e.repeated=null!==(i=r.repeated)&&void 0!==i&&i,e.packed=null!==(n=r.packed)&&void 0!==n?n:"enum"==r.kind||"scalar"==r.kind&&r.T!=rt.BYTES&&r.T!=rt.STRING,void 0!==r.oneof){const t="string"==typeof r.oneof?r.oneof:r.oneof.name;a&&a.name==t||(a=new _i(t)),e.oneof=a,a.addField(e)}o.push(e)}return o}class Ti extends nt{constructor(e){super(),this.seconds=Tt.zero,this.nanos=0,gi.util.initPartial(e,this)}fromJson(e,t){if("string"!=typeof e)throw new Error(`cannot decode google.protobuf.Timestamp from JSON: ${gi.json.debug(e)}`);const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const n=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(n))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Tt.parse(n/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const t=1e3*Number(this.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const e=(this.nanos+1e9).toString().substring(1);i="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(t).toISOString().replace(".000Z",i)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return Ti.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new Ti({seconds:Tt.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return(new Ti).fromBinary(e,t)}static fromJson(e,t){return(new Ti).fromJson(e,t)}static fromJsonString(e,t){return(new Ti).fromJsonString(e,t)}static equals(e,t){return gi.util.equals(Ti,e,t)}}var Ii,pi,Oi,Ni,Ai;Ti.runtime=gi,Ti.typeName="google.protobuf.Timestamp",Ti.fields=gi.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])),function(e){e[e.UNKNOWN_AVAILABILITY=0]="UNKNOWN_AVAILABILITY",e[e.MF_BUSINESS_HOURS=1]="MF_BUSINESS_HOURS",e[e.MF_24_HOURS=2]="MF_24_HOURS",e[e.ALWAYS_AVAILABLE_247=3]="ALWAYS_AVAILABLE_247"}(Ii||(Ii={})),gi.util.setEnumType(Ii,"support.Availability",[{no:0,name:"UNKNOWN_AVAILABILITY"},{no:1,name:"MF_BUSINESS_HOURS"},{no:2,name:"MF_24_HOURS"},{no:3,name:"ALWAYS_AVAILABLE_247"}]),function(e){e[e.UNKNOWN_CHANNEL=0]="UNKNOWN_CHANNEL",e[e.CHATBOT=1]="CHATBOT",e[e.LIMITED_EMAIL=2]="LIMITED_EMAIL",e[e.EMAIL=3]="EMAIL",e[e.CHAT=4]="CHAT",e[e.LIMITED_PHONE=5]="LIMITED_PHONE",e[e.PHONE=6]="PHONE"}(pi||(pi={})),gi.util.setEnumType(pi,"support.Channel",[{no:0,name:"UNKNOWN_CHANNEL"},{no:1,name:"CHATBOT"},{no:2,name:"LIMITED_EMAIL"},{no:3,name:"EMAIL"},{no:4,name:"CHAT"},{no:5,name:"LIMITED_PHONE"},{no:6,name:"PHONE"}]),function(e){e[e.UNKNOWN_LANGUAGE=0]="UNKNOWN_LANGUAGE",e[e.ENGLISH=1]="ENGLISH",e[e.SPANISH=2]="SPANISH",e[e.FRENCH=3]="FRENCH",e[e.GERMAN=4]="GERMAN",e[e.JAPANESE=5]="JAPANESE",e[e.PORTUGUESE=6]="PORTUGUESE"}(Oi||(Oi={})),gi.util.setEnumType(Oi,"support.Language",[{no:0,name:"UNKNOWN_LANGUAGE"},{no:1,name:"ENGLISH"},{no:2,name:"SPANISH"},{no:3,name:"FRENCH"},{no:4,name:"GERMAN"},{no:5,name:"JAPANESE"},{no:6,name:"PORTUGUESE"}]);class Ri extends nt{constructor(e){super(),this.days="",this.hours="",this.timezone="",gi.util.initPartial(e,this)}static fromBinary(e,t){return(new Ri).fromBinary(e,t)}static fromJson(e,t){return(new Ri).fromJson(e,t)}static fromJsonString(e,t){return(new Ri).fromJsonString(e,t)}static equals(e,t){return gi.util.equals(Ri,e,t)}}Ri.runtime=gi,Ri.typeName="support.DaysHours",Ri.fields=gi.util.newFieldList((()=>[{no:1,name:"days",kind:"scalar",T:9},{no:2,name:"hours",kind:"scalar",T:9},{no:3,name:"start_time",kind:"message",T:Ti},{no:4,name:"end_time",kind:"message",T:Ti},{no:5,name:"timezone",kind:"scalar",T:9}]));class Di extends nt{constructor(e){super(),this.isDuringOperatingHours=!1,this.description={case:void 0},this.isAvailable247=!1,gi.util.initPartial(e,this)}static fromBinary(e,t){return(new Di).fromBinary(e,t)}static fromJson(e,t){return(new Di).fromJson(e,t)}static fromJsonString(e,t){return(new Di).fromJsonString(e,t)}static equals(e,t){return gi.util.equals(Di,e,t)}}Di.runtime=gi,Di.typeName="support.AvailabilityDescriptor",Di.fields=gi.util.newFieldList((()=>[{no:1,name:"is_during_operating_hours",kind:"scalar",T:8},{no:2,name:"days_hours",kind:"message",T:Ri,oneof:"description"},{no:3,name:"single_description",kind:"scalar",T:9,oneof:"description"},{no:4,name:"is_available_247",kind:"scalar",T:8}]));class bi extends nt{constructor(e){super(),this.language=Oi.UNKNOWN_LANGUAGE,gi.util.initPartial(e,this)}static fromBinary(e,t){return(new bi).fromBinary(e,t)}static fromJson(e,t){return(new bi).fromJson(e,t)}static fromJsonString(e,t){return(new bi).fromJsonString(e,t)}static equals(e,t){return gi.util.equals(bi,e,t)}}bi.runtime=gi,bi.typeName="support.ChannelOption",bi.fields=gi.util.newFieldList((()=>[{no:1,name:"language",kind:"enum",T:gi.getEnumType(Oi)},{no:2,name:"availability",kind:"message",T:Di}]));class wi extends nt{constructor(e){super(),this.channel=pi.UNKNOWN_CHANNEL,this.alternativeOptions=[],gi.util.initPartial(e,this)}static fromBinary(e,t){return(new wi).fromBinary(e,t)}static fromJson(e,t){return(new wi).fromJson(e,t)}static fromJsonString(e,t){return(new wi).fromJsonString(e,t)}static equals(e,t){return gi.util.equals(wi,e,t)}}function Li(t,i,n){const o=null!=i?i:"";switch(t){case e.Critical:if(n){const e=n instanceof Error?n.message:String(n),t=n instanceof Error?n.stack:null,o={message:null!=i?i:"Error encountered during process",error:null!=e?e:"No additional error details provided",stack:null!=t?t:"No stack trace available",timestamp:(new Date).toISOString()};console.error("Critical error:",JSON.stringify(o,null,2))}else console.error("Critical error:",o);break;case e.NonCritical:console.warn(`Non-critical error: ${o}`);break;case e.Operational:console.warn(`Operational error: ${o}`);break;case e.UserError:console.error(`User error: ${o}`);break;case e.Uncaught:console.error(`Uncaught error: ${o}`);break;default:console.error(`Unknown error severity: ${o}`)}}function yi(t){const i=`Initialization aborted: No unified chat cookie found for ${t} chat.`;Li(e.Operational,i)}function Hi(t){const i=`Initialization aborted: Entry page key is null or undefined for ${t}.`;Li(e.NonCritical,i)}function vi(t){const i=`Initialization aborted: Invalid entry page key detected (${t}).`;Li(e.NonCritical,i)}function Ui(){const t="Initialization aborted: Chat disabled during non-operational hours.";Li(e.Operational,t)}function Pi(t){const i=`Initialization aborted: No valid entry page detected at ${t}.`;Li(e.Operational,i)}function Fi(){const t="Initialization aborted: LoginPageCookie not found to load chat at /login page.";Li(e.Operational,t)}function ki(t){const i=`Initialization aborted: Unsupported chat type detected during ${t} setup.`;Li(e.Critical,i)}function Bi(){const t="Initialization failed: Missing or invalid configuration details.";Li(e.Operational,t)}function Wi(t){const i=`Support Chat Initialization skipped. Is ${t} User.`;Li(e.Operational,i)}function Mi(){const t="Support Chat Initialization skipped. User identifiers are not available.";Li(e.Operational,t)}function xi(){const t="Allowing Support Chat Initialization. User identifiers are not available.";Li(e.NonCritical,t)}function Xi(t){const i=`DBX Chat Initialization: Skipped due to subdomain flag. Is DBX Chat enabled for subdomains: ${t}.`;Li(e.Operational,i)}function Gi(){const t="Initialization aborted: Unrecognized or untrusted domain detected.";Li(e.UserError,t)}function Vi(t,i){const n=`Initialization aborted: Missing entry path for host '${t}' at '${i}'.`;Li(e.Critical,n)}function Zi(){Li(ye.type,ye.message)}function zi(){const e=window;return e._DBX_ZOOM_CHAT_CLIENT||(e._DBX_ZOOM_CHAT_CLIENT={}),e._DBX_ZOOM_CHAT_CLIENT}function $i(){const e=window;return void 0===e.zoomChatManagerDebugEnabled&&(e.zoomChatManagerDebugEnabled=!1),window.localStorage&&window.localStorage.getItem("zoom_chat_manager_debug")?e.zoomChatManagerDebugEnabled=!0:console.log('Debugging is not enabled because "zoom_chat_manager_debug" is not set in localStorage.'),e.zoomChatManagerDebugEnabled}function Ki(e){const t=undefined;window.zoomChatManagerDebugEnabled&&console.debug&&console.debug(e)}function Ji(e,t,i,n){let o=`${e}=${t};expires=${i.toUTCString()};path=/`;n&&(o+=`;domain=${n}`),document.cookie=o}function Yi(e){const t=e+"=",i=document.cookie.split(";");for(const e of i){const i=e.trim();if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}function ji(e){const t=new Date;t.setTime(t.getTime()+36e5);const i=x[e];e===c.DBX_SALES_CHAT||e===c.DBX_CX_CHAT?Ji(g,i,t,M):e===c.DASH_SALES_CHAT?Ji(m,i,t,M):(e===c.FORMSWIFT_CHAT||e===c.HELLOSIGN_CX_CHAT)&&Ji(g,i,t)}function qi(){const e=new Date;e.setMinutes(e.getMinutes()+2),buildAndSetCookie(DBX_SALES_CHAT_LOGIN_COOKIE_KEY,DBX_SALES_CHAT_LOGIN_COOKIE,e)}function Qi(e,t){let i=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;t&&(i+=` domain=${t};`),document.cookie=i}function en(e){switch(e){case U:return c.DBX_SALES_CHAT;case F:return c.DBX_CX_CHAT;default:return c.UNSUPPORTED_CHAT}}function tn(){const e=Yi(g);return null==e?"":e}function nn(){const e=window;if(e._DBX_ZOOM_CHAT_CLIENT&&"function"==typeof e._DBX_ZOOM_CHAT_CLIENT.handleOnLogoutCallback){const t=getCookieValue(UNIFIED_CHAT_COOKIE_NAME);deleteUnifiedChatCookie(UNIFIED_CHAT_COOKIE_NAME,DBX_CHAT_WILDCARD_DOMAIN),e._DBX_ZOOM_CHAT_CLIENT.handleOnLogoutCallback(),t===SALES_CHAT_COOKIE_KEY&&createLoginCookieForDbxSalesChat()}}function on(e){console.error(e)}function an(e,t){var i,n,o,a,r,s,d,c;return(null===(i=t.docsendEntitlements)||void 0===i?void 0:i.includes(e))?l.DOCSEND_HOST:(null===(n=t.wwwDbxEntitlements)||void 0===n?void 0:n.includes(e))?l.WWW_DBX_HOST:(null===(o=t.helpCenterEntitlements)||void 0===o?void 0:o.includes(e))?l.HELP_CENTER_HOST:(null===(a=t.experienceEntitlements)||void 0===a?void 0:a.includes(e))?l.EXPERIENCE_HOST:(null===(r=t.signCenterEntitlements)||void 0===r?void 0:r.includes(e))?l.SIGN_CENTER_HOST:(null===(s=t.dashDbxEntitlements)||void 0===s?void 0:s.includes(e))?l.DASH_DBX_HOST:(null===(d=t.formswiftEntitlements)||void 0===d?void 0:d.includes(e))?l.FORMSWIFT_HOST:(null===(c=t.hellosignEntitlements)||void 0===c?void 0:c.includes(e))?l.HELLOSIGN_HOST:l.UNSUPPORTED_HOST}function rn(){return new Date}function sn(e){return new Date(e.toLocaleString("en-US",{timeZone:"America/Los_Angeles"}))}function dn(e){try{const t=undefined;return new URL(e).hostname}catch(e){return Li(De.type,De.message,e),""}}function ln(e){try{const t=undefined;return new URL(e).pathname}catch(e){return Li(be.type,be.message,e),""}}function cn(e,t){var i,n;const o=undefined,a=new Intl.DateTimeFormat("en-US",{timeZone:t,hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(e),r=parseInt((null===(i=a.find((e=>"hour"===e.type)))||void 0===i?void 0:i.value)||"0",10),s=parseInt((null===(n=a.find((e=>"minute"===e.type)))||void 0===n?void 0:n.value)||"0",10),d=new Date(e);return d.setHours(r,s),d}function un(t){if(!t)return Li(ve.type,ve.message),!1;try{if(!t.businessTimezone)return Li(Ue.type,Ue.message),!1;if(!t.businessHours)return Li(Pe.type,Pe.message),!1;const e=new Date,i=e.getDay();if(i<1||i>5)return!1;const n=cn(e,t.businessTimezone);if(!t.businessHours.customHourRanges)return Li(Fe.type,Fe.message),!1;const o=t.businessHours.customHourRanges,a=new Date(n);a.setHours(parseInt(o.startTimeHours,10)),a.setMinutes(parseInt(o.startTimeMins,10)),a.setSeconds(0),a.setMilliseconds(0);const r=new Date(n);return r.setHours(parseInt(o.endTimeHours,10)),r.setMinutes(parseInt(o.endTimeMins,10)),r.setSeconds(0),r.setMilliseconds(0),n>=a&&n<=r||(Ui(),!1)}catch(t){return Li(e.Critical,"Unexpected error in isWithinBusinessHours",t),!1}}function hn(e){const t=e.toLowerCase();return t in supportedLanguages?{languageName:supportedLanguages[t],description:`Supported language found: ${supportedLanguages[t]}`}:{languageName:"English",description:"Default to English as no supported/identified language was found"}}wi.runtime=gi,wi.typeName="support.LiveChannel",wi.fields=gi.util.newFieldList((()=>[{no:1,name:"channel",kind:"enum",T:gi.getEnumType(pi)},{no:2,name:"primary_option",kind:"message",T:bi},{no:3,name:"alternative_options",kind:"message",T:bi,repeated:!0},{no:4,name:"escalation_option",kind:"message",T:bi}])),function(t){function i(e){const t=localStorage.getItem(e);return null===t?(r(`No state found in local storage for key: ${e}`),null):JSON.parse(t)}function n(e){localStorage.removeItem(e)}function o(e,t){localStorage.setItem(e,JSON.stringify(t))}function a(e,t,n){try{const a=i(e);a&&n in a&&(a[n]=t,o(e,a))}catch(t){r(`Error updating local storage for key ${e}`,t)}}function r(t,i){Li(e.NonCritical,t,i)}t.getStateFromLocalStorage=i,t.deleteUnifiedChatStateFromLocalStorage=n,t.saveStateToLocalStorage=o,t.updateStateInLocalStorage=a,t.handleLocalStorageError=r}(Ni||(Ni={})),function(e){e[e.UNKNOWN_PRODUCT=0]="UNKNOWN_PRODUCT",e[e.DROPBOX=1]="DROPBOX",e[e.DASH=2]="DASH",e[e.DOCSEND=3]="DOCSEND",e[e.FORMSWIFT=4]="FORMSWIFT",e[e.REPLAY=5]="REPLAY"}(Ai||(Ai={})),gi.util.setEnumType(Ai,"support.Product",[{no:0,name:"UNKNOWN_PRODUCT"},{no:1,name:"DROPBOX"},{no:2,name:"DASH"},{no:3,name:"DOCSEND"},{no:4,name:"FORMSWIFT"},{no:5,name:"REPLAY"}]);const fn=()=>{Ki("onInitComplete: zoom_chat_client module Initialization : [SUCCESSFUL]")};function Cn(e){let t;return t=e===l.WWW_DBX_HOST?u.WWW_DBX_ENTITLEMENTS:e===l.SIGN_CENTER_HOST?u.SIGN_CENTER_ENTITLEMENTS:e===l.HELP_CENTER_HOST?u.HELP_CENTER_ENTITLEMENTS:e===l.EXPERIENCE_HOST?u.EXPERIENCE_ENTITLEMENTS:u.UNSUPPORTED_ENTITLEMENTS,t}function En(e,t){let i;if(e===u.WWW_DBX_ENTITLEMENTS)i={wwwDbxEntitlements:t[e]};else if(e===u.HELP_CENTER_ENTITLEMENTS)i={helpCenterEntitlements:t[e]};else if(e===u.EXPERIENCE_ENTITLEMENTS)i={experienceEntitlements:t[e]};else if(e===u.SIGN_CENTER_ENTITLEMENTS)i={signCenterEntitlements:t[e]};else{if(e!==u.HELLOSIGN_ENTITLEMENTS){const e=undefined;throw new Error("Invalid entitlements key")}i={hellosignEntitlements:t[e]}}return i}function Sn(e,t){t&&(e.cxChatButtonLanguage=t)}function _n(e,t,i){Ki(`logUnifiedChatStatus: [PRE-CHECKS] Unified chat cookie Key: ${t}`),Ki(`logUnifiedChatStatus: [PRE-CHECKS]  Unified chat cookie availability: ${e}`),Ki(`logUnifiedChatStatus: [PRE-CHECKS] Domain message: ${i}`)}function gn(){return window.location.href}function mn(e){const t=window;t.dbxCxChatButtonLanguage||(t.dbxCxChatButtonLanguage={}),Sn(t.dbxCxChatButtonLanguage,e)}async function Tn(){const e=zi();if(e&&"function"==typeof e.initZoomChatReloadProcess){const t=undefined;return!!await e.initZoomChatReloadProcess()}return!1}const In=async e=>{if(e){let t;switch(e){case Language.UNKNOWN_LANGUAGE||Language.ENGLISH:t="en-US";break;case Language.SPANISH:t="es-ES";break;case Language.FRENCH:t="fr-FR";break;case Language.GERMAN:t="de-DE";break;case Language.JAPANESE:t="ja-JP";break;case Language.PORTUGUESE:t="pt-PT";break;default:t="UNKNOWN"}const i=undefined;await On(ChatType.DBX_CX_CHAT)&&mn(t)}},pn=async()=>{await On(ChatType.DBX_SALES_CHAT)},On=async e=>{const t=undefined;if(!document.getElementById(UNIFIED_CHAT_IFRAME_ID)||document.cookie.includes(UNIFIED_CHAT_COOKIE_NAME))return zoomChatManagerExceptionHandler(ErrorSeverity.Critical,ZoomChatIframeEmbedderErrorMessages.ERROR_IFRAME_NOT_FOUND_OR_COOKIE_SET),!1;const i=undefined;if(!await Tn())return zoomChatManagerExceptionHandler(ErrorSeverity.Critical,ZoomChatIframeEmbedderErrorMessages.ERROR_ZOOM_CHAT_RELOAD_FAILED),!1;const n=JSON.parse(localStorage.getItem(UNIFIED_CHAT_LOCAL_STORAGE_KEY)||"{}");return e===ChatType.DBX_SALES_CHAT?ZoomChatLocalStorageManager.saveStateToLocalStorage(DBX_SALES_CHAT_ON_CHECKOUT_FLAG,"true"):e===ChatType.DBX_CX_CHAT&&(n.reload=!0,ZoomChatLocalStorageManager.saveStateToLocalStorage(UNIFIED_CHAT_LOCAL_STORAGE_KEY,n)),!0};function Nn(){const e=zi();e&&"function"==typeof e.handleOpenChatWindowCallback?e.handleOpenChatWindowCallback():Li(Me.type,Me.message)}const An=e=>{e.style.display=""};function Rn(){const e=undefined,t=(new Date).getDay();return 0===t||6===t}function Dn(){if(document.cookie.includes(UNIFIED_CHAT_COOKIE_NAME)){nn();const e=document.getElementById(UNIFIED_CHAT_IFRAME_ID);e&&(e.style.display="none")}}function bn(){try{const e=getOrInitZoomChatClient();e&&"function"==typeof e.consentNotGrantedDidNotLoadChatClient&&e.consentNotGrantedDidNotLoadChatClient()}catch(e){zoomChatManagerExceptionHandler(ERROR_ZOOM_CHAT_CONSENT_DECLINED.type,ERROR_ZOOM_CHAT_CONSENT_DECLINED.message,e)}}function wn(){try{const e=zi();if(!e||"function"!=typeof e.consentGrantedProceedDBXSalesChatToLoad)return void Li(We.type,We.message);e.consentGrantedProceedDBXSalesChatToLoad()}catch(e){Li(He.type,He.message,e)}}function Ln(){const e=undefined;return Yi(P)===T}function yn(e,t){t&&(e.selectedProductSupportPackage=t)}function Hn(e){const t=window;t.dbxSelectedProductSupportPackage||(t.dbxSelectedProductSupportPackage={}),yn(t.dbxSelectedProductSupportPackage,e)}const vn=async e=>{let t;if(t="",e&&(e.product===Product.DASH?t="PREMIUM_SUPPORT_DASH_CHAT":e.product===Product.DROPBOX&&(t="PREMIUM_SUPPORT_CX_CHAT")),!t)return;const i=undefined;await On(ChatType.DBX_CX_CHAT)&&Hn(t)};var Un,Pn,Fn;!function(e){e.UNI_NAV="UNI_NAV",e.ZOOM_CHAT="ZOOM_CHAT",e.INTEGRATION_TEST="INTEGRATION_TEST"}(Un||(Un={})),function(e){e.BOOTSTRAP="BOOTSTRAP"}(Pn||(Pn={})),function(e){e.EMBEDDER_READY="EMBEDDER_READY",e.CLIENT_MESSAGE="CLIENT_MESSAGE"}(Fn||(Fn={}));var kn=function(){function e(e,t,i,n){var o=this,a;this.port=new Promise((function(e,t){a=e}));var r=new URL(i),s=new URLSearchParams(r.search);s.append("origin",location.origin),n&&s.append("locale",n),r.search=String(s),this.iframe=Object.assign(document.createElement("iframe"),{src:String(r),style:"border:none;background-color:transparent;",width:"100%",height:"1",frameBorder:"0",allowTransparency:"true",name:e});var d=function(i){if(i.origin===r.origin&&i.source===o.iframe.contentWindow&&i.data.key===Pn.BOOTSTRAP){if(i.data.namespace!==e)return;removeEventListener("message",d);var n=i.ports[0];n.onmessage=function(e){e.data.key===Fn.CLIENT_MESSAGE&&t(e.data.clientData)},n.postMessage({key:Fn.EMBEDDER_READY}),a(n)}};addEventListener("message",d)}return e.prototype.sendMessage=function(e){var t={key:Fn.CLIENT_MESSAGE,clientData:e};this.port.then((function(e){e.postMessage(t)}))},e}(),Bn=function(){function e(e,t){var i=new MessageChannel,n=new URLSearchParams(location.search).get("origin")||"";if(!/^https?:\/\/[a-zA-Z0-9.-]+(:[0-9]+)?$/.test(n))throw new Error("Invalid parent origin");var o=i.port1,a;if(this.port=new Promise((function(e,t){a=e})),o.onmessage=function(e){e.data.key===Fn.EMBEDDER_READY?a(o):e.data.key===Fn.CLIENT_MESSAGE&&t(e.data.clientData)},n.length){var r={key:Pn.BOOTSTRAP,namespace:e};window.parent.postMessage(r,n,[i.port2])}}return e.prototype.sendMessage=function(e){var t={key:Fn.CLIENT_MESSAGE,clientData:e};this.port.then((function(e){e.postMessage(t)}))},e}(),Wn,Mn,xn,Xn,Gn;!function(e){e.getBrowserStatus="FETCH_BROWSER_STATUS",e.deleteAttachedIframe="DELETE_ATTACHED_IFRAME",e.reloadPageAfterChatEnds="RELOAD_PAGE_AFTER_CHAT_ENDS",e.getDocsendCurrentUserInfo="FETCH_DOCSEND_CURRENT_USER_INFO",e.getDropboxCurrentUserInfo="FETCH_DROPBOX_CURRENT_USER_INFO",e.getHellosignCurrentUserInfo="FETCH_HELLOSIGN_CURRENT_USER_INFO",e.getFormswiftCurrentUserInfo="FETCH_FROMSWIFT_CURRENT_USER_INFO",e.getBrowserLanguageInfo="FETCH_BROWSER_LANGUAGE_INFO",e.getBrowserPathInfo="FETCH_DBX_BROWSER_PATH_INFO",e.getChatTypeInfo="FETCH_CHAT_TYPE_INFO",e.getUserSelectedProductSupportPackageInfo="FETCH_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO",e.endChatButtonClicked="END_CHAT_BUTTON_CLICKED",e.fetchZoomChatCredentials="FETCH_ZOOM_CHAT_CREDENTIALS",e.addScriptTagSuccess="ADD_SCRIPT_TAG_SUCCESS",e.addScriptTagError="ADD_SCRIPT_TAG_ERROR",e.expandButtonClicked="EXPAND_BUTTON_CLICKED",e.minimizeButtonClicked="MINIMIZE_BUTTON_CLICKED",e.chatWidgetLoaded="CHAT_WIDGET_LOADED_INSIDE_IFRAME",e.chatWidgetNotLoaded="CHAT_WIDGET_NOT_LOADED_INSIDE_IFRAME",e.setCookieForDBXSalesChat="SET_COOKIE_FOR_DBX_SALES_CHAT",e.getCxChatRequestedLanguageInfo="GET_CX_CHAT_REQUESTED_LANGUAGE_INFO"}(Wn||(Wn={})),function(e){e.sendBrowserStatus="SEND_BROWSER_STATUS",e.sendDocsendCurrentUserInfo="SEND_DOCSEND_CURRENT_USER_INFO",e.sendDropboxCurrentUserInfo="SEND_DROPBOX_CURRENT_USER_INFO",e.sendFormswiftCurrentUserInfo="SEND_FORMSWIFT_CURRENT_USER_INFO",e.sendHellosignCurrentUserInfo="SEND_HELLOSIGN_CURRENT_USER_INFO",e.sendCurrentChatTypeInfo="SEND_CURRENT_CHAT_TYPE_INFO",e.sendUserSelectedProductSupportPackageInfo="SEND_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO",e.sendBrowserPathInfo="SEND_DBX_BROWSER_CURRENT_PATH_INFO",e.sendBrowserCurrentLanguageInfo="SEND_BROWSER_CURRENT_LANGUAGE_INFO",e.sendZoomChatCredentials="SEND_ZOOM_CHAT_CREDENTIALS",e.isChatWidgetLoadedInsideIframe="IS_CHAT_WIDGET_LOADED_INSIDE_IFRAME",e.performLogoutCallback="ZOOM_CHAT_LOGOUT_CALLBACK",e.setZoomChatWidgetToOpenWindow="SET_CHAT_WINDOW_TO_OPEN_MODE",e.callbackWhenUserSwitchesCompany="USER_PERRFOMS_SWITCH_COMMPANY_ONGOING_CHAT_SESSION",e.sendCxChatRequestedLanguageInfo="SEND_CX_CHAT_REQUESTED_LANGUAGE_INFO"}(Mn||(Mn={})),function(e){e.REQUEST="REQUEST",e.RESPONSE="RESPONSE"}(xn||(xn={})),function(e){e.REQUEST="REQUEST",e.RESPONSE="RESPONSE"}(Xn||(Xn={})),function(e){e.success="SUCCESS",e.failure="FAILED"}(Gn||(Gn={}));const Vn={action:Mn.performLogoutCallback,message:ue.LOGOUT_CALLBACK,messagetype:xn.REQUEST},Zn=Wn.setCookieForDBXSalesChat,zn=ce.SET_COOKIE_FOR_DBX_SALES_CHAT,$n=Xn.REQUEST,Kn=Wn.fetchZoomChatCredentials,Jn=ce.FETCH_ZOOM_CHAT_CREDENTIALS,Yn=Xn.REQUEST,jn={action:Mn.isChatWidgetLoadedInsideIframe,message:ue.CHECK_CHAT_WIDGET_STATUS,messagetype:xn.REQUEST},qn={action:Mn.setZoomChatWidgetToOpenWindow,message:ue.SET_ZOOM_CHAT_WIDGET_TO_OPEN_WINDOW,messagetype:xn.REQUEST},Qn=Wn.deleteAttachedIframe,eo=ce.DELETE_ATTACHED_IFRAME_ON_END_CHAT_BUTTON_CLICK,to=Xn.REQUEST,io=Wn.getDocsendCurrentUserInfo,no=ce.FETCH_DOCSEND_CURRENT_USER_INFO,oo=Xn.REQUEST,ao=Wn.getDropboxCurrentUserInfo,ro=ce.FETCH_DROPBOX_CURRENT_USER_INFO,so=Xn.REQUEST,lo=Wn.getFormswiftCurrentUserInfo,co=ce.FETCH_FORMSWIFT_CURRENT_USER_INFO,uo=Xn.REQUEST,ho=Wn.getBrowserLanguageInfo,fo=ce.FETCH_BROWSER_LANGUAGE_INFO,Co=Xn.REQUEST,Eo=Wn.getHellosignCurrentUserInfo,So=ce.FETCH_HELLOSIGN_CURRENT_USER_INFO,_o=Xn.REQUEST,go=Wn.getBrowserPathInfo,mo=ce.FETCH_BROWSER_PATH_INFO,To=Xn.REQUEST,Io=Wn.getCxChatRequestedLanguageInfo,po=ce.FETCH_CX_CHAT_REQUESTED_LANGUAGE_INFO,Oo=Xn.REQUEST,No=Wn.getUserSelectedProductSupportPackageInfo,Ao=ce.FETCH_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO,Ro=Xn.REQUEST,Do=Wn.getChatTypeInfo,bo=ce.FETCH_CHAT_TYPE_INFO,wo=Xn.REQUEST,Lo=Wn.endChatButtonClicked,yo=ce.END_CHAT_BUTTON_CLICKED,Ho=Xn.REQUEST,vo=Wn.getBrowserStatus,Uo=ce.GET_BROWSER_STATUS,Po=Xn.REQUEST,Fo=Wn.addScriptTagSuccess,ko=ce.SCRIPT_TAG_SUCCESS,Bo=Xn.RESPONSE,Wo=Wn.addScriptTagError,Mo=ce.SCRIPT_TAG_ERROR,xo=Xn.RESPONSE,Xo=Wn.expandButtonClicked,Go=ce.EXPAND_BUTTON_CLICKED,Vo=Xn.RESPONSE,Zo=Wn.minimizeButtonClicked,zo=ce.MINIMIZE_BUTTON_CLICKED,$o=Xn.RESPONSE,Ko=Wn.chatWidgetLoaded,Jo=ce.CHAT_WIDGET_LOADED,Yo=Xn.RESPONSE,jo=Wn.chatWidgetLoaded,qo=Gn.success,Qo=ce.CHAT_WIDGET_LOADED,ea=Xn.RESPONSE,ta=s.ChatBubble,ia=Wn.chatWidgetLoaded,na=Gn.success,oa=ce.CHAT_WIDGET_LOADED,aa=Xn.RESPONSE,ra=s.ChatWindow,sa=Wn.chatWidgetNotLoaded,da=ce.CHAT_WIDGET_NOT_LOADED,la=Gn.failure,ca=Xn.RESPONSE,ua={currentEndToChatState:o.DoNotTerminateChatSession},ha={currentIframeState:r.Hiddden,currentUserActionState:t.ChatIsNotRequested,currentWidgetState:s.ChatBubble,currentCompanyState:d.UserNotSwtichCompany},fa={currentIframeState:r.Visible,currentUserActionState:t.ChatIsRequested,currentWidgetState:s.ChatWindow,currentCompanyState:d.UserNotSwtichCompany},Ca={currentIframeState:r.Visible,currentUserActionState:t.ChatIsRequested,currentWidgetState:s.ChatBubble,currentCompanyState:d.UserNotSwtichCompany},Ea="undefined"!=typeof self&&self?self:window;function Sa(e){const t=undefined;(Ea._DBX_UXA_bufferedClosures=Ea._DBX_UXA_bufferedClosures||[]).push(e),ga()}function _a(){Ea._DBX_UXA_isUxaListening=!0,ga()}function ga(){if(!Ea._DBX_UXA_isUxaListening)return;const e=Ea._DBX_UXA_bufferedClosures=Ea._DBX_UXA_bufferedClosures||[],t=[...e];e.length=0;for(const e of t)e()}function ma(){Ea._DBX_UXA_isUxaListening=void 0,Ea._DBX_UXA_bufferedClosures=void 0;try{delete Ea._DBX_UXA_isUxaListening,delete Ea._DBX_UXA_bufferedClosures}catch(e){}}function Ta(e,t={detail:null}){if("function"==typeof CustomEvent)return new CustomEvent(e,t);const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!0,!0,t.detail),i}function Ia(e,t){window.dispatchEvent(Ta(e,t))}const pa=(e,t)=>{Sa((()=>{Ia("zoom_chat_custom_event",{detail:{eventType:e,extra:t}})}))};function Oa(e,t,i){i.chatType!==c.DOCSEND_CHAT&&pa(e,{chat_type:i.chatType,chat_interaction_type:i.chatInteractionType,event_details:t,surface_screen_height:i.surfaceScreenHeight,surface_screen_width:i.surfaceScreenWidth,external_tag:i.externalTag||"",platform:i.platform,time_until_zoom_chat_interaction:i.timeUntilchatInteraction,total_zoom_chat_duration:i.totalChatDurationInSec})}function Na(e){Oa(f.INITIALIZED,"Chat initiation has started",e)}function Aa(e){Oa(f.SUCCESS,"Chat initiation successful",e)}function Ra(e){Oa(f.FAILED,"Chat initiation failed",e)}function Da(e){Oa(f.NETWORK_FAILED,"Chat initiation failed due to network issue",e)}function ba(e){Oa(f.TIMEOUT_FAILED,"Chat initiation failed due to timeout",e)}function wa(e){Oa(f.EXPAND,"User clicked on the chat bubble",e)}function La(e){Oa(f.MINIMIZE,"User clicked on the chat minimize button",e)}function ya(e){Oa(f.END,"The chat engagement was ended",e)}function Ha(e){Oa(f.CHATREQUESTED,"User requested a chat",e)}function va(e){Oa(f.DISPLAYED,"Zoom chat displayed to ther user",e)}function Ua(e){Oa(f.LOGOUT,"Chat ended by user logout",e)}function Pa(e){Ki("registerZoomChatConsentDeclinedCallback: User declined the cookie for the chat, Callback is triggered, not initializing zoom_chat_client"),Oa(f.CONSENTDECLINED,"User declined coockie consent, did not load zoom chat",e)}function Fa(e){Oa(f.SALESCHAT_DISALLOWED_COUNTRY,"Sales chat is not allowed in the requested country",e)}function ka(e){return null!==Yi(e)}function Ba(e){return null!==Yi(e)}function Wa(e){return null!==Yi(e)}function Ma(t,i){var n;const o=undefined,a=document.cookie.split("; ").find((e=>e.startsWith(`${t}=`)));if(!a)return!1;try{const e=decodeURIComponent(a.split("=")[1]),t=JSON.parse(e);if(!t.hasOwnProperty("categories")||"object"!=typeof t.categories)return!1;if(!t.categories.hasOwnProperty(i))return!1;const o=undefined;return Boolean(null===(n=null==t?void 0:t.categories)||void 0===n?void 0:n[i])}catch(i){return Li(e.Critical,`Error parsing cookie ${t}`,i),!1}}function xa(){const e=undefined;return ka(g)}class Xa{constructor(e){this.args=e,this.el=null,this.isChatIframeReady=!1,this.initTimeout=null,this.chatStartInitTime=null,this.chatEndInitTime=null,this.chatElapsedTime=null,this.handleIframeServiceMessages=e=>{e.action===Wn.getDocsendCurrentUserInfo?this.sendDocsendCurrentUserInfoToIframeService():e.action===Wn.getDropboxCurrentUserInfo?this.sendDropboxCurrentUserInfoToIframeService():e.action===Wn.getFormswiftCurrentUserInfo?this.sendFormswiftCurrentUserInfoToIframeService():e.action===Wn.getBrowserPathInfo?this.sendDropboxCurrentPathInfoToIframeService():e.action===Wn.getHellosignCurrentUserInfo?this.sendHellosignCurrentUserInfoToIframeService():e.action===Wn.getChatTypeInfo?this.sendCurrentChatTypeInfoToIframeService():e.action===Wn.addScriptTagSuccess?this.attachScriptTagSuccessToFrame():e.action===Wn.addScriptTagError?this.attachScriptTagErrorToFrame(e):e.action===Wn.fetchZoomChatCredentials?this.executeAttachZoomChatScriptTagToIframe():e.action===Wn.expandButtonClicked||e.action===Wn.minimizeButtonClicked?this.handleChatWidgetInteraction(e):e.action===Wn.chatWidgetLoaded||e.action===Wn.chatWidgetNotLoaded?this.validateChatWidgetLoadStatus(e):e.action===Wn.endChatButtonClicked?this.performCleanUpAsUserEndsTheChat():e.action===Wn.deleteAttachedIframe?this.detachZoomChatIframe():e.action===Wn.getBrowserStatus?this.sendBrowserStatusToIframeService():e.action===Wn.setCookieForDBXSalesChat?this.setCookieForDBXSalesChat():e.action===Wn.getCxChatRequestedLanguageInfo?this.sendDropboxCxChatRequestedInfoToIframeService():e.action===Wn.getUserSelectedProductSupportPackageInfo&&this.sendButtonSelectedProductSupportPackageInfoToIframeService()},this.iframeEmbedder=new kn(Un.ZOOM_CHAT,this.handleIframeServiceMessages,e.iframeSrc,void 0),this.isMobileOrTablet=this.detectMobileOrTablet(),this.registerZoomChatClientReloadCallback(),this.registerLogoutCallback(),this.registerSwitchCompanyCallback(),this.registerOpenChatWindowCallback(),this.registerInitZoomChatClientReloadCallback(),this.registerAllowDBXSalesChatToLoadCallback(),this.registerZoomChatConsentDeclinedCallback(),this.registerShowHelloSignCxChatCallback()}registerShowHelloSignCxChatCallback(){const e=undefined;if(this.getInitializedChatTypeFromProfile()===c.HELLOSIGN_CX_CHAT){Ki("registerShowHelloSignCxChatCallback: Registered ShowHelloSignCXChat method to display HelloSign CX chat");const e=undefined;zi().showHelloSignCxChat=()=>this.handleShowHelloSignCxChat()}}async handleShowHelloSignCxChat(){Ki("handleShowHelloSignCxChat: Checking if chat reload is needed.");const t=document.getElementById(N);if(this.shouldReloadHelloSignCxChat(t)){Ki("handleShowHelloSignCxChat: Reloading chat client.");const e=await Tn();this.handleReloadResult(e)}else Ki("handleShowHelloSignCxChat: Iframe not found or cookie is set, not reloading."),Li(e.Critical,fe.ERROR_IFRAME_NOT_FOUND_OR_COOKIE_SET)}shouldReloadHelloSignCxChat(e){Ki("shouldReloadHelloSignCxChat: Checking reload conditions.");const t=!0===Ni.getStateFromLocalStorage(y),i=!!e&&!document.cookie.includes(g);return Ki(`shouldReloadHelloSignCxChat: Logout flag set: ${t}, Iframe reload needed: ${i}`),t&&(Ki("shouldReloadHelloSignCxChat: Removing chat session logout flag."),this.removeChatSessionLogoutFlag()),t||i}handleReloadResult(t){Ki(`handleReloadResult: Reload success status: ${t}`),t?(Ki("handleReloadResult: Updating local storage to reload state."),this.updateLocalStorageToReloadState()):(Ki("handleReloadResult: Zoom chat reload failed."),Li(e.Critical,fe.ERROR_ZOOM_CHAT_RELOAD_FAILED))}updateLocalStorageToReloadState(){Ki("updateLocalStorageToReloadState: Setting reload flag in local storage.");const e=JSON.parse(localStorage.getItem(D)||"{}");e.reload=!0,localStorage.setItem(D,JSON.stringify(e))}registerFormSwiftChatDisplayHandler(){Ki("registerFormSwiftChatDisplayHandler: Registered showFormSwiftChat method to display FormSwift chat");const e=undefined;zi().showFormSwiftChat=async()=>{try{const e=this.shouldDisplayFormswiftChat();if(Ki(`showFormSwiftChat: Should display FormSwift chat: ${e}`),!e)return void await this.handleReInitFormswiftChat();this.proceedToDisplayFormswiftChat()}catch(e){this.shouldDisplayFormswiftChatError(e)}}}registerZoomChatClientReloadCallback(){const t=undefined;zi().reloadZoomChatClient=async()=>{try{const t=await this.reInitializeZoomChatClient();if(t)Ki("registerZoomChatClientReloadCallback: Re-initialization complete.");else{const i=`registerZoomChatClientReloadCallback: Returned Re-initialization status ${t}`;Li(e.Critical,i)}return t}catch(t){return Li(e.Critical,"reInitializeZoomChatClient is failed",t),!1}}}registerInitZoomChatClientReloadCallback(){const t=undefined;zi().initZoomChatReloadProcess=async()=>{try{return await this.startZoomChatIframeReloadProcess(),!0}catch(t){return Li(e.Critical,"Error during Zoom chat reload process.",t),!1}}}static getInstance(e){return Xa.instance||(Xa.instance=new Xa(e)),Xa.instance}updateArgs(e){this.args={...this.args,...e}}clearInitializationTimeout(){try{if(!this.initTimeout)return void Ki("clearInitializationTimeout: No active timeout to clear.");clearTimeout(this.initTimeout),this.initTimeout=null,Ki("clearInitializationTimeout: Successfully cleared the initialization timeout.")}catch(t){Li(e.Critical,fe.ERROR_CLEARING_TIMEOUT,t)}}static setChatUri(e){Xa.chatUri=e}static setChatApiKey(e){Xa.chatApiKey=e}static setChatDataEnv(e){Xa.chatDataEnv=e}static getChatUri(){return Xa.chatUri}static getChatApiKey(){return Xa.chatApiKey}static getChatDataEnv(){return Xa.chatDataEnv}deleteUnifiedChatCookie(e,t){Ki(`deleteUnifiedChatCookie: Removing the Unified Chat Cookie : ${e} `);let i=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;t&&(i+=` domain=${t};`),document.cookie=i}getIsMobileOrTablet(){return this.isMobileOrTablet}detectMobileOrTablet(){return window.matchMedia("(max-width: 1024px)").matches}getScreenHeight(){return`${window.screen.height}px`}getScreenWidth(){return`${window.screen.width}px`}getPlatformInfo(){return navigator.platform}getDelayBetweenChatDisplayAndFirstInteraction(){const e=Ni.getStateFromLocalStorage(w),t=Ni.getStateFromLocalStorage(b);if(!e||!t)return 0;const i=new Date(e),n=new Date(t);return isNaN(i.getTime())||isNaN(n.getTime())?0:(n.getTime()-i.getTime())/1e3}calculateTotalChatDuration(){const e=Ni.getStateFromLocalStorage(b),t=Ni.getStateFromLocalStorage(L);if(!e||!t)return 0;const i=new Date(e),n=new Date(t);return isNaN(i.getTime())||isNaN(n.getTime())?0:(n.getTime()-i.getTime())/1e3}updateChatInteractionType(e){this.args.chatInitProfile&&(this.args.chatInitProfile.chatInteractionType=e)}handleZoomUXAEvent(t){const i={chatType:this.getInitializedChatTypeFromProfile(),chatInteractionType:this.getChatInteractionTypeFromProfile(),surfaceScreenHeight:this.getScreenHeight(),surfaceScreenWidth:this.getScreenWidth(),platform:this.getPlatformInfo(),timeUntilchatInteraction:String(this.getDelayBetweenChatDisplayAndFirstInteraction()),totalChatDurationInSec:String(this.calculateTotalChatDuration())};switch(t){case f.INITIALIZED:Na(i);break;case f.SUCCESS:Aa(i);break;case f.FAILED:Ra(i);break;case f.NETWORK_FAILED:Da(i);break;case f.TIMEOUT_FAILED:ba(i);break;case f.EXPAND:wa(i);break;case f.MINIMIZE:La(i);break;case f.END:ya(i);break;case f.CHATREQUESTED:Ha(i);break;case f.DISPLAYED:va(i);break;case f.LOGOUT:Ua(i);break;case f.CONSENTDECLINED:Pa(i);break;case f.SALESCHAT_DISALLOWED_COUNTRY:Fa(i);break;default:const n=`Unknown Zoom chat UXA event encountered: ${t}`;Li(e.Critical,n)}}isValidSalesChatAppState(){const e=Ni.getStateFromLocalStorage(D);if(Ki(`isValidSalesChatAppState: dbxUnifiedChatState : ${e}`),!e||"object"!=typeof e)return Ki("isValidSalesChatAppState: No state found in local storage for key: dbx_unified_chat_state"),!1;const t=e.hasOwnProperty("currentIframeState")&&e.hasOwnProperty("currentUserActionState")&&e.hasOwnProperty("currentWidgetState")&&e.hasOwnProperty("currentCompanyState");Ki(`isValidSalesChatAppState: hasRequiredProperties : ${t}`);const i=e.hasOwnProperty("pageHistory")||e.hasOwnProperty("reload");return Ki(`isValidSalesChatAppState: hasInvalidProperties : ${i}`),Ki(`isValidSalesChatAppState: Returning : ${t&&!i}`),t&&!i}cleanUpUnifiedChatState(){const e=this.getInitializedChatTypeFromProfile();if(X.includes(e)){if(e===c.DBX_SALES_CHAT&&!this.isValidSalesChatAppState())return;localStorage.removeItem(D)}}scheduleChatAndIframeToVisible(e,t){this.proceedToDisplayChat(e,t),this.setChatIframeVisibilityAndState()}setIframeVisibilityState(){Ki("setIframeVisibilityState: Updating local storage for iframe visibility"),Ni.updateStateInLocalStorage(D,r.Visible,"currentIframeState")}setUserRequestedChatState(e){Ki(`setUserRequestedChatState: First-time Initialization Detected: ${e}: Setting CHAT IS REQUESTED`),Ni.updateStateInLocalStorage(D,t.ChatIsRequested,"currentUserActionState")}setChatWidgetWindowState(){Ni.updateStateInLocalStorage(D,s.ChatWindow,"currentWidgetState")}setChatWidgetBubbleState(){Ni.updateStateInLocalStorage(D,s.ChatBubble,"currentWidgetState")}logProactiveStartupTimer(e){Ki(`logProactiveStartupTimer: Setting Proactive timer to (${e} seconds)`)}setChatIframeVisibilityAndState(){this.setUnifiedChatIframeToVisible(this.iframeEmbedder.iframe),this.setIframeVisibilityState()}proceedToLoadChatAsProActive(e,t){const i=this.calculateRemainingStartupTime();this.logProactiveStartupTimer(i),0===i?this.scheduleChatAndIframeToVisible(e,t):setTimeout((()=>{this.scheduleChatAndIframeToVisible(e,t),Ki(`proceedToLoadChatAsProActive: Scheduled proactive execution finished after (${i} seconds).`)}),1e3*i)}calculateRemainingStartupTime(){var e,t;let i=(null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.identifiedChatStartUpTime)||0;const n=parseFloat(((null!==(t=this.chatElapsedTime)&&void 0!==t?t:0)/1e3).toFixed(2));return i=parseFloat((i-n).toFixed(2)),i}handleZoomChatInitialDisplay(){const e=new Date;Ki(`chat first displayed time ${e}`),Ni.saveStateToLocalStorage(w,e),this.handleZoomUXAEvent(f.DISPLAYED)}setChatWidgetToWindowMode(e,t){Ki(`setChatWidgetToWindowMode: First-time Initialization Detected: ${e} : Setting ChatWidget to window Mode`),this.iframeEmbedder.sendMessage(qn),t.action=Wn.expandButtonClicked}proceedToDisplayChat(e,t){const i=Ni.getStateFromLocalStorage(D);e!==c.DBX_SALES_CHAT&&e!==c.HELLOSIGN_CX_CHAT||i.currentWidgetState!==s.ChatBubble||(this.setChatWidgetToWindowMode(e,t),this.handleZoomChatInitialDisplay()),e!==c.DBX_SALES_CHAT&&e!==c.HELLOSIGN_CX_CHAT&&(ji(e),this.setUserRequestedChatState(e),this.handleZoomUXAEvent(f.CHATREQUESTED))}getIdentifiedHost(){var e,t;const i=undefined;return null!==(t=null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.identifiedHost)&&void 0!==t?t:null}getInitializedChatTypeFromProfile(){var e,t;const i=undefined;return null!==(t=null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.identifiedChat)&&void 0!==t?t:c.UNSUPPORTED_CHAT}getChatInteractionTypeFromProfile(){var e,t;const i=undefined;return null!==(t=null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.chatInteractionType)&&void 0!==t?t:h.UNSUPPORTED_CHAT}createChatTypeInfo(){return{identifiedChat:this.getInitializedChatTypeFromProfile()}}getIdentifiedPathFromProfile(){var e,t;const i=undefined;return{identifiedPath:ln(null!==(t=null===(e=this.args.chatInitProfile)||void 0===e?void 0:e.identifiedHref)&&void 0!==t?t:"")}}sendCurrentChatTypeInfoToIframeService(){const e=this.createChatTypeInfo(),t={action:Mn.sendCurrentChatTypeInfo,messageType:xn.REQUEST,dbxCurrentChatTypeInfo:JSON.stringify(e),message:ue.SEND_CURRENT_CHAT_TYPE_INFO};this.iframeEmbedder.sendMessage(t)}sendDropboxCurrentPathInfoToIframeService(){const e=this.getIdentifiedPathFromProfile(),t={action:Mn.sendBrowserPathInfo,messageType:xn.REQUEST,dbxCurrentPathInfo:JSON.stringify(e),message:ue.SEND_BROWSER_PATH_INFO};this.iframeEmbedder.sendMessage(t)}isIdentifiedHostSupportedToLoadChat(){var t,i,n,o,a,r,s;const d=null===(t=this.args)||void 0===t?void 0:t.chatInitProfile,l=this.getIdentifiedHost();let c=!1;if(null!==l&&(null==d?void 0:d.supportedEntitlements))if(null===(i=d.supportedEntitlements.wwwDbxEntitlements)||void 0===i?void 0:i.includes(l))c=!0;else if(null===(n=d.supportedEntitlements.docsendEntitlements)||void 0===n?void 0:n.includes(l))c=!0;else if(null===(o=d.supportedEntitlements.signCenterEntitlements)||void 0===o?void 0:o.includes(l))c=!0;else if(null===(a=d.supportedEntitlements.dashDbxEntitlements)||void 0===a?void 0:a.includes(l))c=!0;else if(null===(r=d.supportedEntitlements.formswiftEntitlements)||void 0===r?void 0:r.includes(l))c=!0;else if(null===(s=d.supportedEntitlements.hellosignEntitlements)||void 0===s?void 0:s.includes(l))c=!0;else{const t=`Identified Host '${l}' is not supported in any entitlements.`;Li(e.Critical,t)}else Li(e.Critical,fe.IDENTIFIED_HOST_OR_SUPPORTED_ENTITLEMENTS_NULL);return c}handleIframeExecutionError(t){Li(e.Critical,fe.IFRAME_EXECUTION_ERROR,t)}handleIframeContentWindowError(){Li(e.Critical,fe.IFRAME_CONTENT_WINDOW_NULL_ERROR)}handleIframeNotFoundError(){Li(e.Critical,fe.IFRAME_NOT_FOUND_ERROR)}attachScriptTagSuccessToFrame(){this.setIframeReadyStatus(!0),this.iframeEmbedder.sendMessage(jn)}attachScriptTagErrorToFrame(t){Li(e.Critical,fe.SCRIPT_TAG_ATTACHMENT_ERROR,t)}handleIframeInitializationError(t){Li(e.Critical,fe.CHAT_CLIENT_SETUP_INITIALIZATION_ERROR,t),this.handleZoomUXAEvent(f.FAILED)}setupInitializationTimeout(){this.chatStartInitTime=performance.now(),Ki("setupInitializationTimeout: Setting up timeout for 60 secs to load entire process."),this.initTimeout=setTimeout((()=>{Li(e.Critical,fe.CHAT_IFRAME_LOAD_TIMEOUT_ERROR),this.handleZoomUXAEvent(f.NETWORK_FAILED),Li(e.Critical,"setupInitializationTimeout: zoom_chat_client module Initialization :  [FAILED]")}),6e4)}handleNoCookieOnChatWidgetInit(e){this.cleanUpUnifiedChatState(),this.isIdentifiedHostSupportedToLoadChat()&&(this.setUnifiedChatInitialState(),this.setUnifiedChatIframeToInVisible(e),this.setIframeProperties())}isInitialDbxSalesChatWhenCookieExists(e,t){return null===e&&t===c.DBX_SALES_CHAT&&(Ki(`No current state found. Initializing with state: ${JSON.stringify(fa)}`),Ni.saveStateToLocalStorage(D,fa),!0)}isChatWidgetHiddenWithoutCompanySwitch(e,t){return e===r.Hiddden&&t===d.UserNotSwtichCompany}isChatWidgetHiddenWithCompanySwitch(e,t){return e===r.Hiddden&&t===d.UserSwtichCompany}isChatWindowVisibleWithRequestedState(e,i,n,o){return e===r.Visible&&i===t.ChatIsRequested&&n===s.ChatWindow&&o===d.UserNotSwtichCompany}isChatBubbleVisibleWithRequestedState(e,i,n,o){return e===r.Visible&&i===t.ChatIsRequested&&n===s.ChatBubble&&o===d.UserNotSwtichCompany}handleCookieOnChatWidgetInit(e){const t=Ni.getStateFromLocalStorage(D),i=this.getInitializedChatTypeFromProfile();if(this.isInitialDbxSalesChatWhenCookieExists(t,i))return;const{currentIframeState:n,currentCompanyState:o,currentUserActionState:a,currentWidgetState:r}=t;this.isChatWidgetHiddenWithoutCompanySwitch(n,o)?this.handleWhenChatWidgetIsInHiddenState(t,e):this.isChatWindowVisibleWithRequestedState(n,a,r,o)?this.handleWhenChatWidgetIsInWindowAndVisibleState(e):this.isChatBubbleVisibleWithRequestedState(n,a,r,o)?this.handleWhenChatWidgetIsInBubbleAndVisibleState(e):this.isChatWidgetHiddenWithCompanySwitch(n,o)&&this.handleCompanySwitch(e,i)}handleCompanySwitch(e,t){t===c.DOCSEND_CHAT&&this.handleCaseWhenUserSwitchesCompany(e)}handleCaseWhenUserSwitchesCompany(e){this.setUnifiedChatIframeToInVisible(e),setTimeout((()=>{this.setUnifiedChatIframeToInVisible(e),this.iframeEmbedder.sendMessage(Vn),this.deleteUnifiedChatCookie(g)}),5e3)}handleWhenChatWidgetIsInHiddenState(e,i){e.currentUserActionState===t.ChatIsNotRequested&&(this.setUnifiedChatIframeToInVisible(i),this.saveUnifiedChatState(ha))}handleWhenChatWidgetIsInBubbleAndVisibleState(e){this.setUnifiedChatIframeToVisible(e),this.setIframePropertiesToMinimizeState(),this.saveUnifiedChatState(Ca)}getCookieValue(e){const t=e+"=",i=document.cookie.split(";");for(const e of i){const i=e.trim();if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}handleWhenChatWidgetIsInWindowAndVisibleState(e){this.setUnifiedChatIframeToVisible(e),this.setIframePropertiesToMaximizeState(),this.saveUnifiedChatState(fa)}handleStateWithPageHistory(){Ki("handleStateWithPageHistory: [STARTED]");const e=Ni.getStateFromLocalStorage(D);if(Ki(`handleStateWithPageHistory: Retrieved current state: ${JSON.stringify(e)}`),!e){const e={...ha,pageHistory:{previousPage:null,currentPage:window.location.pathname},reload:!1};return Ki(`handleStateWithPageHistory: No current state found. Initializing with state: ${JSON.stringify(e)}`),Ni.saveStateToLocalStorage(D,e),void Ki("handleStateWithPageHistory: [COMPLETED]")}const t=window.location.pathname;Ki(`handleStateWithPageHistory: Real-time current path: ${t}`);const i=e.pageHistory.previousPage,n=e.pageHistory.currentPage,o=undefined;Ki(`storedPreviousPage: ${i}, storedCurrentPage: ${n}, storedReloadFlag: ${e.reload}`);let a=!1;null===i&&n?n===t||t.startsWith(n)?(Ki("handleStateWithPageHistory: Stored current value and real-time current value are the same. Setting reload to false."),a=!1,e.pageHistory={previousPage:n,currentPage:t}):(Ki("handleStateWithPageHistory: Stored currentPage value and real-time currentPage value are different."),Ki("handleStateWithPageHistory: Updating previousPage to currentPage and currentPage to realTimeCurrentPath."),a=!0,e.pageHistory={previousPage:n,currentPage:t}):i&&n&&(Ki("handleStateWithPageHistory: Both previousPage and currentPage are set. Comparing values."),n===t||t.startsWith(n)?(Ki("handleStateWithPageHistory: Real-time current path matches stored currentPage. Setting reload to false."),a=!1):(Ki("handleStateWithPageHistory: Real-time current path does not match. Updating page history."),a=!0,e.pageHistory={previousPage:n,currentPage:t})),e.reload=a,Ni.saveStateToLocalStorage(D,e),Ki(`handleStateWithPageHistory: Final updated state with reload flag: ${JSON.stringify(e)}`),Ki("handleStateWithPageHistory: [COMPLETED]")}async startZoomChatIframeReloadProcess(){Ki("startZoomChatIframeReloadProcess: [STARTED]"),Ki("startZoomChatIframeReloadProcess: Starting chat termination process."),Ki("startZoomChatIframeReloadProcess: Sending message to iframe for ending the current chat session."),this.iframeEmbedder.sendMessage(Vn),await this.waitForSessionTermination(),Ki("startZoomChatIframeReloadProcess: Timeout reached. Executing reload callback to refresh chat state.");const e=await this.triggerReloadZoomChatClient();return Ki("startZoomChatIframeReloadProcess: [COMPLETED]"),e}async waitForSessionTermination(){Ki("waitForSessionTermination: Waiting for session termination..."),await new Promise((e=>setTimeout(e,_)))}async triggerReloadZoomChatClient(){Ki("triggerReloadZoomChatClient: Starting reload callback execution.");const e=zi();if(!e||"function"!=typeof e.reloadZoomChatClient)return Li(xe.type,xe.message),!1;Ki("triggerReloadZoomChatClient: Valid Zoom Chat client detected. Initiating reload.");try{return await e.reloadZoomChatClient(),Ki("triggerReloadZoomChatClient: Reload callback executed successfully."),!0}catch(e){const t=undefined;return Ki(`triggerReloadZoomChatClient: Reload failed: ${e instanceof Error?e.message:String(e)}`),!1}}removeUnifiedChatDivContainer(){const e=document.querySelector(".dbx-unified-chat-container");e?e.remove():Ki("removeUnifiedChatDivContainer: No .dbx-unified-chat-container found. No action taken.")}resetInitialization(){Ki("resetInitialization : [STARTED] - Closing and resetting port..."),this.el=null,this.isChatIframeReady=!1,this.initTimeout=null,this.chatStartInitTime=null,this.chatEndInitTime=null,this.chatElapsedTime=null,Ki("resetInitialization : [COMPLETED]")}attachMessageListener(){try{window.addEventListener("message",this.handleIframeServiceMessages,{passive:!0})}catch(t){Li(e.Critical,fe.ERROR_ATTACHING_MESSAGE_EVENT_LISTENER,t)}}async reInitChatClient(t){Ki("reInitChatClient: [STARTED] Preparing configs to reinitialize the chat client.");try{const e=Xa.getInstance(t);return Xa.setChatUri(t.chatUri),Xa.setChatApiKey(t.chatApiKey),Xa.setChatDataEnv(t.chatDataEnv),Ki("reInitChatClient: [COMPLETED] Preparing configs to reinitialize the chat client."),Ki("reInitChatClient: *** CALLING initChatClient *** ......."),await e.initChatClient(),Ki("reInitChatClient: [COMPLETED] Chat client initialized successfully."),!0}catch(t){return Li(e.Critical,"reInitChatClient failed",t),!1}}async reInitializeZoomChatClient(){Ki("reInitializeZoomChatClient: Triggered re-init");try{this.removeUnifiedChatDivContainer(),this.resetInitialization(),Ki(`Arguments for re-initialization: ${JSON.stringify(this.args)}`),this.iframeEmbedder=new kn(Un.ZOOM_CHAT,this.handleIframeServiceMessages,this.args.iframeSrc,void 0);const e=undefined;if(!await this.reInitChatClient(this.args))throw new Error("Chat client initialization failed.");return!0}catch(t){return Li(e.Critical,"re-initialization failed",t),!1}}isChatReactiveOnCheckoutPage(e){var t,i,n;const o=null===(t=this.args.chatInitProfile)||void 0===t?void 0:t.trustedHost,a=undefined,r=ln(null!==(n=null===(i=this.args.chatInitProfile)||void 0===i?void 0:i.identifiedHref)&&void 0!==n?n:""),s=Ni.getStateFromLocalStorage(H);return Ki(`isChatReactiveOnCheckoutPage : isButtonClickedOnCheckoutPage ${s}`),e===c.DBX_SALES_CHAT&&o===l.WWW_DBX_HOST&&r===$&&s}skipZoomChatReload(e,t){Ki("skipZoomChatReload : [DONE]");const i=this.isChatReactiveOnCheckoutPage(e);Ki(`skipZoomChatReload : isCheckoutSalesChatReactive  and button clicked: ${i}`),i?this.handleDbxSalesCheckoutPageReactiveChat(c.DBX_SALES_CHAT,t):this.proceedToLoadChatAsProActive(e,t)}setUnifiedChatInitialState(){const e=undefined;this.getInitializedChatTypeFromProfile()===c.DBX_SALES_CHAT?this.handleStateWithPageHistory():Ni.saveStateToLocalStorage(D,ha)}setUnifiedChatIframeToInVisible(e){e.style.display="none"}setUnifiedChatIframeToVisible(e){e.style.display=""}setIframeProperties(){this.setIframePropertiesToMinimizeState()}registerOpenChatWindowCallback(){const e=undefined;zi().handleOpenChatWindowCallback=()=>{Ki("registerOpenChatWindowCallback: First-time Initialization: Setting ChatWidget to window Mode"),this.iframeEmbedder.sendMessage(qn),this.handleZoomUXAEvent(f.CHATREQUESTED)}}registerZoomChatConsentDeclinedCallback(){const e=undefined;zi().consentNotGrantedDidNotLoadChatClient=()=>{this.handleZoomUXAEvent(f.CONSENTDECLINED)}}registerAllowDBXSalesChatToLoadCallback(){const e=undefined;if(this.getUnifiedChatCookieStatus().currentInitChat!==c.DBX_SALES_CHAT)return;const t=undefined;zi().consentGrantedProceedDBXSalesChatToLoad=()=>{this.handleDBXSalesChatConsent()}}handleDBXSalesChatConsent(){const e=undefined;Ba(I)?Ki("handleDBXSalesChatConsent: Skipping ZOOM_CHAT_CLIENT initialization - SNAPENGAGE chat already initialized"):(this.deregisterAllowDBXSalesChatToLoadCallback(),Ki("handleDBXSalesChatConsent: DBX_SALES_CHAT is loading now, initializing chat client."),this.initChatClient().then(fn))}deregisterAllowDBXSalesChatToLoadCallback(){const e=zi();e&&"function"==typeof e.consentGrantedProceedDBXSalesChatToLoad?(Ki("deregisterAllowDBXSalesChatToLoadCallback: Callback consentGrantedProceedDBXSalesChatToLoad deregistered successfully."),e.consentGrantedProceedDBXSalesChatToLoad=void 0):Ki("deregisterAllowDBXSalesChatToLoadCallback: Callback consentGrantedProceedDBXSalesChatToLoad was not registered or already deregistered.")}saveUnifiedChatState(e){Ni.saveStateToLocalStorage(D,e)}isUnifiedChatCookieExists(e){const t=document.cookie.split(";");for(let i=0;i<t.length;i++){const n=undefined;if(e==t[i].split("=")[0].trim())return!0}return!1}setChatSessionLogoutFlag(){const e=this.getUnifiedChatCookieStatus();e.currentInitChat!==c.DBX_SALES_CHAT&&e.currentInitChat!==c.FORMSWIFT_CHAT&&e.currentInitChat!==c.HELLOSIGN_CX_CHAT||localStorage.setItem(y,"true")}removeChatRequestedFlagOnCheckoutPage(){localStorage.removeItem(H)}removeChatSessionLogoutFlag(){localStorage.removeItem(y)}registerLogoutCallback(){const e=undefined;zi().handleOnLogoutCallback=()=>{this.handleLogout()}}handleLogout(){const e=this.getInitializedChatTypeFromProfile(),t=this.isIOSSafariOrWebView();e===c.FORMSWIFT_CHAT?this.performLogoutActions(D):(Ni.deleteUnifiedChatStateFromLocalStorage(v),e===c.HELLOSIGN_CX_CHAT&&this.deleteUnifiedChatCookie(g),t||this.performLogoutActions(D))}performLogoutActions(e){Ni.deleteUnifiedChatStateFromLocalStorage(e),this.setChatSessionLogoutFlag(),this.iframeEmbedder.sendMessage(Vn),this.handleZoomUXAEvent(f.LOGOUT)}registerSwitchCompanyCallback(){const e=undefined;zi().handleOnSwitchCompanyCallback=()=>{this.iframeEmbedder.sendMessage(Vn),setTimeout((()=>{this.detachZoomChatIframe()}),1e3)}}isIOSSafariOrWebView(){const e=navigator.userAgent,t=/^((?!chrome|android).)*safari/i.test(e),i=/AppleWebKit/.test(e)&&!/Safari/.test(e);return Ki(`isIOSSafariOrWebView: isSafari: ${t}, isWebView : ${i}`),t||i}resetChatSessionForIOS(){const e=undefined;if(this.getInitializedChatTypeFromProfile()===c.DOCSEND_CHAT){const e=Ni.getStateFromLocalStorage(v);null===e&&(Ni.saveStateToLocalStorage(v,ua),setTimeout((()=>{this.iframeEmbedder.sendMessage(Vn)}),3e3)),e.currentEndToChatState===o.DoNotTerminateChatSession&&Ni.saveStateToLocalStorage(v,ua)}}clearChatTimeMetricsFromLocalStorage(){Ni.deleteUnifiedChatStateFromLocalStorage(L),Ni.deleteUnifiedChatStateFromLocalStorage(w),Ni.deleteUnifiedChatStateFromLocalStorage(b)}logCurrentTimeToLocalStorage(e){const t=this.getCurrentTimeAsString();Ni.saveStateToLocalStorage(e,t)}performCleanUpAsUserEndsTheChat(){const e=this.getInitializedChatTypeFromProfile();this.logCurrentTimeToLocalStorage(L),this.handleZoomUXAEvent(f.END),e===c.DBX_SALES_CHAT||e===c.DBX_CX_CHAT?(this.deleteUnifiedChatCookie(g,M),Ni.deleteUnifiedChatStateFromLocalStorage(D),this.clearChatTimeMetricsFromLocalStorage()):e===c.DOCSEND_CHAT?(this.deleteUnifiedChatCookie(g),Ni.deleteUnifiedChatStateFromLocalStorage(D),setTimeout((()=>{this.detachZoomChatIframe(),window.location.reload()}),1e3)):e===c.DASH_SALES_CHAT?(this.deleteUnifiedChatCookie(m,M),Ni.deleteUnifiedChatStateFromLocalStorage(D)):(e===c.FORMSWIFT_CHAT||e===c.HELLOSIGN_CX_CHAT)&&(this.deleteUnifiedChatCookie(g),Ni.deleteUnifiedChatStateFromLocalStorage(D))}getCurrentTimeAsString(){const e=undefined;return(new Date).toISOString()}getDocsendUserInfoFromWindow(){var e,t,i;const n=undefined;return{id:null===(e=null===window||void 0===window?void 0:window.dsCurrentUserInfoRaw)||void 0===e?void 0:e.id,name:null===(t=null===window||void 0===window?void 0:window.dsCurrentUserInfoRaw)||void 0===t?void 0:t.name,email:null===(i=null===window||void 0===window?void 0:window.dsCurrentUserInfoRaw)||void 0===i?void 0:i.email}}getDbxUserInfoFromWindow(){var e,t,i;const n=null!==(i=null===(t=null===(e=this.args.chatSpecificConfigs)||void 0===e?void 0:e.dbxChatConfigs)||void 0===t?void 0:t.dbxUserIdentifiers)&&void 0!==i?i:{};return{id:n.id,name:n.name,email:n.email,plan:n.plan,dashPlan:n.dashPlan,supportTier:n.supportTier,language:n.language,country:n.country,pageLoadTs:n.pageLoadTs,chatHmac:n.chatHmac,sessionId:n.sessionId}}getCxChatRequestedButtonInfoFromWindow(){const e={dbxCxChatButtonLanguage:"",cxChatButtonLanguage:""},t=window;return t.dbxCxChatButtonLanguage&&t.dbxCxChatButtonLanguage.cxChatButtonLanguage&&(e.dbxCxChatButtonLanguage=t.dbxCxChatButtonLanguage.cxChatButtonLanguage),e}getproductSupportPackageInfoFromWindow(){const e={selectedProductSupportPackage:""},t=window;return t.dbxSelectedProductSupportPackage&&t.dbxSelectedProductSupportPackage.selectedProductSupportPackage&&(e.selectedProductSupportPackage=t.dbxSelectedProductSupportPackage.selectedProductSupportPackage),e}getFormswiftUserInfoFromWindow(){const e=null===window||void 0===window?void 0:window.formswiftZoomChatInitData,t=undefined;return{user_id:null==e?void 0:e.user_id,FirstName:null==e?void 0:e.FirstName,Email:null==e?void 0:e.Email,Country:null==e?void 0:e.Country,pageLoadTs:null==e?void 0:e.pageLoadTs,chatHmac:null==e?void 0:e.chatHmac,zoomChatHmac:null==e?void 0:e.zoomChatHmac}}getHellosignUserInfoFromWindow(){var e;const t=null===window||void 0===window?void 0:window.signChatInitData,i=null!==(e=null==t?void 0:t.loadChatbot)&&void 0!==e&&e,n=undefined;return{id:null==t?void 0:t.id,name:null==t?void 0:t.name,email:null==t?void 0:t.email,plan:null==t?void 0:t.plan,supportTier:null==t?void 0:t.supportTier,language:null==t?void 0:t.language,skuId:null==t?void 0:t.skuId,pageLoadTs:null==t?void 0:t.pageLoadTs,chatHmac:null==t?void 0:t.chatHmac,sessionId:null==t?void 0:t.sessionId,loadChatbot:i.toString()}}getDbxUserLoggedInStatus(){var e,t,i;return null!==(i=null===(t=null===(e=this.args.chatSpecificConfigs)||void 0===e?void 0:e.dbxChatConfigs)||void 0===t?void 0:t.isUserLoggedIn)&&void 0!==i&&i}getDbxUserSalesFeatureVariant(){var e,t,i;return null!==(i=null===(t=null===(e=this.args.chatSpecificConfigs)||void 0===e?void 0:e.dbxChatConfigs)||void 0===t?void 0:t.salesExperimentVariant)&&void 0!==i?i:"OFF"}sendDocsendCurrentUserInfoToIframeService(){const e=this.getDocsendUserInfoFromWindow(),t={action:Mn.sendDocsendCurrentUserInfo,messageType:xn.REQUEST,dsCurrentUserInfo:JSON.stringify(e),message:ue.SEND_DOCSEND_CURRENT_USER_INFO};this.iframeEmbedder.sendMessage(t)}sendDropboxCurrentUserInfoToIframeService(){const e=this.getDbxUserInfoFromWindow(),t=this.getDbxUserLoggedInStatus(),i=this.getDbxUserSalesFeatureVariant(),n={action:Mn.sendDropboxCurrentUserInfo,messagetype:xn.REQUEST,dbxCurrentUserInfo:JSON.stringify(e),message:ue.SEND_DROPBOX_CURRENT_USER_INFO,isUserLoggedIn:t,salesExperimentVariant:i};this.iframeEmbedder.sendMessage(n)}sendDropboxCxChatRequestedInfoToIframeService(){const e=this.getCxChatRequestedButtonInfoFromWindow(),t={action:Mn.sendCxChatRequestedLanguageInfo,messagetype:xn.REQUEST,cxUserSelectedLanguage:JSON.stringify(e),message:ue.SEND_CX_CHAT_REQUESTED_LANGUAGE_INFO};this.iframeEmbedder.sendMessage(t)}sendButtonSelectedProductSupportPackageInfoToIframeService(){const e=this.getproductSupportPackageInfoFromWindow(),t={action:Mn.sendUserSelectedProductSupportPackageInfo,messagetype:xn.REQUEST,productSupportPackage:JSON.stringify(e),message:ue.SEND_USER_SELECTED_PRODUCT_SUPPORT_PACKAGE_INFO};this.iframeEmbedder.sendMessage(t)}sendFormswiftCurrentUserInfoToIframeService(){const e=this.getFormswiftUserInfoFromWindow(),t={action:Mn.sendFormswiftCurrentUserInfo,messagetype:xn.REQUEST,formswiftCurrentUserInfo:JSON.stringify(e),message:ue.SEND_FORMSWIFT_CURRENT_USER_INFO};this.iframeEmbedder.sendMessage(t)}sendBrowserStatusToIframeService(){const e={action:Mn.sendBrowserStatus,message:ue.SEND_BROWSER_STATUS,messageData:this.isIOSSafariOrWebView(),messageType:xn.RESPONSE};this.iframeEmbedder.sendMessage(e)}sendHellosignCurrentUserInfoToIframeService(){const e=this.getHellosignUserInfoFromWindow(),t={action:Mn.sendHellosignCurrentUserInfo,messagetype:xn.REQUEST,hellosignCurrentUserInfo:JSON.stringify(e),message:ue.SEND_HELLOSIGN_CURRENT_USER_INFO};this.iframeEmbedder.sendMessage(t)}setCookieForDBXSalesChat(){null==this.getCookieValue(g)&&(ji(c.DBX_SALES_CHAT),this.setUserRequestedChatState(c.DBX_SALES_CHAT),this.logCurrentTimeToLocalStorage(b),this.handleZoomUXAEvent(f.CHATREQUESTED))}validateChatWidgetLoadStatus(e){e.status===Gn.success?this.handleChatWidgetLoadSuccess(e):e.status===Gn.failure&&this.handleChatWidgetLoadFailure(e)}handleChatWidgetLoadSuccess(t){Ki(`handleChatWidgetLoadSuccess: ${t.status}`),null!==this.initTimeout?(this.validateIOSChatEnvironment(),Ki(`handleChatWidgetLoadSuccess: Received WidgetStatusUnderIframe: ${t.chatbotbuttonstate}`),this.computeChatWidgetLoadDuration(),this.handleZoomUXAEvent(f.SUCCESS),this.processChatWidgetState(t)):Li(e.Operational,"handleChatWidgetLoadSuccess: Chat widget inside iframe is not fully ready yet.")}handleChatWidgetLoadFailure(t){this.computeChatWidgetLoadDuration(),this.clearInitializationTimeout(),this.detachZoomChatIframe(),Li(e.Critical,he.CHAT_WIDGET_NOT_LOADED_MAX_RETRY_REACHED)}computeChatWidgetLoadDuration(){this.chatEndInitTime=performance.now(),Ki(`computeChatWidgetLoadDuration: The chat is initialized at : ${this.chatEndInitTime}`),null!==this.chatStartInitTime&&(this.chatElapsedTime=this.chatEndInitTime-this.chatStartInitTime,Ki(`computeChatWidgetLoadDuration: Total time taken: ${(this.chatElapsedTime/1e3).toFixed(2)} seconds`))}validateIOSChatEnvironment(){this.isIOSSafariOrWebView()&&this.resetChatSessionForIOS()}processChatWidgetState(e){const t=e.chatbotbuttonstate;Ki(`processChatWidgetState: State of the chat widget inside the iframe : ${t}`),t===s.ChatBubble?this.onChatLoadedAsBubble(e):t===s.ChatWindow&&this.onChatLoadedAsWindow(e)}onChatLoadedAsBubble(e){this.clearInitializationTimeout(),this.handleChatBubbleStatus(e)}async onChatLoadedAsWindow(e){this.clearInitializationTimeout();const{currentInitChat:t,unifiedChatCookieStatus:i}=this.getUnifiedChatCookieStatus()||{};if(this.shouldHandleChatWindowForSalesChat(t,i)){Ki("onChatLoadedAsWindow: Handling chat window process for DBX_SALES_CHAT with no unified chat cookie exists");const t=Ni.getStateFromLocalStorage(D);if(!t)return;const{reload:i,currentCompanyState:n}=t;await this.processZoomChatReload(i,n,e)}else this.shouldHandleChatWindowForFormswiftChat(t,i)?(Ki("onChatLoadedAsWindow: Handling chat window process for FORMSWIFT_CHAT with no unified chat cookie exists"),this.registerFormSwiftChatDisplayHandler()):(e.action=Wn.expandButtonClicked,this.handleChatWidgetInteraction(e))}shouldHandleChatWindowForSalesChat(e,t){return e===c.DBX_SALES_CHAT&&!t}shouldHandleChatWindowForFormswiftChat(e,t){return e===c.FORMSWIFT_CHAT&&!t}async processZoomChatReload(t,i,n){Ki(`processZoomChatReload: Retrieved reload flag: ${t}, user switch account status: ${i}`);const o=undefined;if(await this.shouldReloadAndHandleAccountSwitch(t,i)){Ki("processZoomChatReload: Starting reload process.");const t=undefined;await this.startZoomChatIframeReloadProcess()?Ki("processZoomChatReload: Zoom chat reload process completed successfully."):Li(e.Critical,"processZoomChatReload: Zoom chat reload process failed.")}else Ki("processZoomChatReload: Reload flag is false. Executing do not reload function."),n.action=Wn.expandButtonClicked,this.handleChatWidgetInteraction(n),this.proceedToLoadChatAsProActive(c.DBX_SALES_CHAT,n)}getUnifiedChatCookieStatus(){const e=this.getInitializedChatTypeFromProfile();let t;return t=V.has(e)?this.isUnifiedChatCookieExists(g):e===c.DASH_SALES_CHAT&&this.isUnifiedChatCookieExists(m),{currentInitChat:e,unifiedChatCookieStatus:t}}handleChatBubbleStatus(e){const t=this.getUnifiedChatCookieStatus(),{unifiedChatCookieStatus:i,currentInitChat:n}=t;Ki(`handleChatBubbleStatus: Chat cookie status: ${i}, Current chat type: ${n}`),this.setupBaseChatHandler(n,e,i)}setupBaseChatHandler(e,t,i){var n;const o=null===(n=this.args.chatInitProfile)||void 0===n?void 0:n.trustedHost;Ki(`setupBaseChatHandler: Current chat type: ${e}, Trusted host: ${o}, Unified chat cookie status: ${i}`),e===c.DOCSEND_CHAT&&o===l.DOCSEND_HOST?this.handleFirstTimeDoSendChat(t):e===c.DASH_SALES_CHAT&&o===l.DASH_DBX_HOST?this.handleFirstTimeDashChat(e,t):(e!==c.DBX_SALES_CHAT||o!==l.WWW_DBX_HOST||i)&&(e!==c.DBX_SALES_CHAT||o!==l.SIGN_CENTER_HOST||i)?e===c.DBX_CX_CHAT&&o===l.WWW_DBX_HOST?this.handleDbxCXChatFlow(e,t):e===c.HELLOSIGN_CX_CHAT&&o===l.HELLOSIGN_HOST?this.handleHelloSignCXFlow(e,t):e!==c.FORMSWIFT_CHAT||o!==l.FORMSWIFT_HOST||i?o!==l.HELP_CENTER_HOST&&o!==l.EXPERIENCE_HOST&&o!==l.SIGN_CENTER_HOST||e!==c.DBX_SALES_CHAT||!i||this.handleWhenChatWidgetIsInBubbleAndVisibleState(this.iframeEmbedder.iframe):this.handleFirstTimeFormswiftChatWhenBubble(e,t):this.handleFirstTimeSalesChatWhenBubble(e,t)}handleDbxCXChatFlow(t,i){var n,o,a;const r=null===(n=this.args.chatInitProfile)||void 0===n?void 0:n.identifiedHref,s=null===(a=null===(o=this.args.chatSpecificConfigs)||void 0===o?void 0:o.dbxChatConfigs)||void 0===a?void 0:a.discoverabilityEntryPagesConfig;if(!r)return;const d=ln(r);this.isPathInHelpEntryPages(d)?this.handleFirstTimeChatLoadOnGetHelpPage(t,i):s&&this.shouldHandleDiscoverabilityPageChat(d,s)?this.handleFirstTimeChatLoadOnDiscoverabilityPage(t,i):(null==s?void 0:s.isEnabled)||Li(e.Operational,`Chat visibility on discovery pages is disabled. Current path: ${d}`)}isPathInHelpEntryPages(e){return Y.includes(e)}shouldHandleDiscoverabilityPageChat(e,t){var i,n;return t.isEnabled&&null!==(n=null===(i=t.discoverabilityEntryPages)||void 0===i?void 0:i.includes(e))&&void 0!==n&&n}handleFirstTimeDoSendChat(e){this.handleChatWidgetInteraction(e)}handleFirstTimeDashChat(e,t){this.proceedToLoadChatAsProActive(e,t)}async handleFirstTimeSalesChatWhenBubble(e,t){var i;const n=undefined;if((null===(i=this.args.chatInitProfile)||void 0===i?void 0:i.trustedHost)===l.WWW_DBX_HOST){const e=undefined;if(!this.canInitiateSalesChatForUser())return void this.handleLoggingForSalesChatDisallowedCountry()}const o=Ni.getStateFromLocalStorage(D),a=Ni.getStateFromLocalStorage(y),r=undefined;if(this.getUnifiedChatCookieStatus().unifiedChatCookieStatus)return void Ki("handleFirstTimeSalesChatWhenBubble: Unified chat Cookie found.");if(!o)return void Ki("handleFirstTimeSalesChatWhenBubble: No current state found in localStorage.");a&&(Ki("handleFirstTimeSalesChatWhenBubble: dbx_unified_chat_session_logout found in localStorage."),Ki("handleFirstTimeSalesChatWhenBubble: Starting reload process."),this.removeChatSessionLogoutFlag(),await this.startZoomChatIframeReloadProcess());const{reload:s,currentCompanyState:d}=o;Ki(`handleFirstTimeSalesChatWhenBubble: Retrieved reload flag: ${s}, user switch account status: ${d}`);const c=undefined;await this.shouldReloadAndHandleAccountSwitch(s,d)?(Ki("handleFirstTimeSalesChatWhenBubble: Starting reload process."),await this.startZoomChatIframeReloadProcess()):(Ki("handleFirstTimeSalesChatWhenBubble: No reload needed, proceeding with current chat."),this.skipZoomChatReload(e,t))}async shouldReloadAndHandleAccountSwitch(e,t){Ki("Checking if reload or account switch is needed.");const i=e||t===d.UserSwtichCompany;return i?(Ki("Reload is required."),t===d.UserSwtichCompany&&(Ki("Detected account switch. Performing custom actions."),Ni.deleteUnifiedChatStateFromLocalStorage(D))):Ki("No reload or account switch needed."),i}handleFirstTimeChatLoadOnGetHelpPage(e,t){Ki(`handleFirstTimeChatLoadOnGetHelpPage: First-time Initialization Detected: ${e}`),this.proceedToLoadChatAsReactive(c.DBX_CX_CHAT,t)}handleHelloSignCXFlow(e,t){Ki(`handleHelloSignCXFlow: First-time Initialization Detected: ${e}, Chat is in hidden state`),"true"===this.getHellosignUserInfoFromWindow().loadChatbot?this.proceedToLoadChatAsProActive(c.HELLOSIGN_CX_CHAT,t):this.proceedToLoadChatAsReactive(c.HELLOSIGN_CX_CHAT,t)}handleDbxReactiveChatRequestHandler(e,t){this.handleChatWidgetInteraction(t),e===c.DBX_CX_CHAT||e===c.HELLOSIGN_CX_CHAT?this.initiateChatWindowOnRequested(D,e):e===c.DBX_SALES_CHAT&&this.initiateChatWindowOnRequested(H,e)}initiateChatWindowOnRequested(e,t){const i=Ni.getStateFromLocalStorage(e);t!==c.DBX_CX_CHAT&&t!==c.HELLOSIGN_CX_CHAT||!0!==(null==i?void 0:i.reload)?t===c.DBX_SALES_CHAT&&!0===i&&(this.updateStateToChatWindowRequested(t),this.removeChatRequestedFlagOnCheckoutPage()):(this.updateStateToChatWindowRequested(t),delete i.reload)}updateStateToChatWindowRequested(e){ji(e),this.updateChatInteractionType(h.REACTIVE_CHAT),Nn(),Ni.saveStateToLocalStorage(D,fa),this.setUnifiedChatIframeToVisible(this.iframeEmbedder.iframe)}handleDbxSalesCheckoutPageReactiveChat(e,t){this.handleDbxReactiveChatRequestHandler(e,t)}proceedToLoadChatAsReactive(e,t){this.handleDbxReactiveChatRequestHandler(e,t)}handleFirstTimeFormswiftChatWhenBubble(e,t){Ki(`handleFirstTimeFormswiftChatWhenBubble: First-time Initialization Detected: ${e}: awaiting to trigger showFormSwiftChat`),this.registerFormSwiftChatDisplayHandler()}handleFirstTimeChatLoadOnDiscoverabilityPage(e,t){Ki(`handleFirstTimeChatLoadOnDiscoverabilityPage: First-time Initialization Detected: ${e} on portkey-unifiedchat-discoverability pages`),this.proceedToLoadChatAsProActive(e,t)}setIframePropertiesToMinimizeState(){this.iframeEmbedder.iframe.style.width="100px",this.iframeEmbedder.iframe.style.height="100px",this.iframeEmbedder.iframe.style.right="20px",this.iframeEmbedder.iframe.style.bottom="26px"}setIframePropertiesToMaximizeState(){this.getIsMobileOrTablet()?(this.iframeEmbedder.iframe.style.width="100%",this.iframeEmbedder.iframe.style.height="100%",this.iframeEmbedder.iframe.style.bottom="0",this.iframeEmbedder.iframe.style.right="0"):(this.iframeEmbedder.iframe.style.width="450px",this.iframeEmbedder.iframe.style.height="650px",this.iframeEmbedder.iframe.style.right="20px",this.iframeEmbedder.iframe.style.bottom="26px",this.iframeEmbedder.iframe.style.maxWidth="100%",this.iframeEmbedder.iframe.style.maxHeight="100%")}handleWhenFormswiftChatIsRequested(){this.shouldSetCookieForFormswiftChat()&&(ji(c.FORMSWIFT_CHAT),this.setUserRequestedChatState(c.FORMSWIFT_CHAT),this.handleZoomUXAEvent(f.CHATREQUESTED))}shouldSetCookieForFormswiftChat(){const{currentInitChat:e,unifiedChatCookieStatus:i}=this.getUnifiedChatCookieStatus();if(e!==c.FORMSWIFT_CHAT)return!1;const n=Ni.getStateFromLocalStorage(D),o=Ni.getStateFromLocalStorage(y);return!i&&(null==n?void 0:n.currentUserActionState)===t.ChatIsNotRequested&&!o}shouldDisplayFormswiftChatError(t){Li(e.Critical,fe.ERROR_IN_FORMSWIFT_CHAT_DISPLAY_PROCESS,t)}handleChatLoadError(t){Li(e.Critical,fe.ERROR_IN_FORMSWIFT_CHAT_LOAD_PROCESS,t)}async handleReInitFormswiftChat(){const e=undefined;await this.reInitFormswiftChatLoadProcess()?(Ki("FormSwift chat reinitialized successfully. Proceeding to display chat."),this.proceedToDisplayFormswiftChat()):Ki("FormSwift chat reinitialization failed or was not required.")}async reInitFormswiftChatLoadProcess(){Ki("reInitFormswiftChatLoadProcess invoked.");const e=this.shouldTerminateAndInitiateFormswiftChatSession();return Ki(`reInitFormswiftChatLoadProcess: Should terminate and re-initiate FormSwift chat session: ${e}`),e?await this.reinitializeFormSwiftChatSession():(Ki("reInitFormswiftChatLoadProcess: Conditions not met to terminate or reinitialize the chat session. No action taken."),!1)}shouldDisplayFormswiftChat(){const{currentInitChat:e,unifiedChatCookieStatus:t}=this.getUnifiedChatCookieStatus(),i=Ni.getStateFromLocalStorage(y);return e===c.FORMSWIFT_CHAT&&(t||i?!(t||!i)&&(Ki("***** Current chat is FormSwift, cookie not present, and logout session flag exists. ***** "),!1):(Ki("***** Current chat is FormSwift, cookie not present, and logout session flag does not exist. ***** "),!0))}proceedToDisplayFormswiftChat(){Ki("proceedToDisplayFormswiftChat: Invoked");const e=undefined;document.getElementById(N)&&!document.cookie.includes(g)&&(Ki("proceedToDisplayFormswiftChat: calling setChatIframeVisibilityAndState"),this.setChatIframeVisibilityAndState())}async reinitializeFormSwiftChatSession(){Ki("reInitFormswiftChatLoadProcess: Conditions met to terminate and reinitialize the chat session. Removing logout flag."),this.removeChatSessionLogoutFlag();try{return Ki("reInitFormswiftChatLoadProcess: Starting Zoom chat Iframe reload process..."),await this.startZoomChatIframeReloadProcess(),Ki("reInitFormswiftChatLoadProcess: Zoom chat reload process completed successfully."),!0}catch(e){return this.handleChatLoadError(e),!1}}shouldTerminateAndInitiateFormswiftChatSession(){const{currentInitChat:e,unifiedChatCookieStatus:i}=this.getUnifiedChatCookieStatus();if(e!==c.FORMSWIFT_CHAT)return!1;const n=Ni.getStateFromLocalStorage(D),o=Ni.getStateFromLocalStorage(y);return!i&&(null==n?void 0:n.currentUserActionState)===t.ChatIsNotRequested&&!!o}handleChatWidgetInteraction(e){switch(e.action){case Wn.expandButtonClicked:this.setChatWidgetWindowState(),this.setIframePropertiesToMaximizeState(),this.handleZoomUXAEvent(f.EXPAND),this.handleWhenFormswiftChatIsRequested();break;case Wn.minimizeButtonClicked:this.setChatWidgetBubbleState(),this.setIframePropertiesToMinimizeState(),this.handleZoomUXAEvent(f.MINIMIZE)}}calculateIframeContainerHeight(){var e;const t=document.querySelector(A),i=null===(e=null==t?void 0:t.getBoundingClientRect())||void 0===e?void 0:e.height;return String(i&&i>0?i:48)}createDivContainerForIframe(){const e=undefined;return Object.assign(document.createElement("div"),{className:A})}createIframeForZoomChat(){const e=this.iframeEmbedder.iframe,t=this.calculateIframeContainerHeight();e.setAttribute("id",N),e.setAttribute("height",t),e.setAttribute("sandbox","allow-scripts allow-same-origin allow-downloads allow-popups"),e.style.position="fixed",e.style.zIndex="9999",e.style.overflow="scroll",e.style.backgroundColor="transparent";const i=this.getUnifiedChatCookieStatus();return i.unifiedChatCookieStatus?(Ki(`createIframeForZoomChat: Chat Type :: ${i.currentInitChat}, Cookie ${i.unifiedChatCookieStatus} exists, proceeding with handleCookieOnChatWidgetInit`),this.handleCookieOnChatWidgetInit(e)):(Ki(`createIframeForZoomChat: Chat Type :: ${i.currentInitChat}, Cookie ${i.unifiedChatCookieStatus} not exists, proceeding with handleNoCookieOnChatWidgetInit`),this.handleNoCookieOnChatWidgetInit(e)),e}attachZoomChatIframe(){var e,t;try{Ki(" attachZoomChatIframe: [STARTED]");const i=A,n=document.querySelector(i),o=null!==(e=null==n?void 0:n.parentNode)&&void 0!==e?e:document.body,a=this.createDivContainerForIframe(),r=this.createIframeForZoomChat(),s=new Promise(((e,t)=>{r.addEventListener("load",(()=>{e(r)})),r.addEventListener("error",(e=>{t(new Error("Error while attaching Zoom chat iframe to parent window"))}))}));return n&&o.removeChild(n),a.appendChild(r),o.insertBefore(a,null!==(t=null==n?void 0:n.nextSibling)&&void 0!==t?t:o.firstChild),a.style.visibility="",Ki(" attachZoomChatIframe: [COMPLETED]"),s}catch(e){return e instanceof Error?Promise.reject(new Error(e.message)):Promise.reject(new Error("An unknown error occurred while attaching Zoom chat iframe to parent window."))}}detachZoomChatIframe(){this.el&&this.el.parentNode&&(this.el.parentNode.removeChild(this.el),this.el=null,this.setIframeReadyStatus(!1))}setIframeReadyStatus(e){this.isChatIframeReady=e}getIframeReadyStatus(){return this.isChatIframeReady}prepareZoomChatCredentialsMsg(){const e=undefined;return{creds:{chatapikey:this.args.chatApiKey,chaturi:this.args.chatUri,chatdataenv:this.args.chatDataEnv},action:Mn.sendZoomChatCredentials,messageType:xn.RESPONSE,message:ue.SEND_ZOOM_CHAT_CREDENTIALS}}executeAttachZoomChatScriptTagToIframe(){if(this.iframeEmbedder.iframe)if(this.iframeEmbedder.iframe.contentWindow)try{const e=this.prepareZoomChatCredentialsMsg();this.iframeEmbedder.sendMessage(e)}catch(e){this.handleIframeExecutionError(e)}else this.handleIframeContentWindowError();else this.handleIframeNotFoundError()}async initChatClient(){try{if(Ki("initChatClient: zoom_chat_client module Initialization : [STARTED]"),this.handleZoomUXAEvent(f.INITIALIZED),this.setupInitializationTimeout(),this.getIframeReadyStatus()||this.el)return;this.attachMessageListener(),this.el=await this.attachZoomChatIframe()}catch(e){Ki("initChatClient: zoom_chat_client module Initialization : [FAILED]"),this.handleIframeInitializationError(e)}}canInitiateSalesChatForUser(){var e,t;const i=((null===(t=null===(e=this.args.chatSpecificConfigs)||void 0===e?void 0:e.dbxChatConfigs)||void 0===t?void 0:t.countryCode)||"UnIdentified_Country").toUpperCase();return!le.includes(i)}handleLoggingForSalesChatDisallowedCountry(){var t,i;const n=undefined,o=`Sales Chat Initialization skipped for the country - ${(null===(i=null===(t=this.args.chatSpecificConfigs)||void 0===t?void 0:t.dbxChatConfigs)||void 0===i?void 0:i.countryCode)||"UnIdentified_Country"}`;Li(e.Operational,o),this.handleZoomUXAEvent(f.SALESCHAT_DISALLOWED_COUNTRY)}}function Ga(e){Ki("initializeZoomChatClient: Chat configuration was successful. Proceeding with ZOOM_CHAT_CLIENT initialization.");const t=Xa.getInstance(e);Xa.setChatUri(e.chatUri),Xa.setChatApiKey(e.chatApiKey),Xa.setChatApiKey(e.chatDataEnv),t.initChatClient().then(fn)}function Va(e){Xa.getInstance(e),Xa.setChatUri(e.chatUri),Xa.setChatApiKey(e.chatApiKey),Xa.setChatApiKey(e.chatDataEnv)}function Za(e,t,i){Ki(`handleDocsendChat: Before : ${JSON.stringify(i)}`);const n={identifiedChat:c.DOCSEND_CHAT,chatInteractionType:h.REACTIVE_CHAT,trustedHost:l.DOCSEND_HOST,identifiedHost:t,identifiedHref:e,supportedEntitlements:{docsendEntitlements:i.chatSupportedEntitlements.docsendEntitlements}};return i.chatInitProfile=n,Ki(`handleDocsendChat: After : ${JSON.stringify(i)}`),i}function za(e){const t=window.location.href,i=undefined,n=undefined;Ga(Za(t,dn(t),e))}function $a(e){const t=undefined;return e===TrustedHosts.DOCSEND_HOST}function Ka(e,t,i){const n={identifiedChat:c.DASH_SALES_CHAT,chatInteractionType:h.PROACTIVE_CHAT,trustedHost:l.DASH_DBX_HOST,identifiedHost:t,identifiedHref:e,supportedEntitlements:{dashDbxEntitlements:i.chatSupportedEntitlements.dashDbxEntitlements},identifiedChatStartUpTime:0};return i.chatInitProfile=n,i}function Ja(e,t){const i=window.location.href,n=undefined,o=Ka(i,dn(i),e);t.isChatEnabledForSubdomains?Ga(o):Xi(t.isChatEnabledForSubdomains)}function Ya(e,t,i){const n={identifiedChat:c.FORMSWIFT_CHAT,chatInteractionType:h.PROACTIVE_CHAT,trustedHost:l.FORMSWIFT_HOST,identifiedHost:t,identifiedHref:e,supportedEntitlements:{formswiftEntitlements:i.chatSupportedEntitlements.formswiftEntitlements},identifiedChatStartUpTime:0};return i.chatInitProfile=n,i}function ja(e,t){const i=window.location.href,n=undefined,o=Ya(i,dn(i),e);if(null===(null==t?void 0:t.chatOperationalHours))return void Zi();const a=undefined;un(null==t?void 0:t.chatOperationalHours)&&Ga(o)}function qa(e,t,i){const n={identifiedChat:c.HELLOSIGN_CX_CHAT,chatInteractionType:h.REACTIVE_CHAT,trustedHost:l.HELLOSIGN_HOST,identifiedHost:t,identifiedHref:e,supportedEntitlements:{hellosignEntitlements:i.chatSupportedEntitlements.hellosignEntitlements}};return i.chatInitProfile=n,i}function Qa(e){const t=window.location.href,i=undefined,n=undefined;Ga(qa(t,dn(t),e))}function er(e){var t;const i=e.chatConfig;if(i){const e=null===(t=i.chatInitProfile)||void 0===t?void 0:t.identifiedChat;if(e===c.DBX_CX_CHAT){if(ir(i))return;tr(i)}else e===c.DBX_SALES_CHAT&&nr(i)}}function tr(e){Ga(e)}function ir(e){var t;const{chatSpecificConfigs:i,chatInitProfile:n}=e,o=null==n?void 0:n.trustedHost,a=null===(t=null==i?void 0:i.dbxChatConfigs)||void 0===t?void 0:t.dbxUserIdentifiers,r=undefined;if(!a)switch(o){case l.WWW_DBX_HOST:return Mi(),!0;case l.SIGN_CENTER_HOST:case l.HELP_CENTER_HOST:return xi(),!1}return"basic"===(null==a?void 0:a.plan)&&(Wi(a.plan),!0)}function nr(e){var t;const i=null===(t=e.chatInitProfile)||void 0===t?void 0:t.trustedHost;if(i===l.WWW_DBX_HOST||i===l.SIGN_CENTER_HOST)or(i,e)?(Ki("handleSalesChatInitialization: Using new zoom chat cookie consent implementation"),ar(e)):(Ki("handleSalesChatInitialization: Using old zoom chat cookie consent implementation"),dr(e));else if(i===l.HELP_CENTER_HOST||i===l.EXPERIENCE_HOST){const t=undefined;ka(g)&&(Ki("UNIFIED CHAT COOKIE EXISTS/COOKIE CONSENT ALREADY GRANTED FOR SALES CHAT, PROCEEDING WITH INIT OF ZOOM_CHAT_CLIENT"),Ga(e))}}function or(e,t){var i,n,o,a,r,s;return e===l.WWW_DBX_HOST?null!==(o=null===(n=null===(i=null==t?void 0:t.chatSpecificConfigs)||void 0===i?void 0:i.dbxChatConfigs)||void 0===n?void 0:n.isCookieValidationFixEnabled)&&void 0!==o&&o:e===l.SIGN_CENTER_HOST&&(null!==(s=null===(r=null===(a=null==t?void 0:t.chatSpecificConfigs)||void 0===a?void 0:a.dbxSignChatConfigs)||void 0===r?void 0:r.isCookieValidationFixEnabled)&&void 0!==s&&s)}function ar(e){const t=ka(g),i=Ba(I),n=Wa(p);if(Ki(`evaluateChatInitialization: isSecureConsentCookieExists=${n}, unifiedChatCookieExists=${t}, snapEngageCookieExists=${i}`),!n)return void rr(t,i,e,!1);const o=Ma(p,O);Ki(`evaluateChatInitialization: consentCategoryCookieKeyExists=${o}`),rr(t,i,e,o)}function rr(e,t,i,n){if(e||!t){if(e&&!t)return Ki("processChatInitialization: UNIFIED CHAT COOKIE EXISTS. Proceeding with ZOOM_CHAT_CLIENT initialization."),void Ga(i);if(!n)return Ki("processChatInitialization: Waiting for user consent signal before initializing ZOOM_CHAT_CLIENT."),void Va(i);Ki(`processChatInitialization: consentCategoryCookieKeyExists=${n}, unifiedChatCookieExists=${e}, snapEngageCookieExists=${t}. [Default+Manual] Proceeding to allow DBX_SALES_CHAT to load. Ignoring further signals and de-registering the callback after triggering the re-consent callback.`),Va(i),wn()}else Ki("processChatInitialization: Skipping ZOOM_CHAT_CLIENT initialization since the user has already initialized SNAPENGAGE chat.")}function sr(t,i,n){var o,a,r;if((null===(o=null==i?void 0:i.error)||void 0===o?void 0:o.type)!==e.Critical){if(!(null==i?void 0:i.error)&&i.chatConfig){if(null!==(a=(r=i.chatConfig).chatSpecificConfigs)&&void 0!==a||(r.chatSpecificConfigs={}),t===l.HELP_CENTER_HOST)i.chatConfig.chatSpecificConfigs.dbxHelpChatConfigs=n;else{if(t!==l.EXPERIENCE_HOST)return;i.chatConfig.chatSpecificConfigs.dbxExperienceChatConfigs=n}er(i)}}else Bi()}function dr(e){const t=ka(g),i=Ba(I);Ki(`handleSalesChatInitialization : is unifiedChatCookieExists : ${JSON.stringify(t)}`),Ki(`handleSalesChatInitialization : is snapEngageCookieExists : ${JSON.stringify(i)}`),t&&!i?(Ki("handleSalesChatInitialization: UNIFIED CHAT COOKIE EXISTS/COOKIE CONSENT ALREADY GRANTED FOR SALES CHAT, PROCEEDING WITH INIT OF ZOOM_CHAT_CLIENT"),Ga(e)):!t&&i?Ki("handleSalesChatInitialization: Skipping ZOOM_CHAT_CLIENT initialization since the user has already initialized SNAPENGAGE chat."):(Ki("handleSalesChatInitialization: UNIFIED CHAT COOKIE NOT_EXISTS FOR SALES CHAT, REGISTERED THE CALLBACK, WAITING FOR COOKIE_CONSENT SIGNAL"),Va(e))}function lr(e,t){var i,n,o;const a=null===(n=null===(i=t.chatSpecificConfigs)||void 0===i?void 0:i.dbxChatConfigs)||void 0===n?void 0:n.salesEntryPagesConfig,r=undefined;return null!==(o=(null!=a?a:Z)[e])&&void 0!==o?o:0}function cr(e,t){var i,n,o;const a=null===(n=null===(i=t.chatSpecificConfigs)||void 0===i?void 0:i.dbxChatConfigs)||void 0===n?void 0:n.salesEntryPagesConfig,r=undefined;return null!==(o=(null!=a?a:K)[e])&&void 0!==o?o:0}function ur(e){return e.startsWith("/get_help")&&e.endsWith("/contact-us")?J["/get_help/*/contact-us"]:J[e]||0}function hr(e){var t,i,n,o;const a=null===(i=null===(t=e.chatSpecificConfigs)||void 0===t?void 0:t.dbxChatConfigs)||void 0===i?void 0:i.salesEntryPagesConfig,r=null===(o=null===(n=e.chatSpecificConfigs)||void 0===n?void 0:n.dbxSignChatConfigs)||void 0===o?void 0:o.salesEntryPagesConfig,s=null!=a?a:Z,d=null!=r?r:K;return{[l.WWW_DBX_HOST]:Object.keys(s),[l.SIGN_CENTER_HOST]:Object.keys(d)}}function fr(){return{[l.WWW_DBX_HOST]:Object.keys(J)}}function Cr(e,t){if(!e||!Array.isArray(t)||0===t.length)return{status:!1,key:null};const i=ln(e);if(!i)return{status:!1,key:null};for(const{name:e,entriesMap:n}of t)if(n&&"object"==typeof n){for(const e in n)if(i===e||i.startsWith(`${e}/`))return{status:!0,key:e,value:n[e]}}else Ki(`findValueInMaps: Skipping invalid map "${e}".`);return{status:!1,key:null}}function Er(e,t){var i,n;const o=null===(n=null===(i=t.chatSpecificConfigs)||void 0===i?void 0:i.dbxChatConfigs)||void 0===n?void 0:n.salesEntryPagesConfig,a=undefined,r=e in(null!=o?o:Z);return Ki(`isDbxSalesEntryPage: Checking for '${e}' - Exists: ${r}`),r}function Sr(e,t){var i,n,o,a;if(e.startsWith("/get_help")&&e.endsWith("/contact-us"))return Ki(`isDbxCXEntryPage: Checking for '${e}' - Exists: true`),!0;const r=undefined;return null!==(a=null===(o=null===(n=null===(i=t.chatSpecificConfigs)||void 0===i?void 0:i.dbxChatConfigs)||void 0===n?void 0:n.discoverabilityEntryPagesConfig)||void 0===o?void 0:o.isEnabled)&&void 0!==a&&a?(Ki(`isDbxCXEntryPage: Checking for '${e}' - Exists: true`),!0):J.hasOwnProperty(e)}function _r(e,t){var i,n;const o=null===(n=null===(i=t.chatSpecificConfigs)||void 0===i?void 0:i.dbxSignChatConfigs)||void 0===n?void 0:n.salesEntryPagesConfig,a=undefined,r=e in(null!=o?o:K);return Ki(`isSignEntryPage: Checking for '${e}' - Exists: ${r}`),r}function gr(e,t,i){try{const[n,o]=Ir(e,t,i);return{isValid:n,entryPath:o}}catch(e){return Li(Ae.type,Ae.message,e),{isValid:!1,entryPath:null}}}function mr(e,t,i){const n=undefined,o=undefined;return gr(e,t,hr(i))}function Tr(e,t){const i=undefined;return gr(e,t,fr())}function Ir(e,t,i){let n=null;try{if(n=ln(t),!n)throw new Error(`Invalid path extracted from URL: ${t}`);const o=i[e]||[];0===o.length&&Ki(`isCurrentPathSupported: No supported pages found for host: ${e}`);const a=undefined;return[o.some((e=>n&&(n===e||n.startsWith(`${e}/`)))),n]}catch(e){return Li(Re.type,Re.message,e),[!1,n]}}function pr(e,t){var i,n,o,a,r,s;const d=null===(n=null===(i=t.chatSpecificConfigs)||void 0===i?void 0:i.dbxChatConfigs)||void 0===n?void 0:n.salesEntryPagesConfig,l=null===(a=null===(o=t.chatSpecificConfigs)||void 0===o?void 0:o.dbxSignChatConfigs)||void 0===a?void 0:a.salesEntryPagesConfig,c=null!=d?d:Z,u=null!=l?l:K,h=null===(s=null===(r=t.chatSpecificConfigs)||void 0===r?void 0:r.dbxChatConfigs)||void 0===s?void 0:s.discoverabilityEntryPagesConfig;(null==h?void 0:h.isEnabled)&&Array.isArray(h.discoverabilityEntryPages)&&h.discoverabilityEntryPages.forEach((e=>{J[e]=0}));const f=undefined;return Cr(e,[{name:"DBX_SALES_ENTRIES",entriesMap:c},{name:"SIGN_SALES_ENTRIES",entriesMap:u},{name:"DBX_CX_ENTRIES",entriesMap:J}])}function Or(e){const t=undefined;return Cr(e,[{name:"SIGN_SALES_ENTRIES",entriesMap:K}])}function Nr(e,t,i,n,o){return Xr(e,t,i,n,o)}function Ar(e,t,i,n,o){return Xr(e,t,i,n,o)}function Rr(e,t,i,n,o,a){const r=Yi(t);return r===U?yr(e,c.DBX_SALES_CHAT,i,n,o,a):r===F?yr(e,c.DBX_CX_CHAT,i,n,o,a):r!==F&&r!==U?{error:me}:{error:Te}}function Dr(e,t,i,n,o){const a=pr(t,n);if(a.status){const r=a.key;if(r){if(Er(r,n)){if(r===z){const e=undefined;if(!Ln())return Fi(),{error:ge}}return yr(e,c.DBX_SALES_CHAT,t,i,n,o)}return Sr(r,n)?yr(e,c.DBX_CX_CHAT,t,i,n,o):(vi(r),{error:Ce})}return Hi(t),{error:Se}}return Pi(t),{error:_e}}function br(e,t,i,n,o){if(!xa())return yi(o),{error:pe};switch(o){case l.HELP_CENTER_HOST:const a=undefined;return Ar(e,o,i,t,n)||{error:_e};case l.EXPERIENCE_HOST:const r=undefined;return Nr(e,o,i,t,n)||{error:_e};default:return{error:_e}}}function wr(e,t,i){const n=window.location.href,o=dn(n),a=ka(g);if(Ki(`handleChatForDropboxSubdomain: Handling chat setup configurations for: '${t}'.`),_n(a,e,t),a){const e=tn();if(!e)return yi(t),{error:me};const a=en(e);return a!==c.UNSUPPORTED_CHAT?(Ki(`handleChatForDropboxSubdomain: Proceeding to prepare chat configurations for ${a}.`),localStorage.setItem(D,JSON.stringify(fa)),br(a,n,o,i,t)):(ki(t),{error:Ie})}return yi(t),{error:pe}}function Lr(t,i,n,o,a,r){switch(r){case l.WWW_DBX_HOST:return Hr(t,i,n,o,a,r);case l.SIGN_CENTER_HOST:return vr(t,i,n,o,a,r);default:return{error:{type:e.Critical,message:`No handler for domain ${r}`}}}}function yr(e,t,i,n,o,a){const r=undefined;return Lr(e,t,i,n,o,a)}function Hr(e,t,i,n,o,a){return t===c.DBX_SALES_CHAT?Pr(e,a,i,n,t,o):t===c.DBX_CX_CHAT?Fr(e,a,i,n,t,o):{error:Ie}}function vr(e,t,i,n,o,a){const r=Yi(g);return e?r===U?Br(t,i,n,o,a,0):r===F?Wr(t,i,n,o,a,0):{error:Te}:{error:pe}}function Ur(e,t,i,n,o,a,r,s,d,l){const c=r(t,o);return l(g)?d(e,a,n,i,o):s(e,a,n,i,o,c)}function Pr(e,t,i,n,o,a){if(e&&t===l.WWW_DBX_HOST&&Yi(g)===U)return Vr(o,t,n,i,a,0);{const e=mr(t,i,a);return null===e.entryPath?(Vi(l.WWW_DBX_HOST,i),{error:Ee}):e.isValid?Ur(o,e.entryPath,i,n,a,t,lr,Gr,Xr,ka):{error:Ee}}}function Fr(e,t,i,n,o,a){if(e&&t===l.WWW_DBX_HOST&&Yi(g)===F)return Vr(o,t,n,i,a,0);{const e=Tr(t,i);return null===e.entryPath?(Vi(l.WWW_DBX_HOST,i),{error:Ee}):e.isValid?Ur(o,e.entryPath,i,n,a,t,ur,Gr,Xr,ka):{error:Ee}}}function kr(e,t,i,n){if(Rn())return Ui(),{error:Le};const o=Or(e);if(o.status){const a=o.key;if(a){if(_r(a,i)){const o=undefined,a=cr(ln(e),i);return Br(c.DBX_SALES_CHAT,e,t,i,n,a)}return vi(a),{error:Ce}}return Hi(e),{error:Se}}return Pi(e),{error:_e}}function Br(e,t,i,n,o,a){return Gr(e,o,i,t,n,a)}function Wr(e,t,i,n,o,a){return Gr(e,o,i,t,n,a)}function Mr(e,t,i,n,o,a,r){return{identifiedChat:e,chatInteractionType:t,trustedHost:i,identifiedHost:n,identifiedHref:o,supportedEntitlements:a,identifiedChatStartUpTime:r}}function xr(t,i,n,o,a,r){const s=Cn(i);if(s===u.UNSUPPORTED_ENTITLEMENTS)return Li(we.type,we.message,void 0),{error:we};let d;try{d=En(s,a)}catch(t){return Li(e.Critical,Oe.message,t),{error:Oe}}return s!==u.HELP_CENTER_ENTITLEMENTS&&s!==u.EXPERIENCE_ENTITLEMENTS||(r=0),i===l.WWW_DBX_HOST?Mr(t,h.PROACTIVE_CHAT,l.WWW_DBX_HOST,n,o,d,r):i===l.HELP_CENTER_HOST||i===l.EXPERIENCE_HOST?Mr(t,h.PROACTIVE_CHAT,i,n,o,d,r):i===l.SIGN_CENTER_HOST?Mr(t,h.PROACTIVE_CHAT,l.SIGN_CENTER_HOST,n,o,d,r):{error:Ne}}function Xr(e,t,i,n,o){return Gr(e,t,i,n,o,0)}function Gr(e,t,i,n,o,a){const r=xr(e,t,i,n,o.chatSupportedEntitlements,a);return"error"in r?{error:r.error}:(o.chatInitProfile=r,{chatConfig:o})}function Vr(t,i,n,o,a,r){return 0===r?Gr(t,i,n,o,a,r):{error:{type:e.Operational,message:`Proactive chat timer is not 0. Timer value: ${r}.`}}}function Zr(e,t,i){const n=undefined;sr(e,zr(g,e,t),i)}function zr(e,t,i){return wr(e,t,i)}function $r(e,t,i){const n=undefined;sr(e,Kr(g,e,t),i)}function Kr(e,t,i){return wr(e,t,i)}function Jr(t,i,n){var o;i.chatSpecificConfigs||(i.chatSpecificConfigs={}),i.chatSpecificConfigs.dbxSignChatConfigs||(i.chatSpecificConfigs.dbxSignChatConfigs={...n});const a=Yr(g,t,i);(null===(o=null==a?void 0:a.error)||void 0===o?void 0:o.type)!==e.Critical?(null==a?void 0:a.error)||er(a):Bi()}function Yr(e,t,i){const n=gn(),o=dn(n),a=ka(g);return a?(Ni.saveStateToLocalStorage(D,fa),Rr(a,e,n,o,i,t)):kr(n,o,i,t)}function jr(t,i,n){var o;i.chatSpecificConfigs||(i.chatSpecificConfigs={}),i.chatSpecificConfigs.dbxChatConfigs||(i.chatSpecificConfigs.dbxChatConfigs={...n});const a=qr(g,t,i);(null===(o=null==a?void 0:a.error)||void 0===o?void 0:o.type)!==e.Critical?(null==a?void 0:a.error)||er(a):Bi()}function qr(e,t,i){const n=gn(),o=dn(n),a=ka(g);return a?Rr(a,e,n,o,i,t):Dr(a,n,o,i,t)}function Qr(){const e=undefined,t=undefined,i=undefined,n=undefined,o=undefined,a=undefined,r=undefined,s=undefined,d=undefined,l=undefined,c=undefined,u=undefined,h=undefined;return{iframeSrc:window.dbxPithosConfig.zoom_chat_manager_init_data.iframeSrc,iframeOrigin:window.dbxPithosConfig.zoom_chat_manager_init_data.iframeOrigin,chatUri:window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiProtocol+"://"+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiSubdomain+"."+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiDomain+"."+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiTopleveldomain+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiPathname+"/"+window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiExtJsFileName,chatApiKey:window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiApiKey,chatDataEnv:window.dbxPithosConfig.zoom_chat_manager_init_data.chaturiDataEnv,chatSupportedEntitlements:window.dbxPithosConfig.zoom_chat_manager_init_data.chatSupportedEntitlements}}function es(){var e,t,i,n,o,a,r,s;const d=null===(t=null===(e=window.dbxPithosConfig.zoom_chat_manager_init_data)||void 0===e?void 0:e.domainSpecificChatConfigs)||void 0===t?void 0:t.dbxChatConfigs;return{discoverabilityEntryPagesConfig:null!==(i=null==d?void 0:d.discoverabilityEntryPagesConfig)&&void 0!==i?i:null,salesEntryPagesConfig:null!==(n=null==d?void 0:d.salesEntryPagesConfig)&&void 0!==n?n:null,dbxUserIdentifiers:null!==(o=null==d?void 0:d.dbxUserIdentifiers)&&void 0!==o?o:null,isUserLoggedIn:null!==(a=null==d?void 0:d.isUserLoggedIn)&&void 0!==a&&a,salesExperimentVariant:null!==(r=null==d?void 0:d.salesExperimentVariant)&&void 0!==r?r:"",isCookieValidationFixEnabled:null!==(s=null==d?void 0:d.isCookieValidationFixEnabled)&&void 0!==s&&s,countryCode:null==d?void 0:d.countryCode}}function ts(){var e,t,i;const n=null===(t=null===(e=window.dbxPithosConfig.zoom_chat_manager_init_data)||void 0===e?void 0:e.domainSpecificChatConfigs)||void 0===t?void 0:t.formswiftChatConfigs;return{chatOperationalHours:null!==(i=null==n?void 0:n.chatOperationalHours)&&void 0!==i?i:null}}function is(){var e,t,i;const n=null===(t=null===(e=window.dbxPithosConfig.zoom_chat_manager_init_data)||void 0===e?void 0:e.domainSpecificChatConfigs)||void 0===t?void 0:t.dbxHelpChatConfigs;return{isChatEnabledForSubdomains:null!==(i=null==n?void 0:n.isChatEnabledForSubdomains)&&void 0!==i&&i}}function ns(){var e,t,i,n,o;const a=null===(t=null===(e=window.dbxPithosConfig.zoom_chat_manager_init_data)||void 0===e?void 0:e.domainSpecificChatConfigs)||void 0===t?void 0:t.dbxSignChatConfigs;return{isChatEnabledForSubdomains:null!==(i=null==a?void 0:a.isChatEnabledForSubdomains)&&void 0!==i&&i,isCookieValidationFixEnabled:null!==(n=null==a?void 0:a.isCookieValidationFixEnabled)&&void 0!==n&&n,salesEntryPagesConfig:null!==(o=null==a?void 0:a.salesEntryPagesConfig)&&void 0!==o?o:null}}function os(){var e,t,i;const n=null===(t=null===(e=window.dbxPithosConfig.zoom_chat_manager_init_data)||void 0===e?void 0:e.domainSpecificChatConfigs)||void 0===t?void 0:t.dbxDashChatConfigs;return{isChatEnabledForSubdomains:null!==(i=null==n?void 0:n.isChatEnabledForSubdomains)&&void 0!==i&&i}}function as({baseChatConfigs:e}){const t=undefined,i=undefined,n=an(dn(window.location.href),e.chatSupportedEntitlements);if(n===l.WWW_DBX_HOST){const t=undefined;jr(n,e,es())}else if(n===l.SIGN_CENTER_HOST){const t=undefined;Jr(n,e,ns())}else if(n===l.HELP_CENTER_HOST){const t=undefined;$r(n,e,is())}else if(n===l.EXPERIENCE_HOST){const t=undefined;Zr(n,e,is())}else if(n===l.DASH_DBX_HOST){const t=undefined;Ja(e,os())}else if(n===l.FORMSWIFT_HOST){const t=undefined;ja(e,ts())}else n===l.DOCSEND_HOST?za(e):n===l.HELLOSIGN_HOST?Qa(e):n===l.UNSUPPORTED_HOST&&Gi()}Xa.chatUri="",Xa.chatApiKey="",Xa.chatDataEnv="",Xa.instance=null,$i();const rs=Qr();Ki(`Reading [Pre-configured] baseChatConfigs: ${JSON.stringify(rs)}`);const ss=undefined;as({baseChatConfigs:rs})})(),n})()));
})();
//# debugId=595d80c0-3a60-3a74-b925-2e811d328a35